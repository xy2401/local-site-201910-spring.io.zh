<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>SimpleJdbcTemplate: Spring 2.0 and Java 5</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="SimpleJdbcTemplate: Spring 2.0 and Java 5" />
<meta name="twitter:description" content="&lt;p&gt;In the run up to &lt;a href=&quot;http://www.thespringexperience.com&quot;&gt;The Spring Experience&lt;/a&gt; I’ve been busy but I’ve noticed that Rod’s been really active on the blogging front. So in some spare time in airports and on planes today, I’ve decided to do a little blogging.&lt;/p&gt;
&lt;p&gt;One of the biggest balancing acts that we in the Spring community have is to make sure that we stay backwards compatible while still innovating. Part of that innovation is taking advantage of new features and constructs in later versions of Java such as Java 5. Since the 1.2.x branch, we’ve seen some of this with things like the &lt;span style=&quot;font-family:courier&quot;&gt;@Transactional&lt;/span&gt; annotation and our JMX auto-detection based on the &lt;span style=&quot;font-family:courier&quot;&gt;@ManagedResource&lt;/span&gt; annotation. In the end these are great features and have greatly simplified development (at least mine anyway), but they really amount to moving metadata into the code. What we hadn’t seen was the actual simplification of APIs.&lt;/p&gt;
" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=200" />

<meta property="og:title" content="SimpleJdbcTemplate: Spring 2.0 and Java 5" />
<meta property="og:image" content="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=200" />
<meta property="og:description" content="&lt;p&gt;In the run up to &lt;a href=&quot;http://www.thespringexperience.com&quot;&gt;The Spring Experience&lt;/a&gt; I’ve been busy but I’ve noticed that Rod’s been really active on the blogging front. So in some spare time in airports and on planes today, I’ve decided to do a little blogging.&lt;/p&gt;
&lt;p&gt;One of the biggest balancing acts that we in the Spring community have is to make sure that we stay backwards compatible while still innovating. Part of that innovation is taking advantage of new features and constructs in later versions of Java such as Java 5. Since the 1.2.x branch, we’ve seen some of this with things like the &lt;span style=&quot;font-family:courier&quot;&gt;@Transactional&lt;/span&gt; annotation and our JMX auto-detection based on the &lt;span style=&quot;font-family:courier&quot;&gt;@ManagedResource&lt;/span&gt; annotation. In the end these are great features and have greatly simplified development (at least mine anyway), but they really amount to moving metadata into the code. What we hadn’t seen was the actual simplification of APIs.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2006-11-28 02:02:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">SimpleJdbcTemplate: Spring 2.0 and Java 5</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/bhale">Ben Hale</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2006-11-28 02:02:00.0">November 28, 2006</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="39" href="/blog/2006/11/28/simplejdbctemplate-spring-2-0-and-java-5#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>In the run up to <a href="http://www.thespringexperience.com">The Spring Experience</a> I&rsquo;ve been busy but I&rsquo;ve noticed that Rod&rsquo;s been really active on the blogging front. So in some spare time in airports and on planes today, I&rsquo;ve decided to do a little blogging.</p><p>One of the biggest balancing acts that we in the Spring community have is to make sure that we stay backwards compatible while still innovating. Part of that innovation is taking advantage of new features and constructs in later versions of Java such as Java 5. Since the 1.2.x branch, we&rsquo;ve seen some of this with things like the <span style="font-family:courier">@Transactional</span> annotation and our JMX auto-detection based on the <span style="font-family:courier">@ManagedResource</span> annotation. In the end these are great features and have greatly simplified development (at least mine anyway), but they really amount to moving metadata into the code. What we hadn&rsquo;t seen was the actual simplification of APIs.</p><p>With Spring 2.0, that&rsquo;s changed. We&rsquo;re seeing certain APIs take advantage of features other than just annotations. In fact, there is one great example where we see almost every new language feature of Java 5 used (autoboxing, varargs, generics), the <a href="http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html" style="font-family:courier">SimpleJdbcTemplate</a>. <span style="font-family:courier">SimpleJdbcTemplate</span> isn&rsquo;t quite a replacement for the standard <span style="font-family:courier">JdbcTemplate</span>, rather it uses Java 5 to simplify certain common tasks.</p>
<h2>Autoboxing</h2><p>Strictly speaking, autoboxing isn&rsquo;t something that we do with our APIs, but it is something that can make using <span style="font-family:courier">JdbcTemplate</span> much nicer. So for example, where you use to have to box your primitive values&hellip;</p>
<pre><code class="prettyprint java"><br />public int getLargeAccountCount(double value, int type) {
    return getSimpleJdbcTemplate().queryForInt(
        &quot;select count(*) from accounts where balance &gt; ? and type = ?&quot;,
        new Object[] { new Double(value), new Integer(type) });
}
</code></pre><p>&hellip; you no longer have to.</p>
<pre><code class="prettyprint java"><br />public int getLargeAccountCount(double value, int type) {
    return getSimpleJdbcTemplate().queryForInt(
        &quot;select count(*) from accounts where balance &gt; ? and type = ?&quot;,
        new Object[] { value, type });
}
</code></pre><p>In this simple example, it doesn&rsquo;t make a whole lot of difference, but you can imagine in a complex SQL query with multiple bind variables boxing can take up quite a bit of room.</p>
<h2>Varargs</h2><p>If we take a look at that original example, we see another piece of boilerplate code that Java 5 can help us remove. The bind parameters are passed in as an <span style="font-family:courier">Object</span> array, but Java 5 will allow us to specify just a comma delimited list of objects and it&rsquo;ll be converted back into that needed object array.</p><p>So if we start with the original example&hellip;</p>
<pre><code class="prettyprint java"><br />public int getLargeAccountCount(double value, int type) {
    return getSimpleJdbcTemplate().queryForInt(
        &quot;select count(*) from accounts where balance &gt; ? and type = ?&quot;,
        new Object[] { new Double(value), new Integer(type) });
}
</code></pre><p>&hellip; and combine both autoboxing and varargs things really start to get shorter.</p>
<pre><code class="prettyprint java"><br />public int getLargeAccountCount(double value, int type) {
    return getSimpleJdbcTemplate().queryForInt(
        &quot;select count(*) from accounts where balance &gt; ? and type = ?&quot;,
        value, type);
}
</code></pre>
<h2>Generics</h2><p>The final improvement that we see in <span style="font-family:courier">SimpleJdbcTemplate</span> is the introduction of generics. One of the biggest pains for me when using <span style="font-family:courier">JdbcTemplate</span> was that whenever I did a <a href="http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#queryForObject(java.lang.String,%20java.lang.Object[],%20org.springframework.jdbc.core.RowMapper)" style="font-family:courier">queryForObject()</a> I had to do manual casting and didn&rsquo;t get a lot of help from my IDE or compiler.</p>
<pre><code class="prettyprint java"><br />public Account getAccount(long id) {
    return (Account) getJdbcTemplate().queryForObject(
        &quot;select * from accounts where id = ?&quot;,
        new Object[] { new Long(id) }, new RowMapper() {

            public Object mapRow(ResultSet rs, int rowNum)
                    throws SQLException {
                String accountNumber = rs.getString(&quot;account_number&quot;);
                int balance = rs.getInt(&quot;balance&quot;);
                return new Account(accountNumber, balance);
            }
        });
}
</code></pre><p>In Spring 2.0 we released a companion to <span style="font-family:courier">SimpleJdbcTemplate</span>, <a href="http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/simple/ParameterizedRowMapper.html" style="font-family:courier">ParameterizedRowMapper</a>. When the two are used together, it actually creates a pretty nice little system that doesn&rsquo;t require a cast at all and has your IDE and compiler doing strong type checking.</p>
<pre><code class="prettyprint java"><br />public Account getAccount(long id) {
    return getSimpleJdbcTemplate().queryForObject(
        &quot;select * from accounts where id = ?&quot;,
        new ParameterizedRowMapper&lt;Account&gt;() {

            public Account mapRow(ResultSet rs, int rowNum)
                    throws SQLException {
                String accountNumber = rs.getString(&quot;account_number&quot;);
                int balance = rs.getInt(&quot;balance&quot;);
                return new Account(accountNumber, balance);
            }
        }, id);
}
</code></pre><p>One thing that it&rsquo;s important to remember is that <span style="font-family:courier">SimpleJdbcTemplate</span> doesn&rsquo;t have all of the methods that <span style="font-family:courier">JdbcTemplate</span> had. It doesn&rsquo;t even extend <span style="font-family:courier">JdbcTemplate</span>, but rather can provide a reference to a <span style="font-family:courier">JdbcTemplate</span>. The goal of <span style="font-family:courier">SimpleJdbcTemplate</span> is to simplify the use of some common behaviors while leveraging Java 5.</p><p>In the end, this isn&rsquo;t anything revolutionary. Much like Rod&rsquo;s <a href="http://blog.interface21.com/main/2006/11/25/xml-syntax-sugar-in-spring-20/" style="font-family:courier">earlier post</a>, this is just syntactic sugar. But it is an example of the ways Spring is embracing the new features in Java 5 and beyond.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 39;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>