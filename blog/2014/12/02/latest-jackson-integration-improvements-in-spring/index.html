<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring的最新Jackson集成改进</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Latest Jackson integration improvements in Spring">
<meta name="twitter:description" content="<p><strong>Updated on 2015/08/31 with an additional <a href=" #jackson-module="="></head><body >Jackson modules section 
<p>Spring <a href="https://github.com/FasterXML/jackson">Jackson</a> support has been improved lately to be more flexible and powerful. This blog post gives you an update about the most useful Jackson related features available in Spring Framework 4.x and Spring Boot. All the code samples are coming from this <a href="https://github.com/sdeleuze/spring-jackson-demo">spring-jackson-demo</a> sample application, feel free to have a look at the code.</p>
<h2><a href="#json-views" class="anchor" name="json-views"></a>JSON Views</h2>
<p>It can sometimes be useful to filter contextually objects serialized to the HTTP response body. In order to provide such capabilities, Spring MVC now has builtin support for <a href="http://wiki.fasterxml.com/JacksonJsonViews">Jackson’s Serialization Views</a> (as of Spring Framework 4.2, JSON Views are supported on <code>@MessageMapping</code> handler methods as well).</p>
">
<meta name="twitter:creator" content="@sdeleuze">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=200">

<meta property="og:title" content="Latest Jackson integration improvements in Spring">
<meta property="og:image" content="https://gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=200">
<meta property="og:description" content="<p><strong>Updated on 2015/08/31 with an additional <a href=" #jackson-module="=">Jackson modules section 
<p>Spring <a href="https://github.com/FasterXML/jackson">Jackson</a> support has been improved lately to be more flexible and powerful. This blog post gives you an update about the most useful Jackson related features available in Spring Framework 4.x and Spring Boot. All the code samples are coming from this <a href="https://github.com/sdeleuze/spring-jackson-demo">spring-jackson-demo</a> sample application, feel free to have a look at the code.</p>
<h2><a href="#json-views" class="anchor" name="json-views"></a>JSON Views</h2>
<p>It can sometimes be useful to filter contextually objects serialized to the HTTP response body. In order to provide such capabilities, Spring MVC now has builtin support for <a href="http://wiki.fasterxml.com/JacksonJsonViews">Jackson’s Serialization Views</a> (as of Spring Framework 4.2, JSON Views are supported on <code>@MessageMapping</code> handler methods as well).</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2014-12-02 13:30:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring的最新Jackson集成改进</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=20&d=mm"> <a class="author" rel="author" href="/team/sdeleuze">塞巴斯蒂安·德勒兹（SébastienDeleuze）</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2014-12-02 13:30:00.0">2014年12月2日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2014/12/02/latest-jackson-integration-improvements-in-spring#disqus_thread" data-disqus-identifier="1840">
</a></div>
</div>
</header>
<div class="blog--post"><p><strong>于2015/08/31更新，并增加了<a href="#jackson-modules">Jackson模块部分</a></strong> </p><p>Spring <a href="https://github.com/FasterXML/jackson">Jackson</a>支持最近得到了改进，以更加灵活和强大。这篇博客文章为您提供了有关Spring Framework 4.x和Spring Boot中可用的最有用的Jackson相关功能的更新。所有代码示例均来自此<a href="https://github.com/sdeleuze/spring-jackson-demo">spring-jackson-demo</a>示例应用程序，请随时查看代码。</p><h2><a href="#json-views" class="anchor" name="json-views"></a> JSON视图</h2><p>有时，筛选上下文序列化到HTTP响应正文的对象可能很有用。为了提供这样的功能，Spring MVC现在已经内置了对<a href="http://wiki.fasterxml.com/JacksonJsonViews">Jackson的序列化视图的</a>支持（从Spring Framework 4.2开始，JSON Views在<code>@MessageMapping</code>处理程序方法）。</p><p>以下示例说明了如何使用<code>@JsonView</code>根据序列化的上下文过滤字段-例如，在处理集合时获取“摘要”视图，在处理单个资源时获取完整的表示形式：</p>
<pre><code class="prettyprint java">public class View {
	interface Summary {}
}

public class User {

	@JsonView(View.Summary.class)
	private Long id;

	@JsonView(View.Summary.class)
	private String firstname;

	@JsonView(View.Summary.class)
	private String lastname;

	private String email;
	private String address;
	private String postalCode;
	private String city;
	private String country;
}

public class Message {

	@JsonView(View.Summary.class)
	private Long id;

	@JsonView(View.Summary.class)
	private LocalDate created;

	@JsonView(View.Summary.class)
	private String title;

	@JsonView(View.Summary.class)
	private User author;

	private List&lt;User&gt; recipients;
  
	private String body;
}
</code></pre><p>多亏了Spring MVC <code>@JsonView</code>支持，可以按每个处理程序方法选择应该序列化哪个字段：</p>
<pre><code class="prettyprint java">@RestController
public class MessageController {

	@Autowired
	private MessageService messageService;

	@JsonView(View.Summary.class)
	@RequestMapping(&quot;/&quot;)
	public List&lt;Message&gt; getAllMessages() {
		return messageService.getAll();
	}

	@RequestMapping(&quot;/{id}&quot;)
	public Message getMessage(@PathVariable Long id) {
		return messageService.get(id);
	}
}
</code></pre><p>在此示例中，如果检索到所有消息，则由于<code>getAllMessages()</code>用注释的方法<code>@JsonView(View.Summary.class)</code> ：</p>
<pre><code class="prettyprint javascript">[ {
  &quot;id&quot; : 1,
  &quot;created&quot; : &quot;2014-11-14&quot;,
  &quot;title&quot; : &quot;Info&quot;,
  &quot;author&quot; : {
    &quot;id&quot; : 1,
    &quot;firstname&quot; : &quot;Brian&quot;,
    &quot;lastname&quot; : &quot;Clozel&quot;
  }
}, {
  &quot;id&quot; : 2,
  &quot;created&quot; : &quot;2014-11-14&quot;,
  &quot;title&quot; : &quot;Warning&quot;,
  &quot;author&quot; : {
    &quot;id&quot; : 2,
    &quot;firstname&quot; : &quot;Stéphane&quot;,
    &quot;lastname&quot; : &quot;Nicoll&quot;
  }
}, {
  &quot;id&quot; : 3,
  &quot;created&quot; : &quot;2014-11-14&quot;,
  &quot;title&quot; : &quot;Alert&quot;,
  &quot;author&quot; : {
    &quot;id&quot; : 3,
    &quot;firstname&quot; : &quot;Rossen&quot;,
    &quot;lastname&quot; : &quot;Stoyanchev&quot;
  }
} ]
</code></pre><p>在Spring MVC默认配置中， <code>MapperFeature.DEFAULT_VIEW_INCLUSION</code>被设定为<code>false</code> 。这意味着启用JSON视图时，非注释字段或属性（例如<code>body</code>要么<code>recipients</code>没有序列化。</p><p>当具体<code>Message</code>使用检索<code>getMessage()</code>处理程序方法（未指定JSON View），所有字段均按预期序列化：</p>
<pre><code class="prettyprint javascript">{
  &quot;id&quot; : 1,
  &quot;created&quot; : &quot;2014-11-14&quot;,
  &quot;title&quot; : &quot;Info&quot;,
  &quot;body&quot; : &quot;This is an information message&quot;,
  &quot;author&quot; : {
    &quot;id&quot; : 1,
    &quot;firstname&quot; : &quot;Brian&quot;,
    &quot;lastname&quot; : &quot;Clozel&quot;,
    &quot;email&quot; : &quot;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c9abaaa5a6b3aca589b9a0bfa6bda8a5e7a0a6">[email&#160;protected]</a>&quot;,
    &quot;address&quot; : &quot;1 Jaures street&quot;,
    &quot;postalCode&quot; : &quot;69003&quot;,
    &quot;city&quot; : &quot;Lyon&quot;,
    &quot;country&quot; : &quot;France&quot;
  },
  &quot;recipients&quot; : [ {
    &quot;id&quot; : 2,
    &quot;firstname&quot; : &quot;Stéphane&quot;,
    &quot;lastname&quot; : &quot;Nicoll&quot;,
    &quot;email&quot; : &quot;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f0839e99939f9c9cb08099869f84919cde999f">[email&#160;protected]</a>&quot;,
    &quot;address&quot; : &quot;42 Obama street&quot;,
    &quot;postalCode&quot; : &quot;1000&quot;,
    &quot;city&quot; : &quot;Brussel&quot;,
    &quot;country&quot; : &quot;Belgium&quot;
  }, {
    &quot;id&quot; : 3,
    &quot;firstname&quot; : &quot;Rossen&quot;,
    &quot;lastname&quot; : &quot;Stoyanchev&quot;,
    &quot;email&quot; : &quot;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7d0f0e0912041c131e15180b3d0d140b12091c11531412">[email&#160;protected]</a>&quot;,
    &quot;address&quot; : &quot;3 Warren street&quot;,
    &quot;postalCode&quot; : &quot;10011&quot;,
    &quot;city&quot; : &quot;New York&quot;,
    &quot;country&quot; : &quot;USA&quot;
  } ]
}
</code></pre><p>只能使用<strong>一个</strong>类或接口指定<code>@JsonView</code>批注，但是您可以使用继承来表示JSON View层次结构（如果字段是JSON View的一部分，则它也是父视图的一部分）。例如，此处理程序方法将序列化带注释的字段<code>@JsonView(View.Summary.class)</code> <strong>和</strong> <code>@JsonView(View.SummaryWithRecipients.class)</code> ：</p>
<pre><code class="prettyprint java">public class View {
	interface Summary {}
	interface SummaryWithRecipients extends Summary {}
}

public class Message {

	@JsonView(View.Summary.class)
	private Long id;

	@JsonView(View.Summary.class)
	private LocalDate created;

	@JsonView(View.Summary.class)
	private String title;

	@JsonView(View.Summary.class)
	private User author;

	@JsonView(View.SummaryWithRecipients.class)
	private List&lt;User&gt; recipients;
  
	private String body;
}

@RestController
public class MessageController {

	@Autowired
	private MessageService messageService;

	@JsonView(View.SummaryWithRecipients.class)
	@RequestMapping(&quot;/with-recipients&quot;)
	public List&lt;Message&gt; getAllMessagesWithRecipients() {
		return messageService.getAll();
	}
}
</code></pre><p>JSON视图也可以在使用时指定<code>RestTemplate</code> HTTP客户端或<code>MappingJackson2JsonView</code>通过包装值以序列化<code>MappingJacksonValue</code>如此<a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/test/java/org/springframework/web/client/RestTemplateIntegrationTests.java#L224">代码示例</a>所示。</p><h2><a href="#jsonp" class="anchor" name="jsonp"></a> JSONP</h2><p>如<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-jsonp">参考文档</a>中所述，您可以为启用<a href="https://en.wikipedia.org/wiki/JSONP">JSONP</a> <code>@ResponseBody</code>和<code>ResponseEntity</code>通过声明一个方法<code>@ControllerAdvice</code>扩展的豆<code>AbstractJsonpResponseBodyAdvice</code>如下所示：</p>
<pre><code class="prettyprint java">@ControllerAdvice
public class JsonpAdvice extends AbstractJsonpResponseBodyAdvice {

    public JsonpAdvice() {
        super(&quot;callback&quot;);
    }
}
</code></pre><p>有了这样<code>@ControllerAdvice</code> Bean已注册，则可以使用来从另一个域请求JSON网络服务<code><script /></code>标签：</p>
<pre><code class="prettyprint html">&lt;script type=&quot;application/javascript&quot;
            src=&quot;http://mydomain.com/1.json?jsonp=parseResponse&quot;&gt;
&lt;/script&gt;
</code></pre><p>在此示例中，收到的有效载荷将是：</p>
<pre><code class="prettyprint javascript">parseResponse({
  &quot;id&quot; : 1,
  &quot;created&quot; : &quot;2014-11-14&quot;,
  ...
});
</code></pre><p>JSONP也受支持，并在使用时自动启用<code>MappingJackson2JsonView</code>带有查询参数名为jsonp或callback的请求。JSONP查询参数名称可以通过<code>jsonpParameterNames</code>属性。</p><h2><a href="#xml-support" class="anchor" name="xml-support"></a> XML支持</h2><p>从2.0版本开始，Jackson对JSON以外的其他一些数据格式提供了一流的支持。 Spring Framework和Spring Boot为基于Jackson的XML序列化/反序列化提供内置支持。</p><p>一旦包含<a href="https://github.com/FasterXML/jackson-dataformat-xml"><code>jackson-dataformat-xml</code></a>依赖于您的项目，它会自动代替JAXB2使用。</p><p>与JAXB2相比，使用Jackson XML扩展具有几个优点：</p>
<ul>
<li>杰克逊和JAXB注释都可以识别</li>
<li>支持JSON View，可让您轻松构建REST Web服务，并为XML和JSON数据格式使用相同的过滤输出</li>
<li>无需注释您的班级<code>@XmlRootElement</code> ，每个可序列化为JSON的类将可序列化为XML</li>
</ul><p>通常，您还需要确保使用的XML库是Woodstox，因为：</p>
<ul>
<li>它比JDK提供的Stax实现要快</li>
<li>它避免了一些已知问题，例如添加不必要的名称空间前缀</li>
<li>没有它，某些功能（例如漂亮的打印）将无法使用</li>
</ul><p>为了使用它，只需添加最新的<a href="https://search.maven.org/#search|gav|1|g%3A"org.codehaus.woodstox" AND a%3A"woodstox-core-asl""><code>woodstox-core-asl</code></a>项目可用的依赖项。</p><h2><a href="#customizing-the-jackson-objectmapper" class="anchor" name="customizing-the-jackson-objectmapper"></a>定制Jackson ObjectMapper</h2><p>在Spring Framework 4.1.1之前，Jackson <code>HttpMessageConverter</code> s正在使用<code>ObjectMapper</code>默认配置。为了提供更好且易于自定义的默认配置， <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html"><code>Jackson2ObjectMapperBuilder</code></a>已经介绍了。它与众所周知的JavaConfig等效<a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html"><code>Jackson2ObjectMapperFactoryBean</code></a>在XML配置中使用。</p><p><a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html"><code>Jackson2ObjectMapperBuilder</code></a>提供了一个不错的API，可以自定义各种Jackson设置，同时保留Spring Framework提供的默认设置。它还允许创建<code>ObjectMapper</code>和<code>XmlMapper</code>基于相同配置的实例。</p><p>都<code>Jackson2ObjectMapperBuilder</code>和<code>Jackson2ObjectMapperFactoryBean</code>定义更好的Jackson默认配置。例如， <a href="https://fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/DeserializationFeature.html#FAIL_ON_UNKNOWN_PROPERTIES"><code>DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES</code></a>属性设置为false，以便允许反序列化具有未映射属性的JSON对象。</p><p>这些类还使您可以轻松注册Jackson <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#mixIn-java.lang.Class-java.lang.Class-">混合器</a> ， <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#modules-java.util.List-">模块</a> ， <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#serializers-com.fasterxml.jackson.databind.JsonSerializer...-">序列化器</a>甚至属性命名策略，例如<code>PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES</code>如果你想拥有你的<code>userName</code> java属性翻译成<code>user_name</code>在JSON中。</p><h3><a href="#with-spring-boot" class="anchor" name="with-spring-boot"></a>带有弹簧靴</h3><p>如Spring Boot参考文档中所述，有多种方法可以<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-customize-the-jackson-objectmapper">自定义Jackson <code>ObjectMapper</code></a> 。</p><p>例如，您可以通过添加以下属性轻松地启用/禁用Jackson功能<code>spring.jackson.serialization.indent_output=true</code>至<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-external-config-application-property-files"><code>application.properties</code></a> 。</p><p>作为替代方案，Spring Boot还允许自定义Spring MVC使用的Jackson配置（JSON和XML） <code>HttpMessageConverter</code>通过声明一个<code>Jackson2ObjectMapperBuilder</code><code>@Bean</code> ：</p>
<pre><code class="prettyprint java">@Bean
public Jackson2ObjectMapperBuilder jacksonBuilder() {
	Jackson2ObjectMapperBuilder b = new Jackson2ObjectMapperBuilder();
	b.indentOutput(true).dateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;));
	return b;
}
</code></pre><p>如果要使用常规配置密钥未公开的高级Jackson配置，这将很有用。</p><p>如果您只需要注册一个额外的Jackson模块，请注意Spring Boot会自动检测所有<code>Module</code><code>@Bean</code> 。例如，注册<a href="https://github.com/FasterXML/jackson-module-parameter-names">jackson-module-parameter-names</a> ：</p>
<pre><code class="prettyprint java">@Bean
public Module parameterNamesModule() {
  return new ParameterNamesModule(JsonCreator.Mode.PROPERTIES);
}
</code></pre><h3><a href="#without-spring-boot" class="anchor" name="without-spring-boot"></a>没有Spring Boot</h3><p>在普通的Spring Framework应用程序中，您还可以使用<code>Jackson2ObjectMapperBuilder</code>自定义XML和JSON <code>HttpMessageConverter</code>如下所示：</p>
<pre><code class="prettyprint java">@Configuration
@EnableWebMvc
public class WebConfiguration extends WebMvcConfigurerAdapter {

	@Override
	public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {
		Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();
		builder.indentOutput(true).dateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;));
		converters.add(new MappingJackson2HttpMessageConverter(builder.build()));
		converters.add(new MappingJackson2XmlHttpMessageConverter(builder.createXmlMapper(true).build()));
	}
}
</code></pre><h3><a href="#jackson-modules" class="anchor" name="jackson-modules"></a>杰克逊模块</h3><p>如果在类路径中检测到某些知名的Jackson模块，则会自动注册它们：</p>
<ul>
<li><a href="https://github.com/FasterXML/jackson-datatype-jdk7">jackson-datatype-jdk7</a> ：Java 7类型，例如<code>java.nio.file.Path</code> （从4.2.1版本开始）</li>
<li><a href="https://github.com/FasterXML/jackson-datatype-joda">jackson-datatype-joda</a> ：乔达时间类型</li>
<li><a href="https://github.com/FasterXML/jackson-datatype-jsr310">jackson-datatype-jsr310</a> ：Java 8日期和时间API数据类型</li>
<li><a href="https://github.com/FasterXML/jackson-datatype-jdk8">jackson-datatype-jdk8</a> ：其他Java 8类型，例如<code>Optional</code> （从4.2.0版开始）</li>
</ul><p>其他一些模块默认情况下未注册（主要是因为它们需要其他配置），因此您必须显式注册它们，例如使用<a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#modulesToInstall-com.fasterxml.jackson.databind.Module...-"><code>Jackson2ObjectMapperBuilder#modulesToInstall()</code></a>或通过宣布杰克逊<code>Module</code><code>@Bean</code>如果您使用的是Spring Boot：</p>
<ul>
<li><a href="https://github.com/FasterXML/jackson-module-parameter-names">jackson-module-parameter-names</a> ：添加了对访问参数名称的支持（在Java 8中添加的功能）</li>
<li><a href="https://github.com/zalando/jackson-datatype-money">杰克逊数据类型货币</a> ： <code>javax.money</code>类型（非官方模块）</li>
<li><a href="https://github.com/FasterXML/jackson-datatype-hibernate">jackson-datatype-hibernate</a> ：休眠特定的类型和属性（包括延迟加载方面）</li>
</ul><h2><a href="#advanced-features" class="anchor" name="advanced-features"></a>高级功能</h2><p>从Spring Framework 4.1.3开始，由于添加了Spring上下文感知<a href="http://wiki.fasterxml.com/HandlerInstantiator"><code>HandlerInstantiator</code></a> （有关更多详细信息，请参见<a href="https://jira.spring.io/browse/SPR-10768">SPR-10768</a> ），您可以自动连接Jackson处理器（序列化器，反序列化器，类型和类型ID解析器）。</p><p>例如，这可以允许您构建自定义反序列化器，该自解串器会将JSON有效负载中仅包含引用的字段替换为完整的<code>Entity</code>从数据库中检索。</p></div>
</div>
<section id="disqus_thread"></section>
<script src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js" data-cfasync="false"></script><script type="text/javascript">var disqus_shortname = 'spring-io';
      var disqus_identifier = 1840;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));</script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });</script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>