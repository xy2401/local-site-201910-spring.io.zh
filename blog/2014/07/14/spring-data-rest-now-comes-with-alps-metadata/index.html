<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring Data REST现在带有ALPS元数据</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Spring Data REST now comes with ALPS metadata">
<meta name="twitter:description" content="<p>With the recent release of <a href=" http:="" ="" spring.io="" blog="" 2014="" 07="" 10="" first-milestone-of-spring-data-release-train-evans-availabl="="></head><body dir="ltr">Spring Data’s Evans M1 milestone, Spring Data REST now comes with support for <a href="http://alps.io">ALPS metadata</a> to describe the semantics of the resources exported.
<p><a href="http://alps.io/spec/index.html">ALPS</a> is a data format for defining simple descriptions of application-level semantics, similar in complexity to HTML micro-formats. It also supports adding its metadata to existing media types. As of version 2.2 M1, Spring Data REST exposes JSON based ALPS resources that can help us navigate its resources. Let’s see how!</p>
<p>We can start with a quick example. If you clone the <a href="https://github.com/gregturn/todo">TODO repo</a> and run <code>mvn spring-boot:run</code>, you can navigate it to learn its values pretty easily.</p>
">
<meta name="twitter:creator" content="@gregturn">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/43e9a9d63f7f4f9891c9fcd592b89cfa?s=200">

<meta property="og:title" content="Spring Data REST now comes with ALPS metadata">
<meta property="og:image" content="https://gravatar.com/avatar/43e9a9d63f7f4f9891c9fcd592b89cfa?s=200">
<meta property="og:description" content="<p>With the recent release of <a href=" http:="" ="" spring.io="" blog="" 2014="" 07="" 10="" first-milestone-of-spring-data-release-train-evans-availabl="=">Spring Data’s Evans M1 milestone, Spring Data REST now comes with support for <a href="http://alps.io">ALPS metadata</a> to describe the semantics of the resources exported.
<p><a href="http://alps.io/spec/index.html">ALPS</a> is a data format for defining simple descriptions of application-level semantics, similar in complexity to HTML micro-formats. It also supports adding its metadata to existing media types. As of version 2.2 M1, Spring Data REST exposes JSON based ALPS resources that can help us navigate its resources. Let’s see how!</p>
<p>We can start with a quick example. If you clone the <a href="https://github.com/gregturn/todo">TODO repo</a> and run <code>mvn spring-boot:run</code>, you can navigate it to learn its values pretty easily.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2014-07-14 15:06:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Data REST现在带有ALPS元数据</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/43e9a9d63f7f4f9891c9fcd592b89cfa?s=20&d=mm"> <a class="author" rel="author" href="/team/gturnquist">格雷格·特恩奎斯特</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2014-07-14 15:06:00.0">2014年7月14日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata#disqus_thread" data-disqus-identifier="1683">
</a></div>
</div>
</header>
<div class="blog--post"><p>随着<a href="https://spring.io/blog/2014/07/10/first-milestone-of-spring-data-release-train-evans-available">Spring Data的Evans M1里程碑</a>的最新发布，Spring Data REST现在支持<a href="http://alps.io">ALPS元数据，</a>以描述导出资源的语义。</p><p><a href="http://alps.io/spec/index.html">ALPS</a>是一种数据格式，用于定义应用程序级语义的简单描述，其复杂性类似于HTML微格式。它还支持将其元数据添加到现有媒体类型。从2.2 M1版本开始，Spring Data REST公开了基于JSON的ALPS资源，可以帮助我们导航其资源。让我们看看如何！</p><p>我们可以从一个简单的例子开始。如果克隆<a href="https://github.com/gregturn/todo">TODO仓库</a>并运行<code>mvn spring-boot:run</code> ，则可以对其进行导航以轻松了解其值。</p>
<pre><code class="prettyprint sh">$ curl -i localhost:8080
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
X-Application-Context: application
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Thu, 17 Jul 2014 13:36:48 GMT
{ "_links" : {
    "todos" : {
      "href" : "http://localhost:8080/todos"
    },
    "profile" : {
      "href" : "http://localhost:8080/alps"
    }
  }
}
</code></pre><p>在根文档中有两个链接： <code>todos</code>和<code>profile</code> 。客户可能不知道<code>todos</code>意味着什么，但是<a href="http://alps.io/spec/index.html#rfc.section.3.1">配置文件中</a>包含的内容已得到很好的定义。它基本上指向一种资源，该资源在实际媒体类型（在本例中为<a href="https://tools.ietf.org/html/draft-kelly-json-hal">HAL</a> ）定义的基础上描述资源的语义。我们为什么不检查呢？</p>
<pre><code class="prettyprint sh">$ curl -i localhost:8080/alps
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
X-Application-Context: application
Content-Type: application/alps+json
Transfer-Encoding: chunked
Date: Thu, 17 Jul 2014 13:54:56 GMT

{ "version" : "1.0",
  "descriptors" : [ {
    "href" : "http://localhost:8080/alps/todos",
    "name" : "todos"
  } ]
}
</code></pre><p>这里我们有一个<code>application/alps+json</code>文件。据此，它具有关于<code>todos</code>信息，该信息与我们之前看到的<code>todos</code>映射。因此，让我们导航到它的href。</p>
<pre><code class="prettyprint sh">$ curl localhost:8080/alps/todos
{ "version" : "1.0",
  "descriptors" : [ {
    "id" : "todo-representation",
    "descriptors" : [ {
      "name" : "description",
      "doc" : {
        "value" : "Details about the TODO item",
        "format" : "TEXT"
      },
      "type" : "SEMANTIC"
    }, {
      "name" : "title",
      "doc" : {
        "value" : "Title for the TODO item",
        "format" : "TEXT"
      },
      "type" : "SEMANTIC"
    }, {
      "name" : "id",
      "type" : "SEMANTIC"
    }, {
      "name" : "completed",
      "doc" : {
        "value" : "Is it completed?",
        "format" : "TEXT"
      },
      "type" : "SEMANTIC"
    } ]
  }, {
    "id" : "get-todos",
    "name" : "todos",
    "type" : "SAFE",
    "rt" : "#todo-representation"
  }, {
    "id" : "create-todos",
    "name" : "todos",
    "type" : "UNSAFE",
    "rt" : "#todo-representation"
  }, {
    "id" : "delete-todo",
    "name" : "todo",
    "type" : "IDEMPOTENT",
    "rt" : "#todo-representation"
  }, {
    "id" : "update-todo",
    "name" : "todo",
    "type" : "IDEMPOTENT",
    "rt" : "#todo-representation"
  }, {
    "id" : "patch-todo",
    "name" : "todo",
    "type" : "UNSAFE",
    "rt" : "#todo-representation"
  }, {
    "id" : "get-todo",
    "name" : "todo",
    "type" : "SAFE",
    "rt" : "#todo-representation"
  } ]
}
</code></pre><p>该文档包含一个顶级描述符<code>todo-representation</code> 。该描述符是描述符的集合，每个描述符用于域对象的每个属性。每个域元素都向我们提供其名称和其他文档信息。我们使用POJO内的<code>@Description</code>annotation为它提供了一个文本值，但是此数据也可以由资源包提供。</p><p>ALPS文档中的下半部分是此TODO资源支持的所有RESTful转换：获取，创建，删除，更新和修补。现在我们到了某个地方！</p><p>让我们看一下<code>get-todos</code> ，看看我们能找出什么：</p>
<pre><code class="prettyprint javascript">{ "id" : "get-todos",
  "name" : "todos",
  "type" : "SAFE",
  "rt" : "#todo-representation"
}
</code></pre><p>此操作描述一个GET。它将<code>todos</code>命名为与其相关的内容（我们在本文开头看到了）。这是SAFE，表示它不会更改系统状态。如果表示如果我们对<code>todos</code>执行GET，则可以期望响应包含以顶部可见的<code>todo-representation</code>描述符形式的结果。</p>
<ul>
<li>创建和修补程序不安全，因为它们会更改系统状态。</li>
<li>删除和更新是幂等的，这意味着我们可以多次执行相同的操作并期望获得相同的结果。</li>
</ul><p>每个操作的名称也告诉我们在何处执行操作。 <code>todos</code>指示应针对集合资源执行的RESTful操作，而<code>todo</code>用于项目资源。</p><p>有了这些信息，我们可以看到如何与<code>todos</code>进行交互。我们将从创建一个新的TODO开始。看<code>create-todos</code> ：</p>
<pre><code class="prettyprint javascript">{ "id" : "create-todos",
  "name" : "todos",
  "type" : "UNSAFE",
  "rt" : "#todo-representation"
}
</code></pre><p>它告诉我们要寻找<code>todos</code> 。因此，抓取顶部显示的URI并将其与POST（用于创建的REST动词）结合起来，我们可以这样编写：</p>
<pre><code class="prettyprint sh">$ curl -i -X POST -H "Content-Type:application/json" -d '
{ "title":"Create blog entry",
  "description": "Write blog post about SDRs ALPS metadata support",
  "completed": "false"
}' localhost:8080/todos
HTTP/1.1 201 Created
Server: Apache-Coyote/1.1
X-Application-Context: application
Location: http://localhost:8080/todos/1
Content-Length: 0
Date: Mon, 14 Jul 2014 20:23:12 GMT
</code></pre><p>在响应头中，我们可以找到新位置： <a href="http://localhost:8080/todos/1">http://localhost:8080/todos / 1</a> 。</p><p>ALPS元数据还将<code>get-todo</code>列为另一个操作，它将返回<code>todo-representation</code> 。因此，让我们尝试一下：</p>
<pre><code class="prettyprint sh">$ curl localhost:8080/todos/1
{ "title" : "Create blog entry",
  "description" : "Write blog post about SDRs ALPS metadata support",
  "completed" : false,
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/todos/1"
    }
  }
}
</code></pre><p>使用ALPS元数据，我们能够创建一个新的TODO，然后进行查找。</p><p>我们能够了解可用的操作以及由其管理的元素。而且我们也不必知道URI结构。元数据告诉我们在哪里进行这些RESTful转换。这意味着服务器可以更改URI，并且不会影响我们与服务交互的能力。</p><p>如果您想了解更多有关Spring Data REST的信息，请务必在今年的<a href="http://www.springone2gx.com">SpringOne会议</a>上注册<a href="http://2014.event.springone2gx.com/schedule/sessions/spring_data_rest_-_data_meets_hypermedia.html">Data Meets Hypermedia</a> 。当我们使用Spring Data REST创建Spring-a-Gram时，Spring Mobile / Android项目负责人<a href="https://spring.io/team/rclarkson">Roy Clarkson</a>将加入我的行列，Spring-a-Gram是一种用于从您的移动设备中捕捉照片并通过网络共享的工具。</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">var disqus_shortname = 'spring-io';
      var disqus_identifier = 1683;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));</script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });</script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>