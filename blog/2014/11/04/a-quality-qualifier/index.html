<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>A quality @Qualifier</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="A quality @Qualifier" />
<meta name="twitter:description" content="&lt;p&gt;Sometimes, &lt;em&gt;teh Twitterz&lt;/em&gt; is an amazing place. Just last week I spent some time helping clarify the behavior of Spring’s &lt;code&gt;@Qualifier&lt;/code&gt; annotation, which is both older than JSR 330 &lt;em&gt;and&lt;/em&gt; offers a richer superset of JSR 330’s &lt;code&gt;@Qualifier&lt;/code&gt; annotation. These misguided few seemed to be under the impression that Spring’s annotation didn’t offer the same degree of type-safety as the JSR 330 annotation. I don’t know if it’s because they simply hadn’t read up on the support (which is fairly new, since it’s only been around since 2007), or if it’s because they work for companies that make their money if you stop using Spring, but either way it was an excellent opportunity for a refresher! &lt;/p&gt;
" />
<meta name="twitter:creator" content="@starbuxman" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />

<meta property="og:title" content="A quality @Qualifier" />
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />
<meta property="og:description" content="&lt;p&gt;Sometimes, &lt;em&gt;teh Twitterz&lt;/em&gt; is an amazing place. Just last week I spent some time helping clarify the behavior of Spring’s &lt;code&gt;@Qualifier&lt;/code&gt; annotation, which is both older than JSR 330 &lt;em&gt;and&lt;/em&gt; offers a richer superset of JSR 330’s &lt;code&gt;@Qualifier&lt;/code&gt; annotation. These misguided few seemed to be under the impression that Spring’s annotation didn’t offer the same degree of type-safety as the JSR 330 annotation. I don’t know if it’s because they simply hadn’t read up on the support (which is fairly new, since it’s only been around since 2007), or if it’s because they work for companies that make their money if you stop using Spring, but either way it was an excellent opportunity for a refresher! &lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2014-11-04 11:52:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">A quality @Qualifier</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/jlong">Josh Long</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2014-11-04 11:52:00.0">November 04, 2014</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="1808" href="/blog/2014/11/04/a-quality-qualifier#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>Sometimes, <em>teh Twitterz</em> is an amazing place. Just last week I spent some time helping clarify the behavior of Spring&rsquo;s <code>@Qualifier</code> annotation, which is both older than JSR 330 <em>and</em> offers a richer superset of JSR 330&rsquo;s <code>@Qualifier</code> annotation. These misguided few seemed to be under the impression that Spring&rsquo;s annotation didn&rsquo;t offer the same degree of type-safety as the JSR 330 annotation. I don&rsquo;t know if it&rsquo;s because they simply hadn&rsquo;t read up on the support (which is fairly new, since it&rsquo;s only been around since 2007), or if it&rsquo;s because they work for companies that make their money if you stop using Spring, but either way it was an excellent opportunity for a refresher! </p><p>The qualifier annotation helps disambiguate bean references when Spring would otherwise not be able to do so. Spring&rsquo;s XML configuration supports a version of this, but without the type-safety, of course. We&rsquo;ll focus in this example on using Java configuration and component-scanning to register beans. As more people move to Spring&rsquo;s 8-year old Java configuration style this question seems to more frequently come up. Spring Boot is a Java configuration-first approach to building applications, and this technique may just come in handy in a pinch in a larger application based on Spring Boot. </p><p>It&rsquo;s use is simple. Suppose you have two beans that implement the <code>MarketPlace</code> interface. If you declare an array of <code>MarketPlace</code>s - then Spring will provide all beans that implement that interface:</p>
<pre><code class="prettyprint java">@Autowired
private MarketPlace[] marketPlaces; 
</code></pre><p>If you want to inject just one, you need to disambiguate the references. You can, in the simple case, just do so by bean ID: </p>
<pre><code class="prettyprint java">@Autowired 
@Qualifier( &quot;ios&quot;) // the use is unique to Spring. It&#39;s darned convenient, too!
private MarketPlace marketPlace ;

</code></pre><p>This assumes you&rsquo;ve elsewhere defined a bean whose ID is <code>ios</code>. This use is unique to Spring. You can also use <code>@Qualifier</code> to create a type-safe binding that links the bean definition to the injection site by the qualities of the qualifier annotation. Here&rsquo;s an example based on pureplay Spring annotations:</p>
<pre><code class="prettyprint java"><br />package spring;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.stereotype.Component;

import javax.annotation.PostConstruct;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import static spring.Spring.Platform;

@Configuration
@ComponentScan
public class Spring {

    public static void main(String[] args) {
        new AnnotationConfigApplicationContext(Spring.class);
    }

    @Autowired
    @Platform(Platform.OperatingSystems.ANDROID)
    private MarketPlace android;

    @Autowired
    @Platform(Platform.OperatingSystems.IOS)
    private MarketPlace ios;

    @PostConstruct
    public void qualifyTheTweets() {
        System.out.println(&quot;ios:&quot; + this.ios);
        System.out.println(&quot;android:&quot; + this.android);
    }

    // the type has to be public!
    @Target({ElementType.FIELD,
            ElementType.METHOD,
            ElementType.TYPE,
            ElementType.PARAMETER})
    @Retention(RetentionPolicy.RUNTIME)
    @Qualifier
    public static @interface Platform {

        OperatingSystems value();

        public static enum OperatingSystems {
            IOS,
            ANDROID
        }
    }
}

interface MarketPlace {
}

@Component
@Platform(Platform.OperatingSystems.IOS)
class AppleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;apple&quot;;
    }
}

@Component
@Platform(Platform.OperatingSystems.ANDROID)
class GoogleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;android&quot;;
    }
}

</code></pre><p>To compile and run this example, make sure you have <code>org.springframework.boot:spring-boot-starter:1.1.8.RELEASE</code> on the CLASSPATH.</p><p>This example shows the definition of two <code>MarketPlace</code> implementations, one for <code>GoogleMarketPlace</code> and one for the <code>AppleMarketPlace</code>. We define an annotation <code>@Platform</code> that takes a parameter of type <code>Platform.OperatingSystems</code>. This annotation is itself annotated with <code>@Qualifier</code> which tells Spring to treat it as a qualifier. The bean definitions are annotated accordingly: the <code>GoogleMarketPlace</code> is annotated with <code>@Platform(Platform.OperatingSystems.ANDROID)</code> and the <code>AppleMarketPlace</code> is annotated with <code>@Platform(Platform.OperatingSystems.IOS)</code>. Injecting either one (in the <code>Spring</code> class) then becomes as simple as using the <code>@Qualifier</code> annotation at the injection site. I&rsquo;m using field injection here, though this is just a scratchpad to flesh things out. Obviously, in any sort of <em>real</em> code you should prefer constructor and setter injection. </p><p>Spring natively supports JSR 330, as well. After all, we did help lead that initiative. Here&rsquo;s the equivalent example using JSR 330 alternatives. <code>@Component</code> becomes <code>@Named</code>, <code>@Autowired</code> becomes <code>@Inject</code> and <code>@Qualifier</code> becomes <code>@javax.inject.Qualifier</code>, but otherwise this should look very familiar.</p>
<pre><code class="prettyprint java"><br />package jsr330;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import javax.annotation.PostConstruct;
import javax.inject.Inject;
import javax.inject.Named;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import static jsr330.Jsr330.Platform;

@Configuration
@ComponentScan
public class Jsr330 {

    public static void main(String[] args) {
        new AnnotationConfigApplicationContext(Jsr330.class);
    }

    @Inject
    @Platform(Platform.OperatingSystems.ANDROID)
    private MarketPlace android;

    @Inject
    @Platform(Platform.OperatingSystems.IOS)
    private MarketPlace ios;

    @PostConstruct
    public void qualifyTheTweets() {
        System.out.println(&quot;ios:&quot; + this.ios);
        System.out.println(&quot;android:&quot; + this.android);
    }

    // the type has to be public!
    @Target({ElementType.FIELD,
            ElementType.METHOD,
            ElementType.TYPE,
            ElementType.PARAMETER})
    @Retention(RetentionPolicy.RUNTIME)
    @javax.inject.Qualifier
    public static @interface Platform {

        OperatingSystems value();

        public static enum OperatingSystems {
            IOS,
            ANDROID
        }
    }
}

interface MarketPlace {
}

@Named
@Platform(Platform.OperatingSystems.IOS)
class AppleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;apple&quot;;
    }
}

@Named
@Platform(Platform.OperatingSystems.ANDROID)
class GoogleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;android&quot;;
    }
}

</code></pre><p>To compile and run this example, make sure you have <code>org.springframework.boot:spring-boot-starter:1.1.8.RELEASE</code> <em>and</em> <code>javax.inject:javax.inject:1</code> on the CLASSPATH.</p><p>Is any of this new? No. That&rsquo;s the point. This has been possible since Spring 2.5 (which we released in 2007). It&rsquo;s surprising that people still don&rsquo;t know about this functionality, but hopefully this blog makes it easier for people to get started. As a next step, <a href="https://docs.spring.io/spring/docs/2.5.x/reference/beans.html#beans-autowired-annotation-qualifiers">check out the documentation (from 2.5 onwards!)</a> which covers every gory detail - including the XML alternative - in depth!</p><p>I should mention that - in practice - I haven&rsquo;t needed to do this a lot in my code. Maybe a dozen times in the last 7 years. It can be handy, though! </p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 1808;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>