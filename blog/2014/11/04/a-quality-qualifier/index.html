<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>优质@Qualifier</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="A quality @Qualifier">
<meta name="twitter:description" content="<p>Sometimes, <em>teh Twitterz</em> is an amazing place. Just last week I spent some time helping clarify the behavior of Spring’s <code>@Qualifier</code> annotation, which is both older than JSR 330 <em>and</em> offers a richer superset of JSR 330’s <code>@Qualifier</code> annotation. These misguided few seemed to be under the impression that Spring’s annotation didn’t offer the same degree of type-safety as the JSR 330 annotation. I don’t know if it’s because they simply hadn’t read up on the support (which is fairly new, since it’s only been around since 2007), or if it’s because they work for companies that make their money if you stop using Spring, but either way it was an excellent opportunity for a refresher! </p>
">
<meta name="twitter:creator" content="@starbuxman">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200">

<meta property="og:title" content="A quality @Qualifier">
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200">
<meta property="og:description" content="<p>Sometimes, <em>teh Twitterz</em> is an amazing place. Just last week I spent some time helping clarify the behavior of Spring’s <code>@Qualifier</code> annotation, which is both older than JSR 330 <em>and</em> offers a richer superset of JSR 330’s <code>@Qualifier</code> annotation. These misguided few seemed to be under the impression that Spring’s annotation didn’t offer the same degree of type-safety as the JSR 330 annotation. I don’t know if it’s because they simply hadn’t read up on the support (which is fairly new, since it’s only been around since 2007), or if it’s because they work for companies that make their money if you stop using Spring, but either way it was an excellent opportunity for a refresher! </p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2014-11-04 11:52:00.0">
</head>
<body >

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">优质@Qualifier</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&d=mm"> <a class="author" rel="author" href="/team/jlong">乔什·朗（Josh Long）</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2014-11-04 11:52:00.0">2014年11月4日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2014/11/04/a-quality-qualifier#disqus_thread" data-disqus-identifier="1808">
</a></div>
</div>
</header>
<div class="blog--post"><p>有时， <em>Twitterz</em>是一个了不起的地方。就在上周，我花了一些时间来帮助阐明Spring的行为<code>@Qualifier</code>批注，它早于JSR 330， <em>并且</em>提供了更丰富的JSR 330的超集<code>@Qualifier</code>注解。这些被误导的少数似乎给人的印象是，Spring的注释没有提供与JSR 330注释相同的类型安全性。我不知道这是因为他们只是没有读过支持文档（这是很新的，因为它自2007年才问世），或者是因为它们为那些在您停止使用Spring赚钱的公司工作，但是无论哪种方式，这都是一个极好的机会来复习！</p><p>如果Spring否则无法使用qualifier注释消除Bean引用的歧义。Spring的XML配置支持该版本，但是当然没有类型安全。在本示例中，我们将集中于使用Java配置和组件扫描来注册Bean。随着越来越多的人转向使用Spring已有8年历史的Java配置风格，这个问题似乎越来越频繁地出现。Spring Boot是一种Java配置优先的构建应用程序的方法，该技术在基于Spring Boot的较大应用程序中可能会派上用场。</p><p>它的使用很简单。假设您有两个实现了<code>MarketPlace</code>接口。如果声明一个数组<code>MarketPlace</code> s-然后Spring将提供实现该接口的所有bean：</p>
<pre><code class="prettyprint java">@Autowired
private MarketPlace[] marketPlaces; 
</code></pre><p>如果只想注入一个，则需要消除引用的歧义。在简单的情况下，您可以按bean ID进行操作：</p>
<pre><code class="prettyprint java">@Autowired 
@Qualifier( &quot;ios&quot;) // the use is unique to Spring. It&#39;s darned convenient, too!
private MarketPlace marketPlace ;

</code></pre><p>假设您在其他地方定义了一个ID为<code>ios</code> 。这种用法是Spring特有的。您也可以使用<code>@Qualifier</code>创建类型安全的绑定，该绑定通过限定符注释的质量将bean定义链接到注入位置。这是一个基于pureplay Spring注释的示例：</p>
<pre><code class="prettyprint java"><br />package spring;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.stereotype.Component;

import javax.annotation.PostConstruct;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import static spring.Spring.Platform;

@Configuration
@ComponentScan
public class Spring {

    public static void main(String[] args) {
        new AnnotationConfigApplicationContext(Spring.class);
    }

    @Autowired
    @Platform(Platform.OperatingSystems.ANDROID)
    private MarketPlace android;

    @Autowired
    @Platform(Platform.OperatingSystems.IOS)
    private MarketPlace ios;

    @PostConstruct
    public void qualifyTheTweets() {
        System.out.println(&quot;ios:&quot; + this.ios);
        System.out.println(&quot;android:&quot; + this.android);
    }

    // the type has to be public!
    @Target({ElementType.FIELD,
            ElementType.METHOD,
            ElementType.TYPE,
            ElementType.PARAMETER})
    @Retention(RetentionPolicy.RUNTIME)
    @Qualifier
    public static @interface Platform {

        OperatingSystems value();

        public static enum OperatingSystems {
            IOS,
            ANDROID
        }
    }
}

interface MarketPlace {
}

@Component
@Platform(Platform.OperatingSystems.IOS)
class AppleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;apple&quot;;
    }
}

@Component
@Platform(Platform.OperatingSystems.ANDROID)
class GoogleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;android&quot;;
    }
}

</code></pre><p>要编译并运行此示例，请确保您具有<code>org.springframework.boot:spring-boot-starter:1.1.8.RELEASE</code>在CLASSPATH上。</p><p>这个例子显示了两个的定义<code>MarketPlace</code>实现，一个用于<code>GoogleMarketPlace</code>还有一个<code>AppleMarketPlace</code> 。我们定义一个注释<code>@Platform</code>需要一个类型的参数<code>Platform.OperatingSystems</code> 。该注释本身带有注释<code>@Qualifier</code>告诉Spring将其视为预选赛。bean的定义有相应的注释： <code>GoogleMarketPlace</code>带有注释<code>@Platform(Platform.OperatingSystems.ANDROID)</code>和<code>AppleMarketPlace</code>带有注释<code>@Platform(Platform.OperatingSystems.IOS)</code> 。注入一个（在<code>Spring</code>类），然后变得像使用<code>@Qualifier</code>注射部位的注释。我在这里使用场注入，尽管这只是用来充实事物的暂存器。显然，在任何<em>实际</em>代码中，您都应该偏爱构造函数和setter注入。</p><p>Spring本身也支持JSR 330。毕竟，我们确实帮助领导了这一倡议。这是使用JSR 330替代方案的等效示例。 <code>@Component</code>变成<code>@Named</code> ， <code>@Autowired</code>变成<code>@Inject</code>和<code>@Qualifier</code>变成<code>@javax.inject.Qualifier</code> ，但否则应该看起来很熟悉。</p>
<pre><code class="prettyprint java"><br />package jsr330;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import javax.annotation.PostConstruct;
import javax.inject.Inject;
import javax.inject.Named;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import static jsr330.Jsr330.Platform;

@Configuration
@ComponentScan
public class Jsr330 {

    public static void main(String[] args) {
        new AnnotationConfigApplicationContext(Jsr330.class);
    }

    @Inject
    @Platform(Platform.OperatingSystems.ANDROID)
    private MarketPlace android;

    @Inject
    @Platform(Platform.OperatingSystems.IOS)
    private MarketPlace ios;

    @PostConstruct
    public void qualifyTheTweets() {
        System.out.println(&quot;ios:&quot; + this.ios);
        System.out.println(&quot;android:&quot; + this.android);
    }

    // the type has to be public!
    @Target({ElementType.FIELD,
            ElementType.METHOD,
            ElementType.TYPE,
            ElementType.PARAMETER})
    @Retention(RetentionPolicy.RUNTIME)
    @javax.inject.Qualifier
    public static @interface Platform {

        OperatingSystems value();

        public static enum OperatingSystems {
            IOS,
            ANDROID
        }
    }
}

interface MarketPlace {
}

@Named
@Platform(Platform.OperatingSystems.IOS)
class AppleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;apple&quot;;
    }
}

@Named
@Platform(Platform.OperatingSystems.ANDROID)
class GoogleMarketPlace implements MarketPlace {

    @Override
    public String toString() {
        return &quot;android&quot;;
    }
}

</code></pre><p>要编译并运行此示例，请确保您具有<code>org.springframework.boot:spring-boot-starter:1.1.8.RELEASE</code> <em>和</em> <code>javax.inject:javax.inject:1</code>在CLASSPATH上。</p><p>有什么新的吗？不，这就是重点。自Spring 2.5（我们于2007年发布）以来，这已经成为可能。令人惊讶的是，人们仍然对此功能一无所知，但希望此博客使人们更容易入门。下一步， <a href="https://docs.spring.io/spring/docs/2.5.x/reference/beans.html#beans-autowired-annotation-qualifiers">请查阅文档（从2.5开始！）</a> 深入介绍了每个细节，包括XML替代品！</p><p>我应该提到-在实践中-我的代码中不需要做很多事情。在过去的7年中可能打了12次。不过，它可能很方便！</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 1808;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>