<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>提供了用于Spring Integration 1.2 M1和1.1.3的Java DSL</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Java DSL for Spring Integration 1.2 M1 and 1.1.3 are available">
<meta name="twitter:description" content="<div class=" paragrap="="> 
 </head><body dir="ltr"><p>I’m pleased to announce that the Java DSL for Spring Integration <code>1.2 M1</code> is available now!</p> 

<div class="paragraph"> 
 <p>First of I’d like to thank everyone who created issues, raised Pull Requests, provided feedback or just asked questions on StackOverflow. Without the community we couldn’t be the successful project we are today!</p> 
</div>
<div class="paragraph"> 
 <p>The artifact <code>org.springframework.integration:spring-integration-java-dsl:1.2.0.M1</code> is available in the <a href="http://repo.spring.io/milestone">Milestone repo</a>. So, give it a shot and don’t hesitate to raise a <a href="https://github.com/spring-projects/spring-integration-java-dsl/issues">GH issue</a> for any feedback!</p> 
</div>
<div class="paragraph"> 
 <p>Some highlights of the current iteration:</p> 
</div>
">
<meta name="twitter:creator" content="@artem_bilan">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=200">

<meta property="og:title" content="Java DSL for Spring Integration 1.2 M1 and 1.1.3 are available">
<meta property="og:image" content="https://gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=200">
<meta property="og:description" content="<div class=" paragrap="="> 
 <p>I’m pleased to announce that the Java DSL for Spring Integration <code>1.2 M1</code> is available now!</p> 

<div class="paragraph"> 
 <p>First of I’d like to thank everyone who created issues, raised Pull Requests, provided feedback or just asked questions on StackOverflow. Without the community we couldn’t be the successful project we are today!</p> 
</div>
<div class="paragraph"> 
 <p>The artifact <code>org.springframework.integration:spring-integration-java-dsl:1.2.0.M1</code> is available in the <a href="http://repo.spring.io/milestone">Milestone repo</a>. So, give it a shot and don’t hesitate to raise a <a href="https://github.com/spring-projects/spring-integration-java-dsl/issues">GH issue</a> for any feedback!</p> 
</div>
<div class="paragraph"> 
 <p>Some highlights of the current iteration:</p> 
</div>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2016-07-08 22:14:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category content--title">
<div>工程</div>
</div>
<div class="blog-category active content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">提供了用于Spring Integration 1.2 M1和1.1.3的Java DSL</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon releases"></div>
<a class="category">发布</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=20&d=mm"> <a class="author" rel="author" href="/team/artembilan">阿尔特姆·比兰（Artem Bilan）</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2016-07-08 22:14:00.0">2016年7月8日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2016/07/08/java-dsl-for-spring-integration-1-2-m1-and-1-1-3-are-available#disqus_thread" data-disqus-identifier="2550">
</a></div>
</div>
</header>
<div class="blog--post"><div class="paragraph">
<p>我很高兴地宣布，用于Spring Integration <code>1.2 M1</code>的Java DSL现在可用！</p>
</div>
<div class="paragraph">
<p>首先，我要感谢所有在StackOverflow上创建问题，提出拉取请求，提供反馈或只是问问题的人。没有社区，我们就不可能成为今天的成功项目！</p>
</div>
<div class="paragraph">
<p>神器<code>org.springframework.integration:spring-integration-java-dsl:1.2.0.M1</code>在<a href="https://repo.spring.io/milestone">Milestone仓库中</a>可用。因此，请尝试一下，不要犹豫，提出<a href="https://github.com/spring-projects/spring-integration-java-dsl/issues">GH问题</a>以获取任何反馈！</p>
</div>
<div class="paragraph">
<p>当前迭代的一些亮点：</p>
</div>
<h1 id="apache-kafka-0-9-support" class="sect0"><a class="anchor" href="#apache-kafka-0-9-support"></a> Apache Kafka 0.9支持</h1>
<div class="paragraph">
<p>基于最近发布的<a href="https://spring.io/blog/2016/07/04/spring-for-apache-kafka-1-0-and-spring-integration-kafka-2-0-go-ga">Spring for Apache Kafka</a>项目，引入了一个新的<code>Kafka09</code>工厂。这是直接的Java DSL工厂，用于基于Spring for Apache Kafka基础为适配器生产<code>IntegrationComponentSpec</code>流畅的API构建器。为了向后兼容，仍存在一个现有的支持Apache Kafka <code>0.8</code> <code>Kafka</code>工厂。</p>
</div>
<h1 id="runtime-flow-registration" class="sect0"><a class="anchor" href="#runtime-flow-registration"></a>运行时流注册</h1>
<div class="paragraph">
<p>在许多情况下，最好根据系统状态甚至在某些业务功能调用期间指定集成流程。甚至在执行后使其变得不稳定。为此，已经引入了<code>IntegrationFlowContext</code>组件以进行手动<code>IntegrationFlow</code>控制。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Autowired
private IntegrationFlowContext context;
...

IntegrationFlow myFlow = f -> f
  			.<String, String>transform(String::toUpperCase)
   			.transform("Hello, "::concat);

String flowId = this.context.register(myFlow);
MessagingTemplate messagingTemplate = this.context.messagingTemplateFor(flowId);

assertEquals("Hello, SPRING",
            messagingTemplate.convertSendAndReceive("spring", String.class));

this.context.remove(flowId);</code></pre>
</div>
</div>
<div class="paragraph">
<p>有关更多信息，请参见<code>IntegrationFlowContext</code> JavaDocs。</p>
</div>
<h1 id="operator-log" class="sect0"><a class="anchor" href="#operator-log"></a>操作员日志（）</h1>
<div class="paragraph">
<p>为了方便记录消息旅程的Spring Integration方式（a-la <code><logging-channel-adapter></code> ），引入了新的<code>log()</code>运算符。在其下面仅由<code>WireTap</code> <code>ChannelInterceptor</code>和<code>LoggingHandler</code>为订户。它负责记录进入下一个端点的消息：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">.filter(...)
.log(LoggingHandler.Level.ERROR, "test.category", m -> m.getHeaders().getId())
.route(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>在此示例中，仅对于通过过滤器且在路由之前的消息，将以<code>ERROR</code>级别将<code>id</code>标头记录到“ test.category”上。</p>
</div>
<h1 id="messagechannelspec-wiretap" class="sect0"><a class="anchor" href="#messagechannelspec-wiretap"></a> MessageChannelSpec.wireTap（）</h1>
<div class="paragraph">
<p>为<code>MessageChannelSpec</code>构建器引入了<code>.wireTap()</code>流利API。现在，目标配置将从Java DSL使用中获得更多收益：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Bean
public QueueChannelSpec myChannel() {
    return MessageChannels
            .queue()
            .wireTap("loggingFlow.input");
}

@Bean
public IntegrationFlow loggingFlow() {
    return f -> f.log();
}</code></pre>
</div>
</div>
<h1 id="typed-routers" class="sect0"><a class="anchor" href="#typed-routers"></a>键入路由器</h1>
<div class="paragraph">
<p>有了纯Java实例化的Bean，它看起来真的很有机，可以将路由键设置为任何所需的类型，并避免将所有内容都转换为<code>String</code> 。加上轻松的类型，我们可以将其配置为可识别通用的：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Bean
public IntegrationFlow payloadTypeRouteFlow() {
    return f -> f
          .<Object, Class>route(Object::getClass, m -> m
                         .channelMapping(String.class, "stringsChannel")
                         .channelMapping(Integer.class, "integersChannel"));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>请参阅<code>1.2.0.M1</code></p><code>1.2.0.M1</code></div><code>1.2.0.M1</code></div><code>1.2.0.M1</code></div><code>1.2.0.M1</code></article><code>1.2.0.M1</code></div><code>1.2.0.M1</code></div><code>1.2.0.M1</code></div><code>1.2.0.M1</code></div><code>1.2.0.M1</code></body></html>