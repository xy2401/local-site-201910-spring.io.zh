<html  data-code-prettify="" data-mobile-support="" data-search=""><head></head><body >﻿
<title>Spring Cloud Contract 1.0.0。M1发布</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Spring Cloud Contract 1.0.0.M1 Released">
<meta name="twitter:description" >
<meta name="twitter:creator" content="@mgrzejszczak">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/d4b43000c99fccc46455f42a841fa62e?s=200">

<meta property="og:title" content="Spring Cloud Contract 1.0.0.M1 Released">
<meta property="og:image" content="https://gravatar.com/avatar/d4b43000c99fccc46455f42a841fa62e?s=200">
<meta property="og:description" >
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2016-07-25 15:03:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Cloud Contract 1.0.0。M1发布</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/d4b43000c99fccc46455f42a841fa62e?s=20&d=mm"> <a class="author" rel="author" href="/team/marcingrzejszczak">马尔辛·格热兹扎克（Marcin Grzejszczak）</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2016-07-25 15:03:00.0">2016年7月25日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2016/07/25/spring-cloud-contract-1-0-0-m1-released#disqus_thread" data-disqus-identifier="2565">
</a></div>
</div>
</header>
<div class="blog--post"><div class="paragraph">
<p>我很荣幸代表Spring Cloud团队宣布1.0.0。新的Spring Cloud项目的M1版本称为Spring Cloud Contract。您可以从<a href="https://repo.spring.io/milestone/">Spring的里程碑存储库中</a>获取它，甚至更好-转到<a href="https://start.spring.io">start.spring.io</a>并从那里选择它。</p>
</div>
<div class="sect1">
<h2 id="spring-cloud-contract"><a class="anchor" href="#spring-cloud-contract"></a>Spring Cloud Contract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>微服务方法有很多好处，但也带来了复杂性。这是使用分布式系统的必然结果：随着复杂性的增加，不可避免地提出了更多的问题。在本文中，我们展示了如何使用消费者驱动的合同方法来测试微服务并创建更好的API。为了使测试微服务更容易，我们很高兴在Spring Cloud项目系列中引入一个新项目-Spring Cloud Contract。该项目为Spring应用程序中的消费者驱动的合同和服务模式提供支持，涵盖编写测试，将其作为资产发布，断言生产者和消费者为HTTP和基于消息的交互保留合同的一系列选项。</p>
</div>
<div class="paragraph">
<p>本文是另一篇有关<a href="https://spring.io/blog/2016/05/31/zero-downtime-deployment-with-a-database">如何使用数据库进行零停机时间部署的</a>最新文章。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-providers-and-consumers"><a class="anchor" href="#service-providers-and-consumers"></a>服务提供商和消费者</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在进入细节之前，让我们先看一些理论。与分布式系统相关的最大挑战之一是就在节点之间传递的消息的结构达成共识（“消息”是指任何格式正确的非流数据，因此适用于传统HTTP API以及事件-基于微服务）。当我们考虑消息结构时，会出现以下几个问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>消费者如何知道生产者已更改其API？</p>
</li>
<li>
<p>生产者方如何知道它是否会打断消费者？</p>
</li>
<li>
<p>如果消费者使用存根进行测试，那么谁应该创建这些存根？</p>
</li>
<li>
<p>您如何确保存根的质量？</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>解决这些问题的方法之一就是引入“概念”这一概念。 <code>contract</code> 。合同是提供者和消费者之间就其通信方式应达成的协议。问题仍然是谁来驱动API的更改，合同应存储在何处以及合同应包含哪些内容。</p>
</div>
<div class="paragraph">
<p>在此博客文章中，我们将介绍称为“消费者驱动合同”的方法，以及由<a href="http://codearte.io">Codearte公司</a>托管的，名为<a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract.html#_spring_cloud_contract_verifier">Spring Cloud Contract Verifier</a>的新Spring Cloud项目，该项目以前称为<a href="http://codearte.io">Accurest</a> 。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="meanwhile-in-a-company"><a class="anchor" href="#meanwhile-in-a-company"></a>同时在一家公司...</h2>
<div class="sectionbody">
<div class="paragraph">
<p>让我们想象一下以下情形：</p>
</div>
<div class="paragraph">
<p>生产者方团队通过引入新版本的API来完成其冲刺并更改其应用程序。由于时间紧，由于没有太多时间，因此没有与该API的使用者进行协商。消费者在测试中对所有生产者端集成进行了模拟，并且由于没有人通知他们任何更改，因此他们没有更新这些模拟。这就是为什么所有单元测试和集成测试仍然是绿色的，但是端到端测试却失败了。当消费者注意到生产者方API已更改时，他们必须投入大量时间来调整其生产和测试代码，以便发送和接收所需的新数据。消费者团队认为这几乎是不可能的（由于时间紧迫且变更复杂），因此他们开始向生产方团队提出问题以调整其API。生产者方团队答复说，“没有时间”，他们可以“与产品所有者交谈，以便他将这一要求写入积压中”。</p>
</div>
<div class="paragraph">
<p>如果您查看了两个团队的回顾，您将看到以下内容。</p>
</div>
<div class="paragraph">
<p>对于消费方：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>引入了重大变化，没有人通知我们</p>
</li>
<li>
<p>生产方团队尚未就其API更改进行咨询-新的API无法使用</p>
</li>
<li>
<p>我们的集成测试未发现生产者端API的变化</p>
</li>
<li>
<p>生产者方团队在调整API方面完全被忽略了</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>对于生产者方面：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>每个人都对我们生气，但我们必须交付业务价值</p>
</li>
<li>
<p>更改API时，我们无法更新每个消费者小组的测试</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>摇铃？不用担心，有一些方法可以更改此方法，以减少所有人的烦恼。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-consumer-driven-contracts"><a class="anchor" href="#what-is-consumer-driven-contracts"></a>什么是消费者驱动的合同？</h2>
<div class="sectionbody">
<div class="paragraph">
<p>上述场景中存在一些问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API更改未与消费者协商</p>
</li>
<li>
<p>存根过程归消费者所有，因此生产者方的任何变化都不会反映出来</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>让我们关注第一个问题。您还记得测试驱动开发（TDD）方法吗？您从测试形式的期望开始，然后编写实现通过测试的实现，最后重构以使代码看起来更好。 “红色，绿色，重构”-测试失败，通过测试，重构代码。TDD就是要犯错误。错误的假设与您的代码API的外观有关。这是一个迭代过程，可让您提高代码质量。开发人员是代码API更改的驱动程序。他是它的用户，他知道自己想要实现什么，因此他更改了API，直到对结果满意为止。现在，让我们想象一下如何将这种方法提升到API设计级别...</p>
</div>
<div class="paragraph">
<p>由于使用者是使用API的人，因此他们应该是API更改的驱动程序。它与TDD之间的主要区别在于，这里有2个团队参与该过程-消费者和生产者。在这里，您可以从“消费者驱动合同（CDC）”方法中受益。它的几个特点是：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>生产者API是由消费者和生产者团队共同设计的（沟通至关重要！）</p>
</li>
<li>
<p>合同被写下，并且必须适合双方</p>
</li>
<li>
<p>可以将工作分离-一旦签订了合同，两个团队就可以独立工作</p>
</li>
<li>
<p>生产者方拥有合同（这是具体人员的严格责任）</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Spring Cloud团队希望拥有一个工具，使我们能够：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>以可读但灵活的方式定义合同</p>
</li>
<li>
<p>使合同显示一些用例，而不仅显示消息的结构</p>
</li>
<li>
<p>生成测试以根据生产者端自动验证合同</p>
</li>
<li>
<p>自动从合同中产生存根，以便消费者可以重复使用它</p>
</li>
<li>
<p>使此方法可用于基于HTTP和消息传递的通信</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract.html#_spring_cloud_contract_verifier">Spring Cloud Contract Verifier</a>通过提供自动化解决方案来解决此问题，以确保创建的合同及其存根的质量和可靠性。它包含以下主要功能：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>库的核心部分为您提供了合同的概念</p>
</li>
<li>
<p>验证程序由生产者使用（通常通过build插件使用）</p>
</li>
<li>
<p>Spring Cloud Contract Verifier Maven / Gradle插件为您提供了将Contract转换为测试和WireMock存根的功能（ <a href="http://wiremock.org">WireMock是HTTP服务器存根</a> ）</p>
</li>
<li>
<p>Spring Cloud Contract Stub Runner允许消费者在集成测试中自动下载上游生产者的存根并在内存中的HTTP存根服务器中启动</p>
</li>
<li>
<p>Spring Cloud Contract Stub Runner还允许消费者发送和接收合同中所述的消息（通过Spring Integration，Spring Cloud Stream或Apache Camel）</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>让我们看下面的分步示例，在HTTP通讯的情况下如何使用该工具。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cdc-with-spring-cloud-contract-verifier"><a class="anchor" href="#cdc-with-spring-cloud-contract-verifier"></a>具有Spring Cloud Contract Verifier的CDC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>让我们以欺诈检测和贷款发放过程为例。业务场景是这样的，我们希望向人们发放贷款，但又不想他们从我们那里窃取资金。我们系统当前的实施情况是向所有人提供贷款。</p>
</div>
<div class="paragraph">
<p>假设<code>Loan Issuance</code>是该客户<code>Fraud Detection</code>服务器。在当前的sprint中，我们需要开发一项新功能-如果客户想借太多钱，那么我们会将其标记为欺诈。</p>
</div>
<div class="paragraph">
<p>技术说明-欺诈检测将具有工件ID <code>http-server</code> ，贷款发行<code>http-client</code>并且都有组ID <code>com.example</code> 。</p>
</div>
<div class="paragraph">
<p>社交评论-消费者和生产者开发团队都需要在整个过程中直接沟通并讨论更改。CDC完全是关于沟通的。</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/spring-cloud/spring-cloud-contract/tree/master/samples/standalone/dsl/http-server">生产者代码在这里</a> ， <a href="https://github.com/spring-cloud/spring-cloud-contract/tree/master/samples/standalone/dsl/http-client">消费者代码在这里</a> 。</p>
</div>
<div class="sect2">
<h3 id="consumer-side-loan-issuance"><a class="anchor" href="#consumer-side-loan-issuance"></a>消费者方（贷款发行）</h3>
<div class="paragraph">
<p>作为贷款发行服务的开发人员（欺诈检测服务器的使用者）：</p>
</div>
<div class="paragraph">
<p><strong>通过对功能进行测试来开始进行TDD</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Test
public void shouldBeRejectedDueToAbnormalLoanAmount() {
	// given:
	LoanApplication application = new LoanApplication(new Client("1234567890"),
			99999);
	// when:
	LoanApplicationResult loanApplication = sut.loanApplication(application);
	// then:
	assertThat(loanApplication.getLoanApplicationStatus())
			.isEqualTo(LoanApplicationStatus.LOAN_APPLICATION_REJECTED);
	assertThat(loanApplication.getRejectionReason()).isEqualTo("Amount too high");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>我们刚刚编写了一项对新功能的测试。如果收到大量贷款申请，我们应该拒绝该贷款申请并提供一些说明。</p>
</div>
<div class="paragraph">
<p><strong>写缺少的实现</strong></p>
</div>
<div class="paragraph">
<p>在某个时间点，您需要向欺诈检测服务发送请求。假设我们要发送包含客户ID和客户想要从我们那里借入的金额的请求。我们想将其发送到<code>/fraudcheck</code>通过网址<code>PUT</code>方法。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">ResponseEntity&lt;FraudServiceResponse&gt; response =
		restTemplate.exchange("http://localhost:" + port + "/fraudcheck", HttpMethod.PUT,
				new HttpEntity&lt;&gt;(request, httpHeaders),
				FraudServiceResponse.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>为简单起见，我们将欺诈检测服务的端口硬编码为<code>8080</code>并且我们的应用程序正在运行<code>8090</code> 。</p>
</div>
<div class="paragraph">
<p>如果我们开始笔试，则显然会中断，因为我们没有端口上运行的服务<code>8080</code> 。</p>
</div>
<div class="paragraph">
<p><strong>在本地克隆欺诈检测服务存储库</strong></p>
</div>
<div class="paragraph">
<p>我们将开始与制作人一起玩。这就是为什么我们需要首先克隆它。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">git clone https://your-git-server.com/server.git local-http-server-repo</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>在欺诈检测服务的回购中本地定义合同</strong></p>
</div>
<div class="paragraph">
<p>作为消费者，我们需要定义我们想要实现的目标。我们需要制定我们的期望。这就是为什么我们签订以下合同的原因。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">package contracts

org.springframework.cloud.contract.spec.Contract.make {
			request { // (1)
				method 'PUT' // (2)
				url '/fraudcheck' // (3)
				body([ // (4)
					clientId: value(consumer(regex('[0-9]{10}'))),
					loanAmount: 99999
					])
				headers { // (5)
					header('Content-Type', 'application/vnd.fraud.v1+json')
				}
			}
			response { // (6)
				status 200 // (7)
				body([ // (8)
					fraudCheckStatus: "FRAUD",
					rejectionReason: "Amount too high"
				])
				headers { // (9)
					 header('Content-Type': value(
							 producer(regex('application/vnd.fraud.v1.json.*')),
							 consumer('application/vnd.fraud.v1+json'))
					 )
				}
			}
}

/*
Since we don't want to force on the user to hardcode values of fields that are dynamic
(timestamps, database ids etc.), one can provide parametrize those entries by using the
`value(consumer(...), producer(...))` method. That way what's present in the `consumer`
section will end up in the produced stub. What's there in the `producer` will end up in the
autogenerated test. If you provide only the regular expression side without the concrete
value then Spring Cloud Contract will generate one for you.

From the Consumer perspective, when shooting a request in the integration test:

(1) - If the consumer sends a request
(2) - With the "PUT" method
(3) - to the URL "/fraudcheck"
(4) - with the JSON body that
 * has a field `clientId` that matches a regular expression `[0-9]{10}`
 * has a field `loanAmount` that is equal to `99999`
(5) - with header `Content-Type` equal to `application/vnd.fraud.v1+json`
(6) - then the response will be sent with
(7) - status equal `200`
(8) - and JSON body equal to
 { "fraudCheckStatus": "FRAUD", "rejectionReason": "Amount too high" }
(9) - with header `Content-Type` equal to `application/vnd.fraud.v1+json`

From the Producer perspective, in the autogenerated producer-side test:

(1) - A request will be sent to the producer
(2) - With the "PUT" method
(3) - to the URL "/fraudcheck"
(4) - with the JSON body that
 * has a field `clientId` that will have a generated value that matches a regular expression `[0-9]{10}`
 * has a field `loanAmount` that is equal to `99999`
(5) - with header `Content-Type` equal to `application/vnd.fraud.v1+json`
(6) - then the test will assert if the response has been sent with
(7) - status equal `200`
(8) - and JSON body equal to
 { "fraudCheckStatus": "FRAUD", "rejectionReason": "Amount too high" }
(9) - with header `Content-Type` matching `application/vnd.fraud.v1+json.*`
 */</code></pre>
</div>
</div>
<div class="paragraph">
<p>合同是使用静态类型的Groovy DSL编写的。您可能想知道那些是什么<code>value(consumer(…​), producer(…​))</code>部分。通过使用这种表示法，Spring Cloud Contract允许您定义JSON / URL / etc等动态的部分。如果是标识符或时间戳，则您不想对值进行硬编码。您要允许一些不同的值范围。因此，对于消费者而言，您可以设置与这些值匹配的正则表达式。您可以通过地图符号或带插值的字符串来提供主体。<a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract.html#_contract_dsl">有关更多信息，请查阅文档。</a> 我们强烈建议您使用地图符号！</p>
</div>
<div class="paragraph">
<p>上述合同是双方之间的协议，其中：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如果HTTP请求与</p>
<div class="ulist">
<ul>
<li>
<p>一个方法<code>PUT</code>在端点上<code>/fraudcheck</code></p>
</li>
<li>
<p>JSON正文与<code>clientId</code>匹配正则表达式<code>[0-9]{10}</code>和<code>loanAmount</code>等于<code>99999</code></p>
</li>
<li>
<p>并带有标题<code>Content-Type</code>等于<code>application/vnd.fraud.v1+json</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>然后将HTTP响应发送给使用者</p>
<div class="ulist">
<ul>
<li>
<p>有状态<code>200</code></p>
</li>
<li>
<p>包含JSON正文， <code>fraudCheckStatus</code>包含值的字段<code>FRAUD</code>和<code>rejectionReason</code>有价值的领域<code>Amount too high</code></p>
</li>
<li>
<p>和一个<code>Content-Type</code>标头值为<code>application/vnd.fraud.v1+json</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>一旦我们准备好在集成测试中实际检查API，我们只需要在本地安装存根即可</p>
</div>
<div class="paragraph">
<p><strong>将Spring Cloud Contract Verifier插件添加到服务器端</strong></p>
</div>
<div class="paragraph">
<p>我们可以添加Maven或Gradle插件-在本示例中，我们将展示如何添加Maven。首先，我们需要添加<code>Spring Cloud Contract</code> BOM。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;dependencyManagement&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
			&lt;artifactId&gt;spring-cloud-contract-dependencies&lt;/artifactId&gt;
			&lt;version&gt;${spring-cloud-contract.version}&lt;/version&gt;
			&lt;type&gt;pom&lt;/type&gt;
			&lt;scope&gt;import&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>接下来， <code>Spring Cloud Contract Verifier</code> Maven插件</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
	&lt;artifactId&gt;spring-cloud-contract-maven-plugin&lt;/artifactId&gt;
	&lt;version&gt;${spring-cloud-contract.version}&lt;/version&gt;
	&lt;extensions&gt;true&lt;/extensions&gt;
	&lt;configuration&gt;
		&lt;baseClassForTests&gt;com.example.fraud.MvcTest&lt;/baseClassForTests&gt;
	&lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>由于添加了插件，我们得到了<code>Spring Cloud Contract Verifier</code>提供的合同中的功能：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>生成并运行测试</p>
</li>
<li>
<p>制作并安装存根</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>我们不想生成测试，因为作为消费者，我们只想玩存根。这就是为什么我们需要跳过测试的生成和执行。当我们执行时：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">cd local-http-server-repo
./mvnw clean install -DskipTests</code></pre>
</div>
</div>
<div class="paragraph">
<p>在日志中，我们将看到以下内容：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[INFO] --- spring-cloud-contract-maven-plugin:1.0.0.BUILD-SNAPSHOT:generateStubs (default-generateStubs) @ http-server ---
[INFO] Building jar: /some/path/http-server/target/http-server-0.0.1-SNAPSHOT-stubs.jar
[INFO]
[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ http-server ---
[INFO] Building jar: /some/path/http-server/target/http-server-0.0.1-SNAPSHOT.jar
[INFO]
[INFO] --- spring-boot-maven-plugin:1.4.0.BUILD-SNAPSHOT:repackage (default) @ http-server ---
[INFO]
[INFO] --- maven-install-plugin:2.5.2:install (default-install) @ http-server ---
[INFO] Installing /some/path/http-server/target/http-server-0.0.1-SNAPSHOT.jar to /path/to/your/.m2/repository/com/example/http-server/0.0.1-SNAPSHOT/http-server-0.0.1-SNAPSHOT.jar
[INFO] Installing /some/path/http-server/pom.xml to /path/to/your/.m2/repository/com/example/http-server/0.0.1-SNAPSHOT/http-server-0.0.1-SNAPSHOT.pom
[INFO] Installing /some/path/http-server/target/http-server-0.0.1-SNAPSHOT-stubs.jar to /path/to/your/.m2/repository/com/example/http-server/0.0.1-SNAPSHOT/http-server-0.0.1-SNAPSHOT-stubs.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>这条线非常重要</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[INFO] Installing /some/path/http-server/target/http-server-0.0.1-SNAPSHOT-stubs.jar to /path/to/your/.m2/repository/com/example/http-server/0.0.1-SNAPSHOT/http-server-0.0.1-SNAPSHOT-stubs.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>这是在确认<code>http-server</code>已安装在本地存储库中。</p>
</div>
<div class="paragraph">
<p><strong>运行集成测试</strong></p>
</div>
<div class="paragraph">
<p>为了从自动存根下载的Spring Cloud Contract Stub Runner功能中获利，您必须在我们的用户端项目中执行以下操作（ <code>Loan Application service</code> ）。</p>
</div>
<div class="paragraph">
<p>添加<code>Spring Cloud Contract</code>物料清单</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;dependencyManagement&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
			&lt;artifactId&gt;spring-cloud-contract-dependencies&lt;/artifactId&gt;
			&lt;version&gt;${spring-cloud-contract.version}&lt;/version&gt;
			&lt;type&gt;pom&lt;/type&gt;
			&lt;scope&gt;import&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>将依赖项添加到<code>Spring Cloud Contract Stub Runner</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
	&lt;artifactId&gt;spring-cloud-contract-wiremock&lt;/artifactId&gt;
	&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
	&lt;artifactId&gt;spring-cloud-starter-contract-stub-runner&lt;/artifactId&gt;
	&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>提供Stub Runner的组ID和工件ID，以下载协作者的Stub。由于您正在与协作者离线玩耍，因此还请提供离线工作切换（可选步骤）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-yaml" data-lang="yaml">stubrunner:
  work-offline: true
  stubs.ids: 'com.example:http-server:+:stubs:8080'</code></pre>
</div>
</div>
<div class="paragraph">
<p>使用以下注释您的测试课<code>@AutoConfigureStubRunner</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureStubRunner
public class LoanApplicationServiceTests {</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，如果您运行测试，您将看到以下内容：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">2016-07-19 14:22:25.403  INFO 41050 --- [           main] o.s.c.c.stubrunner.AetherStubDownloader  : Desired version is + - will try to resolve the latest version
2016-07-19 14:22:25.438  INFO 41050 --- [           main] o.s.c.c.stubrunner.AetherStubDownloader  : Resolved version is 0.0.1-SNAPSHOT
2016-07-19 14:22:25.439  INFO 41050 --- [           main] o.s.c.c.stubrunner.AetherStubDownloader  : Resolving artifact com.example:http-server:jar:stubs:0.0.1-SNAPSHOT using remote repositories []
2016-07-19 14:22:25.451  INFO 41050 --- [           main] o.s.c.c.stubrunner.AetherStubDownloader  : Resolved artifact com.example:http-server:jar:stubs:0.0.1-SNAPSHOT to /path/to/your/.m2/repository/com/example/http-server/0.0.1-SNAPSHOT/http-server-0.0.1-SNAPSHOT-stubs.jar
2016-07-19 14:22:25.465  INFO 41050 --- [           main] o.s.c.c.stubrunner.AetherStubDownloader  : Unpacking stub from JAR [URI: file:/path/to/your/.m2/repository/com/example/http-server/0.0.1-SNAPSHOT/http-server-0.0.1-SNAPSHOT-stubs.jar]
2016-07-19 14:22:25.475  INFO 41050 --- [           main] o.s.c.c.stubrunner.AetherStubDownloader  : Unpacked file to [/var/folders/0p/xwq47sq106x1_g3dtv6qfm940000gq/T/contracts100276532569594265]
2016-07-19 14:22:27.737  INFO 41050 --- [           main] o.s.c.c.stubrunner.StubRunnerExecutor    : All stubs are now running RunningStubs [namesAndPorts={com.example:http-server:0.0.1-SNAPSHOT:stubs=8080}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>这意味着Stub Runner已找到您的存根，并为具有组ID的应用启动了服务器<code>com.example</code> ，工件ID <code>http-server</code>带版本<code>0.0.1-SNAPSHOT</code>存根和<code>stubs</code>港口分类器<code>8080</code> 。</p>
</div>
<div class="paragraph">
<p><strong>提交公关</strong></p>
</div>
<div class="paragraph">
<p>到目前为止，我们所做的只是一个迭代过程。我们可以处理合同，将其安装在本地并在消费者方面工作，直到对合同满意为止。</p>
</div>
<div class="paragraph">
<p>一旦我们对结果感到满意，并且测试通过，就会向生产方发布PR。至此，消费者方的工作已经完成。</p>
</div>
</div>
<div class="sect2">
<h3 id="producer-side-fraud-detection-server"><a class="anchor" href="#producer-side-fraud-detection-server"></a>生产者端（欺诈检测服务器）</h3>
<div class="paragraph">
<p>作为欺诈检测服务器的开发者（由贷款发行服务使用的消息的生产者）：</p>
</div>
<div class="paragraph">
<p><strong>初步实施</strong></p>
</div>
<div class="paragraph">
<p>在此提醒您，您可以看到初始实施</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@RequestMapping(
		value = "/fraudcheck",
		method = PUT,
		consumes = FRAUD_SERVICE_JSON_VERSION_1,
		produces = FRAUD_SERVICE_JSON_VERSION_1)
public FraudCheckResult fraudCheck(@RequestBody FraudCheck fraudCheck) {
return new FraudCheckResult(FraudCheckStatus.OK, NO_REASON);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>接管公关</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">git checkout -b contract-change-pr master
git pull https://your-git-server.com/server-side-fork.git contract-change-pr</code></pre>
</div>
</div>
<div class="paragraph">
<p>您必须添加自动生成的测试所需的依赖项</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
	&lt;artifactId&gt;spring-cloud-starter-contract-verifier&lt;/artifactId&gt;
	&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>在Maven插件的配置中，我们通过了<code>baseClassForTests</code>属性</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
	&lt;artifactId&gt;spring-cloud-contract-maven-plugin&lt;/artifactId&gt;
	&lt;version&gt;${spring-cloud-contract.version}&lt;/version&gt;
	&lt;extensions&gt;true&lt;/extensions&gt;
	&lt;configuration&gt;
		&lt;baseClassForTests&gt;com.example.fraud.MvcTest&lt;/baseClassForTests&gt;
	&lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>那是因为所有生成的测试都将扩展该类。在那儿，您可以设置您的Spring Context或任何必要的东西。在我们的例子中，我们使用<a href="http://rest-assured.io/">Rest Assured MVC</a>启动生产方<code>FraudDetectionController</code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package com.example.fraud;

import com.example.fraud.FraudDetectionController;
import com.jayway.restassured.module.mockmvc.RestAssuredMockMvc;

import org.junit.Before;

public class MvcTest {

	@Before
	public void setup() {
		RestAssuredMockMvc.standaloneSetup(new FraudDetectionController());
	}

	public void assertThatRejectionReasonIsNull(Object rejectionReason) {
		assert rejectionReason == null;
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，如果您运行<code>./mvnw clean install</code>你会得到这样的东西：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">Results :

Tests in error:
  ContractVerifierTest.validate_shouldMarkClientAsFraud:32 » IllegalState Parsed...</code></pre>
</div>
</div>
<div class="paragraph">
<p>那是因为您有一个新合同，从中生成了一个测试，并且由于您尚未实现该功能而失败了。自动生成的测试如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Test
public void validate_shouldMarkClientAsFraud() throws Exception {
    // given:
        MockMvcRequestSpecification request = given()
                .header("Content-Type", "application/vnd.fraud.v1+json")
                .body("{\"clientId\":\"1234567890\",\"loanAmount\":99999}");

    // when:
        ResponseOptions response = given().spec(request)
                .put("/fraudcheck");

    // then:
        assertThat(response.statusCode()).isEqualTo(200);
        assertThat(response.header("Content-Type")).matches("application/vnd.fraud.v1.json.*");
    // and:
        DocumentContext parsedJson = JsonPath.parse(response.getBody().asString());
        assertThatJson(parsedJson).field("fraudCheckStatus").matches("[A-Z]{5}");
        assertThatJson(parsedJson).field("rejectionReason").isEqualTo("Amount too high");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>如您所见<code>producer()</code>合同中存在于<code>value(consumer(…​), producer(…​))</code>块被注入到测试中。</p>
</div>
<div class="paragraph">
<p>这里要注意的重要一点是，在生产者方面，我们也在进行TDD。我们对测试有期望。该测试将对我们自己的应用程序的请求发送到合同中定义的URL，标头和正文。它还期望响应中具有非常精确定义的值。换句话说，你有你的<code>red</code>部分<code>red</code> ， <code>green</code>和<code>refactor</code> 。是时候转换了<code>red</code>进入<code>green</code> 。</p>
</div>
<div class="paragraph">
<p><strong>写缺少的实现</strong></p>
</div>
<div class="paragraph">
<p>现在，既然我们现在是预期的输入和预期的输出，那么让我们编写缺少的实现。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@RequestMapping(
		value = "/fraudcheck",
		method = PUT,
		consumes = FRAUD_SERVICE_JSON_VERSION_1,
		produces = FRAUD_SERVICE_JSON_VERSION_1)
public FraudCheckResult fraudCheck(@RequestBody FraudCheck fraudCheck) {
if (amountGreaterThanThreshold(fraudCheck)) {
	return new FraudCheckResult(FraudCheckStatus.FRAUD, AMOUNT_TOO_HIGH);
}
return new FraudCheckResult(FraudCheckStatus.OK, NO_REASON);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果我们执行<code>./mvnw clean install</code>再次测试将通过。自从<code>Spring Cloud Contract Verifier</code>插件将测试添加到<code>generated-test-sources</code>您实际上可以从IDE运行这些测试。</p>
</div>
<div class="paragraph">
<p><strong>部署您的应用</strong></p>
</div>
<div class="paragraph">
<p>完成工作后，就可以部署更改了。首先合并分支</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">git checkout master
git merge --no-ff contract-change-pr
git push origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后我们假设您的CI会像<code>./mvnw clean deploy</code>它将同时发布应用程序和存根artifcat。</p>
</div>
</div>
<div class="sect2">
<h3 id="consumer-side-loan-issuance-final-step"><a class="anchor" href="#consumer-side-loan-issuance-final-step"></a>消费者方（贷款发行）最后一步</h3>
<div class="paragraph">
<p>作为贷款发行服务的开发者（欺诈检测服务的使用者）：</p>
</div>
<div class="paragraph">
<p><strong>合并分支到母版</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">git checkout master
git merge --no-ff contract-change-pr</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>在线工作</strong></p>
</div>
<div class="paragraph">
<p>现在，您可以禁用Spring Cloud Contract Stub Runner广告的脱机工作，以提供包含存根的存储库所在的位置。此时，生产者端的存根将自动从Nexus / Artifactory下载。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-yaml" data-lang="yaml">stubrunner.stubs:
  ids: 'com.example:http-server:+:stubs:8080'
  repositoryRoot: http://repo.spring.io/libs-snapshot</code></pre>
</div>
</div>
<div class="paragraph">
<p>就是这样！</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>摘要</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此示例中，您可以看到如何使用<code>Spring Cloud Contract Verifier</code>为了执行“消费者驱动合同”方法。通过这种方式，我们实现了：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>适合消费者和生产者的API</p>
</li>
<li>
<p>经过生产者测试的可读合同</p>
</li>
<li>
<p>经过验证的存根，可以供所有消费者在其集成测试中使用</p>
</li>
<li>
<p>消费者端工具，可自动下载最新的存根并为您设置存根</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-reading"><a class="anchor" href="#additional-reading"></a>附加阅读</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="http://martinfowler.com/articles/consumerDrivenContracts.html">消费者驱动的合同，伊恩·罗宾逊（Ian Robinson）</a></p>
</li>
<li>
<p><a href="https://github.com/spring-cloud/spring-cloud-contract/">Spring Cloud Contract存储库</a></p>
</li>
<li>
<p><a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract.html">Spring Cloud Contract文档</a></p>
</li>
<li>
<p><a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract.html#_spring_cloud_contract_verifier">Spring Cloud Contract Verifier文档</a></p>
</li>
<li>
<p><a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract-maven-plugin/">Spring Cloud Contract Verifier Maven插件文档</a></p>
</li>
<li>
<p><a href="https://cloud.spring.io/spring-cloud-contract/spring-cloud-contract.html#_spring_cloud_contract_wiremock">Spring Cloud Contract WireMock文档</a></p>
</li>
</ul>
</div>
</div>
</div></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2565;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>