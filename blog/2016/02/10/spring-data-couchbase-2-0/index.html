<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring Data Couchbase 2.0</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring Data Couchbase 2.0" />
<meta name="twitter:description" content="&lt;blockquote&gt; 
 &lt;p&gt;This is a cross-post blog from Simon BASL√â from &lt;a href=&quot;http://www.couchbase.com&quot;&gt;Couchbase&lt;/a&gt;. You can find him on twitter (&lt;a href=&quot;https://twitter.com/simonbasle&quot;&gt;&lt;code&gt;@simonbasle&lt;/code&gt;&lt;/a&gt;) or &lt;a href=&quot;&quot;&gt;github&lt;/a&gt;. Learn more about Couchbase and the Couchbase Java SDK on the &lt;a href=&quot;http://developer.couchbase.com/documentation/server/4.1/sdks/java-2.2/java-intro.html&quot;&gt;developer portal&lt;/a&gt;. Thanks again, Simon and great job to you and your team! -Josh&lt;/p&gt; 
&lt;/blockquote&gt;
&lt;p&gt;Spring Data Couchbase 2.0 is a rewrite of the original Spring Data Couchbase 1.4.x connector. It is based on the Couchbase Java 2.2 SDK and makes heavy use of the new query language N1QL (which was introduced in Couchbase Server 4.0) to offer more features for Spring Data users.&lt;/p&gt;
" />
<meta name="twitter:creator" content="@starbuxman" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />

<meta property="og:title" content="Spring Data Couchbase 2.0" />
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />
<meta property="og:description" content="&lt;blockquote&gt; 
 &lt;p&gt;This is a cross-post blog from Simon BASL√â from &lt;a href=&quot;http://www.couchbase.com&quot;&gt;Couchbase&lt;/a&gt;. You can find him on twitter (&lt;a href=&quot;https://twitter.com/simonbasle&quot;&gt;&lt;code&gt;@simonbasle&lt;/code&gt;&lt;/a&gt;) or &lt;a href=&quot;&quot;&gt;github&lt;/a&gt;. Learn more about Couchbase and the Couchbase Java SDK on the &lt;a href=&quot;http://developer.couchbase.com/documentation/server/4.1/sdks/java-2.2/java-intro.html&quot;&gt;developer portal&lt;/a&gt;. Thanks again, Simon and great job to you and your team! -Josh&lt;/p&gt; 
&lt;/blockquote&gt;
&lt;p&gt;Spring Data Couchbase 2.0 is a rewrite of the original Spring Data Couchbase 1.4.x connector. It is based on the Couchbase Java 2.2 SDK and makes heavy use of the new query language N1QL (which was introduced in Couchbase Server 4.0) to offer more features for Spring Data users.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2016-02-10 12:35:46.124" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Data Couchbase 2.0</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/jlong">Josh Long</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2016-02-10 12:35:46.124">February 10, 2016</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="2376" href="/blog/2016/02/10/spring-data-couchbase-2-0#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><blockquote>
<p>This is a cross-post blog from Simon BASL√â from <a href="http://www.couchbase.com">Couchbase</a>. You can find him on twitter (<a href="https://twitter.com/simonbasle"><code>@simonbasle</code></a>) or <a href="">github</a>. Learn more about Couchbase and the Couchbase Java SDK on the <a href="http://developer.couchbase.com/documentation/server/4.1/sdks/java-2.2/java-intro.html">developer portal</a>. Thanks again, Simon and great job to you and your team! -Josh</p>
</blockquote>
<p>Spring Data Couchbase 2.0 is a rewrite of the original Spring Data Couchbase 1.4.x connector. It is based on the Couchbase Java 2.2 SDK and makes heavy use of the new query language N1QL (which was introduced in Couchbase Server 4.0) to offer more features for Spring Data users.</p>
<p>The <a href="http://blog.couchbase.com/2015/august/spring-data-couchbase-2.0-preview">first Milestone</a> has been released last august, then a Release Candidate followed, and since then additional features (and bugfixes) were implemented a GA release can now be unleashed on the public.</p>
<p>Let&rsquo;s take a quick tour of what changed (with a ‚≠ê to ‚≠ê‚≠ê‚≠ê notation of how awesome and significant we think each feature is üòÑ):</p><h2><a href="#new-features-in-spring-data-couchbase-2-0" class="anchor" name="new-features-in-spring-data-couchbase-2-0"></a>New Features in Spring Data Couchbase 2.0</h2>
<p>The main differences between the 1.x generation of Spring Data Couchbase and its 2.x version are:</p>
<ul>
<li>Configuration elements are closer to the Couchbase reality: Environment, Cluster, Bucket (potentially allowing you to create <code>CouchbaseTemplate</code>s that each connect to a different bucket, or even to different clusters!)</li>
<li>Backing custom repository methods is not always done with views anymore, it is (by default) now done via N1QL, which is much more flexible and requires less server-side maintenance.</li>
<li>Custom methods using views have been modified a little to better stick to the Spring Data philosophy. This reduces flexibility a little bit, but the implementations are generated from the method name (through &ldquo;query derivation&rdquo;).</li>
<li>You can now do geospatial querying of your data (or multidimensional querying if you go beyond 3 dimensions) with views.</li>
</ul>
<p>Of course you can still access the lower level API by using the <code>CouchbaseTemplate</code> rather than the <code>CouchbaseRepository</code> interface, and you can even access the underlying <code>Bucket</code> from the SDK.</p><h3><a href="#repository-methods-through-n1ql" class="anchor" name="repository-methods-through-n1ql"></a>Repository methods through N1QL</h3>
<p>‚≠ê‚≠ê‚≠ê</p>
<p>The big new feature in Couchbase 4.0 is <strong>N1QL</strong>, a SQL extension that works on JSON documents (so it added JSON-related specificities to SQL).</p>
<p>This is especially great for the <code>Repository</code> pattern and query derivation in Spring Data, because the vast majority of query derivation keywords can be easily translated to N1QL.</p>
<p>N1QL is now the default backing Couchbase feature for Repository methods. You can also elect to use the @Query interface if you want to be explicit on the query executed.</p>
<pre><code class="prettyprint java">public interface UserRepository extends Repository&lt;User, String&gt; {

  User findByUsernameEquals(String username);

  List&lt;User&gt; findByUsernameContains(String contains);

  @Query //optional for N1QL query derivation but more explicit
  List&lt;User&gt; findByAgeBetween(int minAge, int maxAge);
}
</code></pre><h3><a href="#repository-methods-through-views" class="anchor" name="repository-methods-through-views"></a>Repository methods through Views</h3>
<p>‚≠ê‚≠ê</p>
<p>One big change in this version is that now, Repository Queries (aka custom repository methods) that are based on views are more in line with the Spring Data philosophy. They also have to be annotated explicitly with <code>@View(viewName=&quot;something&quot;)</code>.</p>
<p>This means that nothing Couchbase-specific should leak into your repository interface. Instead, what you can do is use query derivation mechanisms for most of the queries.</p>
<p>Query derivation is also possible to a small extent, with a few keywords being accepted in a view-backed method.</p>
<pre><code class="prettyprint java">public interface UserRepository extends Repository&lt;User, String&gt; {

  @Override
  @View(designDocument = &quot;user&quot;, viewName = &quot;customFindAllView&quot;)
  Iterable&lt;User&gt; findAll();

  @View(viewName = &quot;customFindByNameView&quot;)
  User findByUsernameIs(String lowKey);

  @View(viewName = &quot;customFindByNameView&quot;)
  List&lt;User&gt; findByUsernameBetween(String lowKey, String highKey);
}
</code></pre><h3><a href="#using-reduce-function-from-views" class="anchor" name="using-reduce-function-from-views"></a>Using reduce function from Views</h3>
<p>‚≠ê</p>
<p>Another new thing that wasn&rsquo;t previously supported is the execution of the reduce function if you have one. Now, in order to execute it, you simply set the <code>reduce</code> flag to true in the <code>@View</code> annotation.</p>
<p>You could also prefix your method with &ldquo;count&rdquo; instead of &ldquo;find&rdquo; if that is meaningful to you (ie. you actually use the &ldquo;count&rdquo; reduce function).</p>
<p>Note that the reduce function in Couchbase can be something else than the preexisting _count one, and could even return something else than a long like a <code>JsonObject</code>, like for built-in <code>_stats</code>.</p>
<p>Similarly, adding the variation &ldquo;topX&rdquo; or &ldquo;firstX&rdquo; in a method name will result in an additional limit being set on the request (eg. <code>findFirst5ByLastName</code> will limit the list to 5 results).</p><h3><a href="#configuring-consistency-read-your-own-writes" class="anchor" name="configuring-consistency-read-your-own-writes"></a>Configuring consistency, Read Your Own Writes</h3>
<p>‚≠ê‚≠ê‚≠ê</p>
<p>One thing that comes up often when using asynchronously populated secondary indexes like views and GSI (the new secondary index engine backing N1QL), is the need to immediately read the modifications from your previous write operations.</p>
<p>This implies that the view/N1QL shouldn&rsquo;t answer as long as the data is still in the process of being indexed, so this sacrifices some performance in favor of consistency.</p>
<p>The opposite (and current default for Spring Data Couchbase) is to favor performance by accepting stale data to be returned.</p>
<p>We added global semantics for configuring all queries (view-based or N1QL-based) that are constructed by the framework through query derivation, by providing a small abstraction around the concept of Consistency.</p>
<p>This is done by overriding the <code>AbstractCouchbaseConfiguration</code>&rsquo;s <code>getDefaultConsistency()</code> method. <code>Consistency</code> is an enum that lets you choose between <code>READ_YOUR_OWN_WRITES</code>, <code>STRONGLY_CONSISTENT</code>, <code>UPDATE_AFTER</code> and <code>EVENTUALLY_CONSISTENT</code>. Please refer to the official documentation for more information on how they work exactly and what their impact is at query time.</p>
<p>You can also do that in XML by using the consistency attribute on the <code>&lt;couchbase:template&gt;</code> tag.</p>
<p>Since GA, CRUD methods in repositories now also take the default configured consistency into account.</p><h3><a href="#changing-the-type-information-field-in-stored-json" class="anchor" name="changing-the-type-information-field-in-stored-json"></a>Changing the type information field in stored JSON</h3>
<p>‚≠ê</p>
<p>Some users have reported issues with Spring Data and the Couchbase Mobile side of things, with the Sync Gateway rejecting documents containing fields prefixed by an underscore.</p>
<p>This is problematic for Spring Data, since by default it stores the type information in a <code>_class</code> field :(</p>
<p>The solution is to allow, through the configuration, to modify the name of that type information field. You can do so by overriding the <code>typeKey()</code> method in <code>AbstractCouchbaseConfiguration</code>. For instance, you can use the constant <code>MappingCouchbaseConverter.TYPEKEY_SYNCGATEWAY_COMPATIBLE</code> (which is &ldquo;<code>javaClass</code>&rdquo;).</p>
<p>This field is the one used by generated N1QL queries to filter only documents corresponding to the repository&rsquo;s entity.</p><h3><a href="#support-for-code-pageable-code-code-pagerequest-code-in-n1ql-derived-queries" class="anchor" name="support-for-code-pageable-code-code-pagerequest-code-in-n1ql-derived-queries"></a>Support for <code>Pageable</code>/<code>PageRequest</code> in N1QL derived queries</h3>
<p>‚≠ê‚≠ê</p>
<p>Using N1QL, for queries that are generated through query derivation, <code>Pageable</code> and <code>Sort</code> parameters are now supported.</p>
<ul>
<li>Support for <code>PagingAndSortingRepository</code> based on N1QL.</li>
<li>Adds two <code>findAll</code> methods that rely on N1QL for paging and/or sorting. Uses the default configured consistency.</li>
</ul><h3><a href="#geospatial-and-multi-dimensional-querying-using-spatial-views" class="anchor" name="geospatial-and-multi-dimensional-querying-using-spatial-views"></a>GeoSpatial and Multi-Dimensional querying using Spatial Views</h3>
<p>‚≠ê‚≠ê‚≠ê</p>
<p>Query Couchbase using coordinates! Provided your entity has a <code>Point</code> (or <code>x</code> and <code>y</code>) location, you can find it using:</p>
<ul>
<li>a bounding box: <code>findByLocationWithin(Box area)</code></li>
<li>a circle: <code>findByLocationWithin(Circle area)</code>, <code>findByLocationWithin(Point center, Distance radius)</code>.</li>
<li>a polygon: <code>findByLocationWithin(Polygon area)</code>, <code>findByLocationWithin(Point[] polygon)</code>.</li>
<li>a distance <code>findByLocationNear(Point near, Distance maxDistance)</code>.</li>
</ul>
<p>Circle and polygon-like queries are performed fast as bounding box approximations on the server then the false positives are eliminated by the framework before presenting results.</p>
<p>You can take advantage of the multidimensional aspect of Couchbase Spatial Views to add extra dimensions to your queries (e.g. stores that open late at night within a city&hellip;).</p>
<pre><code class="prettyprint java">public interface DimensionalPartyRepository extends CrudRepository&lt;Party, String&gt; {

  @Dimensional(designDocument = &quot;partyGeo&quot;, spatialViewName = &quot;byLocation&quot;)
  List&lt;Party&gt; findByLocationNear(Point p, Distance d);

  @Dimensional(designDocument = &quot;partyGeo&quot;, spatialViewName = &quot;byLocation&quot;)
  List&lt;Party&gt; findByLocationWithin(Box boundingBox);

  @Dimensional(designDocument = &quot;partyGeo&quot;, spatialViewName = &quot;byLocation&quot;)
  List&lt;Party&gt; findByLocationWithin(Polygon zone);
  
  @Dimensional(designDocument = &quot;partyGeo&quot;, spatialViewName = &quot;byLocationAndAttendees&quot;, dimensions = 3)
  List&lt;Party&gt; findByLocationWithinAndAttendeesGreaterThan(Polygon zone, double minAttendees);
}
</code></pre>
<p>Note: if you want to reuse annotations, you can do that too (works for <code>@View</code> and <code>@Query</code> too):</p>
<pre><code class="prettyprint java">public interface DimensionalPartyRepository extends CrudRepository&lt;Party, String&gt; {

  //define your own meta-annotation
  @Dimensional(designDocument = &quot;partyGeo&quot;, spatialViewName = &quot;byLocation&quot;, dimensions = 2)
  @Retention(RetentionPolicy.RUNTIME)
  @interface IndexedByLocation { }
  
  //use it :)
  @IndexedByLocation
  List&lt;Party&gt; findByLocationNear(Point p, Distance d);

  @IndexedByLocation
  List&lt;Party&gt; findByLocationWithin(Box boundingBox);

  @IndexedByLocation
  List&lt;Party&gt; findByLocationWithin(Polygon zone);
  
  //here we use a variation with 3 dimensions, so we need to revert to @Dimensional
  @Dimensional(designDocument = &quot;partyGeo&quot;, spatialViewName = &quot;byLocationAndAttendees&quot;, dimensions = 3)
  List&lt;Party&gt; findByLocationWithinAndAttendeesGreaterThan(Polygon zone, double minAttendees);
}
</code></pre><h3><a href="#inline-code-n1ql-code-code-query-code-now-have-spel-support" class="anchor" name="inline-code-n1ql-code-code-query-code-now-have-spel-support"></a>Inline <code>N1QL</code> <code>@Query</code> now have SpEL support</h3>
<p>‚≠ê‚≠ê‚≠ê</p>
<p>Inline queries can use SpEL notation to:</p>
<ol>
<li>ensure that correct selection and filtering is applied to the statement in order to construct and return entities: use <code>#{#n1ql.selectEntity}</code> to generate a <code>SELECT ... FROM ...</code> clause, and <code>#{#n1ql.filter}</code> in the <code>WHERE</code> clause to limit query to the correct entity.</li>
<li>compute values or retrieve data from external SpEL value provides configured in the Spring context.</li>
</ol><h3><a href="#repository-ldquo-main-rdquo-indexes-creation-can-be-automatically-triggered" class="anchor" name="repository-ldquo-main-rdquo-indexes-creation-can-be-automatically-triggered"></a>Repository &ldquo;main&rdquo; indexes creation can be automatically triggered</h3>
<p>‚≠ê‚≠ê</p>
<p>‚ö†Ô∏è <strong><em>IMPORTANT: this is considered as an aid during development/testing and discouraged in production</em></strong></p>
<p>In order to make sure that N1QL indexing of the entities in a given repository is activated in a dev or pre-production environment, one can annotate it with <code>@N1qlPrimaryIndexed</code> (which enables bucket-wide freeform querying) and <code>@N1qlSecondaryIndexed</code> (which will index only the documents corresponding to the entity type, similarly to the WHERE clause produced by SpEL <code>#{#n1ql.filter}</code>).</p>
<p>Also, the backing view for CRUD operation can be automatically created by annotating the repository with <code>@ViewIndexed</code> (you&rsquo;ll need to provide the design document name, which should correspond to the entity&rsquo;s simple class name with a lowercase first letter).</p>
<p>This feature must additionally be opted-in by redefining the <code>indexManager</code> bean in the <code>AbstractCouchbaseConfiguration</code>.</p><h3><a href="#simple-return-types-primitives-and-code-string-code-are-now-supported-when-using-a-single-row-projection" class="anchor" name="simple-return-types-primitives-and-code-string-code-are-now-supported-when-using-a-single-row-projection"></a>Simple return types (primitives and <code>String</code>) are now supported when using a single-row projection</h3>
<p>‚≠ê‚≠ê</p>
<p>This is especially targeted at inline N1QL queries with aggregation functions like <code>COUNT(*)</code>, <code>AVG(field)</code>, etc&hellip; The query must return a single row with a single projection.</p><h3><a href="#support-named-parameters-in-n1ql-inline-queries" class="anchor" name="support-named-parameters-in-n1ql-inline-queries"></a>Support named parameters in N1QL inline queries</h3>
<p>‚≠ê‚≠ê</p>
<p>Use either named parameters or positional parameter, but not both. Syntax for named parameters is <code>$paramName</code>, requiring that each method parameter be annotated with <code>@Param(&quot;paramName&quot;)</code>.</p><h3><a href="#other-features" class="anchor" name="other-features"></a>Other Features</h3>
<p>‚≠ê</p>
<p>Other features include:</p>
<ul>
<li>Fix bean naming so that all beans created by Spring Data Couchbase are prefixed with &ldquo;<code>couchbase</code>&rdquo;, in order to avoid clashes with other stores.</li>
<li>Changing the base class for all repositories is now supported (following the process documented in the common Spring Data documentation)</li>
<li>In case indexes are stale, deleted documents are eliminated from find methods in the <code>CouchbaseTemplate</code></li>
<li>Expiry can be set on a <code>@Document</code>, as a <code>long</code> + <code>timeUnit</code></li>
</ul>
<p>A few bugfixes and improvements over RC1 have also been implemented.</p><h2><a href="#documentation" class="anchor" name="documentation"></a>Documentation</h2>
<p>‚≠ê‚≠ê‚≠ê</p>
<p><a href="https://docs.spring.io/spring-data/couchbase/docs/2.0.0.RELEASE/reference/html/">Documentation</a> has also been improved, adding Couchbase-oriented examples on how to add the implementation of a custom method to a repository, how to change the base class of all repositories, how to deal with SpEL in inline queries, &hellip;</p><h2><a href="#a-note-about-spring-cache" class="anchor" name="a-note-about-spring-cache"></a>A note about Spring Cache</h2>
<p>The Spring Cache support has been moved out of the Spring Data repository. It is still there and we plan on improving on it. You can for now find it on a Couchbase <a href="https://github.com/couchbaselabs/couchbase-spring-cache">repository</a> on github but it should soon reintegrate the official Spring family of projects.</p><h2><a href="#getting-spring-data-couchbase" class="anchor" name="getting-spring-data-couchbase"></a>Getting Spring Data Couchbase</h2>
<p>You can add the following to your project&rsquo;s <code>pom.xml</code> to get this GA Release (in the <code>dependencies</code> section:</p>
<pre><code class="prettyprint xml">&lt;!--&lt;dependencies&gt;--&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
    &lt;artifactId&gt;spring-data-couchbase&lt;/artifactId&gt;
    &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
&lt;!--&lt;/dependencies&gt;--&gt;
</code></pre>
<p>We hope you enjoy this release and all the new features it brings to the table. Next step will be to re-attach to the <code>Hopper</code> release train with a version <code>2.1</code> expected before Summer.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2376;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>