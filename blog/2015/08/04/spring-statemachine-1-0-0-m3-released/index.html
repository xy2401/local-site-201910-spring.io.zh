<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring Statemachine 1.0.0.M3 Released</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring Statemachine 1.0.0.M3 Released" />
<meta name="twitter:description" content="&lt;p&gt;We’re pleased to announce a third milestone release of &lt;a href=&quot;http://projects.spring.io/spring-statemachine/&quot;&gt;Spring Statemachine&lt;/a&gt; 1.0.0.M3.&lt;/p&gt;
&lt;p&gt;A lot has happened since a previous milestone and getting here took a bit more time we originally estimated. Now that we’re here, let’s crack it and see what new features we have in this release.&lt;/p&gt;
&lt;p&gt;Beyond usual bug fixes here is a list of main new features:&lt;/p&gt;
&lt;ul&gt; 
 &lt;li&gt;Distributed state machine&lt;/li&gt; 
 &lt;li&gt;Persisting state machine context&lt;/li&gt; 
 &lt;li&gt;Relax use of enums as states and events&lt;/li&gt; 
 &lt;li&gt;Programmatic instantiation of state machines&lt;/li&gt; 
 &lt;li&gt;New recipe modules&lt;/li&gt; 
 &lt;li&gt;New samples (persist, zookeeper, web)&lt;/li&gt; 
&lt;/ul&gt;
" />
<meta name="twitter:creator" content="@tunebluez" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/dbd576b7eed3f8db0503df5039166988?s=200" />

<meta property="og:title" content="Spring Statemachine 1.0.0.M3 Released" />
<meta property="og:image" content="https://gravatar.com/avatar/dbd576b7eed3f8db0503df5039166988?s=200" />
<meta property="og:description" content="&lt;p&gt;We’re pleased to announce a third milestone release of &lt;a href=&quot;http://projects.spring.io/spring-statemachine/&quot;&gt;Spring Statemachine&lt;/a&gt; 1.0.0.M3.&lt;/p&gt;
&lt;p&gt;A lot has happened since a previous milestone and getting here took a bit more time we originally estimated. Now that we’re here, let’s crack it and see what new features we have in this release.&lt;/p&gt;
&lt;p&gt;Beyond usual bug fixes here is a list of main new features:&lt;/p&gt;
&lt;ul&gt; 
 &lt;li&gt;Distributed state machine&lt;/li&gt; 
 &lt;li&gt;Persisting state machine context&lt;/li&gt; 
 &lt;li&gt;Relax use of enums as states and events&lt;/li&gt; 
 &lt;li&gt;Programmatic instantiation of state machines&lt;/li&gt; 
 &lt;li&gt;New recipe modules&lt;/li&gt; 
 &lt;li&gt;New samples (persist, zookeeper, web)&lt;/li&gt; 
&lt;/ul&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2015-08-04 08:50:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Statemachine 1.0.0.M3 Released</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/dbd576b7eed3f8db0503df5039166988?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/jvalkealahti">Janne Valkealahti</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2015-08-04 08:50:00.0">August 04, 2015</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="2203" href="/blog/2015/08/04/spring-statemachine-1-0-0-m3-released#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>We’re pleased to announce a third milestone release of <a href="https://projects.spring.io/spring-statemachine/">Spring Statemachine</a> 1.0.0.M3.</p><p>A lot has happened since a previous milestone and getting here took a bit more time we originally estimated. Now that we&rsquo;re here, let&rsquo;s crack it and see what new features we have in this release.</p><p>Beyond usual bug fixes here is a list of main new features:</p>
<ul>
<li>Distributed state machine</li>
<li>Persisting state machine context</li>
<li>Relax use of enums as states and events</li>
<li>Programmatic instantiation of state machines</li>
<li>New recipe modules</li>
<li>New samples (persist, zookeeper, web)</li>
</ul><h1><a href="#distributed-state-machine" class="anchor" name="distributed-state-machine"></a>Distributed state machine</h1><p><code>Distributed state</code> is a new exciting feature which is meant to span state machine concepts through a jvm&rsquo;s boundaries. Let&rsquo;s think about this a second, if there is a state machine running on a single jvm, wouldn&rsquo;t it be nice if a state change on one jvm could automatically fire a state change on other participating state machines on a different jvm&rsquo;s.</p><p>Naturally a concept of a distributed state is relatively complex topic and thus in this milestone release we provide this feature as a techinical preview to get a change to play and experience with it.</p><p>We do have a new abstraction how arbitrary state machine and jmv can join into a distributed state machine ensemble order to orchestrate state changes externally from a local state machine. First implementation of this abstraction is based on a <a href="https://zookeeper.apache.org/">Zookeeper</a>. We have two samples around this topic, <code>zookeeper</code> and <code>web</code> samples.</p><p>We have a relatively nice sample on top of this and you can read more about it either from our <a href="https://docs.spring.io/spring-statemachine/docs/1.0.0.M3/reference/htmlsingle/#statemachine-examples-web">reference docs</a> or later in this blog post.</p><p><img src="https://docs.spring.io/spring-statemachine/docs/1.0.0.M3/reference/htmlsingle/images/sm-dist-n1-4.png" alt="Web Sample" /></p><h1><a href="#persist-state-machine" class="anchor" name="persist-state-machine"></a>Persist state machine</h1><p>Persisting a state machine context was requested by a community order to ease concepts of how a simple state machine instance can be i.e. used to update tables in a database. Essentially this feature is also used in a <code>distributed state machine</code> but also allows a user to reset a <code>state machine</code> state in order to work with arbitrary repository updates without having a need to build a new state machine instance for every action. The problem in building a new state machine instance is that instantiation is a relatively heavy operation so able to reset a state machine is much more lightwave operation.</p><p>Also, around this feature, we have a new <code>interceptor</code> feature which allows user to communicate to external systems and i.e. stop a state transition logic if something cannot be persisted into an external storage.</p><h1><a href="#builder-patters-for-building-state-machines" class="anchor" name="builder-patters-for-building-state-machines"></a>Builder patters for building state machines</h1><p>While using enums as state and event types is a nice concept because it gives you a compile time guarantee of possible combinations, it limits you to compile time exactly. You would not have any change to build a state machine where states and events are build dynamically.</p><p>We relaxed requirement of using <code>enums</code> and it is now possible to use <code>strings</code> as states and events. This requirement was also one of a multiple requests from a community and probably one of a best feature requests.</p><p>Now that we are able to step away from enums, it opened up an interesting chance to implement a real <code>builder pattern</code> which allows to build state machine instances on demand. We still use same familiar interfaces from the annotation config model, but instead of setting things up at compile time, everything can be build dynamically on demand.</p><p>Simplified example of this shown below where transitions are not configured:</p>
<pre><code class="prettyprint java">StateMachine&lt;String, String&gt; buildMachine() throws Exception {
  Builder&lt;String, String&gt; builder = StateMachineBuilder.builder();
  builder.configureStates()
    .withStates()
      .initial(&quot;SI&quot;)
      .end(&quot;SF&quot;)
      .states(new HashSet&lt;String&gt;(Arrays.asList(&quot;S1&quot;,&quot;S2&quot;,&quot;S3&quot;,&quot;S4&quot;)));
  return builder.build();
}
</code></pre><h1><a href="#recipes" class="anchor" name="recipes"></a>Recipes</h1><p>In some Spring projects we&rsquo;re starting to use a concept of a <code>recipe</code>. Recipe concept is familiar from a <a href="https://zookeeper.apache.org/">Zookeeper</a> and <a href="https://curator.apache.org/">Curator</a> where correct usa of a base system might have fealt a little difficult. People had similar uses cases and copypasting code became a usual manner and these usual use cases were transferred into recipes.</p><p>We&rsquo;re simply taking this same concept into a <code>Spring Statemachine</code> by starting to add recipes for common use cases. First two recipes are <code>tasks</code> and <code>persist</code>.</p><p>You can find more info about these from a <a href="https://docs.spring.io/spring-statemachine/docs/1.0.0.M3/reference/htmlsingle">reference documentation</a>.</p><h1><a href="#samples" class="anchor" name="samples"></a>Samples</h1><p>Samples are always the bread and butter to understand how things are used. We have three new samples, <code>zookeeper</code> and <code>web</code> which are samples for a distributed state machine, <code>persist</code> is a sample showing how an arbitrary database change can be handled via a state machine.</p><p>Web sample is a little more complicated example what it really needs be because we added an UI layer which is using JS fronted and communicates with backend server over websockets to notify state machine state changes. State machine is running inside a <code>Spring Boot</code> app and UI is updated automatically from changes in a state machine. </p><p>Where do we go from here? Currently we&rsquo;re expecting this release to be a last milestone and next release should be a first release candicate. We are mostly feature complete and in terms of adding new big features we&rsquo;re going to step into a code freeze. Topics of getting into a RC phase is to fix more bugs, getting core as stable as possible, and especially getting distributed states feature stable.</p><h1><a href="#springone-2gx-2015-is-around-the-corner" class="anchor" name="springone-2gx-2015-is-around-the-corner"></a>SpringOne 2GX 2015 is around the corner!</h1><p>Book your place at <a href="http://www.springone2gx.com">SpringOne2GX in Washington, DC soon</a>. Super Early Bird Price expires June 12th! It&rsquo;s simply the best opportunity to find out first hand all that&rsquo;s going on and to provide direct feedback.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2203;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>