<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Better dependency management for Gradle</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Better dependency management for Gradle" />
<meta name="twitter:description" content="&lt;p&gt;Maven’s &lt;a href=&quot;http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html&quot;&gt;dependency management&lt;/a&gt; includes the concept of a bill-of-materials (bom). A bom is a special kind of pom that is used to control the versions of a project’s dependencies and provides a central place to define and update those versions.&lt;/p&gt;
&lt;p&gt;A number of Spring projects including Spring Framework, Spring Cloud, Spring Boot, and the Spring IO Platform provide boms to make things easier for Maven users. Unfortunately, things haven’t been quite so easy if you’re using Gradle.&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;#dependency-management-in-gradle&quot; class=&quot;anchor&quot; name=&quot;dependency-management-in-gradle&quot;&gt;&lt;/a&gt;Dependency management in Gradle&lt;/h2&gt;
" />
<meta name="twitter:creator" content="@ankinson" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/8d143bf6d465cb98f8196cf4311256d0?s=200" />

<meta property="og:title" content="Better dependency management for Gradle" />
<meta property="og:image" content="https://gravatar.com/avatar/8d143bf6d465cb98f8196cf4311256d0?s=200" />
<meta property="og:description" content="&lt;p&gt;Maven’s &lt;a href=&quot;http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html&quot;&gt;dependency management&lt;/a&gt; includes the concept of a bill-of-materials (bom). A bom is a special kind of pom that is used to control the versions of a project’s dependencies and provides a central place to define and update those versions.&lt;/p&gt;
&lt;p&gt;A number of Spring projects including Spring Framework, Spring Cloud, Spring Boot, and the Spring IO Platform provide boms to make things easier for Maven users. Unfortunately, things haven’t been quite so easy if you’re using Gradle.&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;#dependency-management-in-gradle&quot; class=&quot;anchor&quot; name=&quot;dependency-management-in-gradle&quot;&gt;&lt;/a&gt;Dependency management in Gradle&lt;/h2&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2015-02-23 13:44:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Better dependency management for Gradle</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/8d143bf6d465cb98f8196cf4311256d0?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/awilkinson">Andy Wilkinson</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2015-02-23 13:44:00.0">February 23, 2015</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="1982" href="/blog/2015/02/23/better-dependency-management-for-gradle#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>Maven&rsquo;s <a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">dependency management</a> includes the concept of a bill-of-materials (bom). A bom is a special kind of pom that is used to control the versions of a project&rsquo;s dependencies and provides a central place to define and update those versions.</p><p>A number of Spring projects including Spring Framework, Spring Cloud, Spring Boot, and the Spring IO Platform provide boms to make things easier for Maven users. Unfortunately, things haven&rsquo;t been quite so easy if you&rsquo;re using Gradle.</p><h2><a href="#dependency-management-in-gradle" class="anchor" name="dependency-management-in-gradle"></a>Dependency management in Gradle</h2><p><a href="https://gradle.org/docs/current/userguide/dependency_management.html">Gradle&rsquo;s dependency management</a> uses a <a href="https://gradle.org/docs/current/dsl/org.gradle.api.artifacts.ResolutionStrategy.html"><code>ResolutionStrategy</code></a> to take control of a project&rsquo;s dependency versions. This offers a lot of power and flexibility but doesn&rsquo;t provide a way to reuse the dependency management that&rsquo;s already been declared in a Maven bom. As a result, you have to do so manually. Depending on the bom, this can easily equate to tens of additional lines in your <code>build.gradle</code> script just to reuse some existing configuration.</p><h2><a href="#reusing-a-bom-in-gradle" class="anchor" name="reusing-a-bom-in-gradle"></a>Reusing a bom in Gradle</h2><p>One of Gradle&rsquo;s key strengths is that it can be easily extended and its behaviour customized through the use of plugins. We&rsquo;ve taken advantage of this and written a <a href="https://plugins.gradle.org/plugin/io.spring.dependency-management">dependency management plugin for Gradle</a>. It&rsquo;s compatible with both Gradle 1.x and 2.x. This plugin allows you to use a Maven bom to control your build&rsquo;s dependencies in a handful of lines. The first step is to apply the plugin:</p>
<pre><code class="prettyprint groovy">buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath &quot;io.spring.gradle:dependency-management-plugin:0.5.1.RELEASE&quot;
  }
}

apply plugin: &quot;io.spring.dependency-management&quot;
</code></pre><p>Once the plugin&rsquo;s been applied you can use it to import a Maven bom:</p>
<pre><code class="prettyprint groovy">dependencyManagement {
  imports {
    mavenBom &#39;io.spring.platform:platform-bom:1.1.1.RELEASE&#39;
  }
}
</code></pre><p>With this configuration in place you can declare dependencies on anything in the bom without specifying a version:</p>
<pre><code class="prettyprint groovy">dependencies {
    compile &#39;org.springframework:spring-core&#39;
}
</code></pre><p>The imported bom will control the version of the dependency. It will also control the version of its transitive dependencies if they&rsquo;re listed in the bom.</p><h2><a href="#exclusions-in-gradle" class="anchor" name="exclusions-in-gradle"></a>Exclusions in Gradle</h2><p>Gradle can retrieve dependencies from a Maven repository and it uses the metadata in Maven pom files to do so. However, rather than obeying Maven&rsquo;s rules, it applies its own, subtly different semantics to the metadata. One area where this can cause problems is with the exclusion of transitive dependencies. This is best illustrated with a simple example.</p><p>Imagine a module that depends on a couple of Spring Framework modules,<code>spring-core</code> and <code>spring-beans</code>, and that uses SLF4J rather than Commons Logging. The dependencies in its pom would look something like this:</p>
<pre><code class="prettyprint xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
  &lt;version&gt;4.1.4.RELEASE&lt;/version&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;groupId&gt;commons-logging&lt;/groupId&gt;
      &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
  &lt;version&gt;4.1.4.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
  &lt;version&gt;1.7.10&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>If a Maven build depends on this module its dependency tree will look like this:</p>
<pre><code class="prettyprint">\- com.example:my-library:jar:0.0.1-SNAPSHOT:compile
   +- org.springframework:spring-core:jar:4.1.4.RELEASE:compile
   +- org.springframework:spring-beans:jar:4.1.4.RELEASE:compile
   \- org.slf4j:jcl-over-slf4j:jar:1.7.10:compile
      \- org.slf4j:slf4j-api:jar:1.7.10:compile
</code></pre><p><code>commons-logging</code> isn&rsquo;t listed as the only module that depends upon it is <code>spring-core</code> where it has been excluded.</p><p>The dependency tree of the equivalent Gradle build looks like this:</p>
<pre><code class="prettyprint">\--- com.example:my-library:0.0.1-SNAPSHOT
     +--- org.springframework:spring-core:4.1.4.RELEASE
     |    \--- commons-logging:commons-logging:1.2
     +--- org.springframework:spring-beans:4.1.4.RELEASE
     |    \--- org.springframework:spring-core:4.1.4.RELEASE (*)
     \--- org.slf4j:jcl-over-slf4j:1.7.10
          \--- org.slf4j:slf4j-api:1.7.10
</code></pre><p>Despite the exclusion, <code>commons-logging</code> is listed this time. This can be problematic as it leaves your classpath polluted with dependencies that should not be there. You can work around the problem by manually configuring the required exclusions in your Gradle build, but first of all you have to know what the exclusions should be, and then you have to go through the tedious and error-prone process of configuring them.</p><h2><a href="#honoring-a-pom-rsquo-s-exclusions" class="anchor" name="honoring-a-pom-rsquo-s-exclusions"></a>Honoring a pom&rsquo;s exclusions</h2><p>The dependency management plugin changes Gradle&rsquo;s handling of a pom&rsquo;s exclusions so that they behave as they do in Maven. With the plugin applied to the example project, it no longer pulls in <code>commons-logging</code>:</p>
<pre><code class="prettyprint">\--- com.example:my-library:0.0.1-SNAPSHOT
     +--- org.springframework:spring-core:4.1.4.RELEASE
     +--- org.springframework:spring-beans:4.1.4.RELEASE
     |    \--- org.springframework:spring-core:4.1.4.RELEASE
     \--- org.slf4j:jcl-over-slf4j:1.7.10
          \--- org.slf4j:slf4j-api:1.7.10
</code></pre><h2><a href="#using-the-plugin-with-spring-boot" class="anchor" name="using-the-plugin-with-spring-boot"></a>Using the plugin with Spring Boot</h2><p>There are some similarities between this plugin and Spring Boot&rsquo;s Gradle plugin. For example, the Spring Boot plugin also <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-gradle-dependencies-without-versions">allows dependencies to be declared without a version</a>, however it doesn&rsquo;t affect transitive dependencies and doesn&rsquo;t honor Maven exclusions.</p><p>In the forthcoming Spring Boot 1.3 we have <a href="https://github.com/spring-projects/spring-boot/issues/2133">removed Boot&rsquo;s own dependency management and started using the dependency management plugin instead</a>. For users of earlier versions of Spring Boot, the two plugins will happily co-exist and you can configure the dependency management plugin to use Spring Boot&rsquo;s starter bom:</p>
<pre><code class="prettyprint groovy">buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath &quot;io.spring.gradle:dependency-management-plugin:0.5.1.RELEASE&quot;
    classpath &quot;org.springframework.boot:spring-boot-gradle-plugin:1.2.3.RELEASE&quot;
  }
}

apply plugin: &quot;io.spring.dependency-management&quot;
apply plugin: &quot;spring-boot&quot;

repositories {
  jcenter()
}

dependencyManagement {
  imports {
    mavenBom &#39;org.springframework.boot:spring-boot-starter-parent:1.2.1.RELEASE&#39;
  }
}

dependencies {
  compile &quot;org.springframework.boot:spring-boot-starter-web&quot;
}
</code></pre><h2><a href="#learning-more" class="anchor" name="learning-more"></a>Learning more</h2><p>In addition to the features described above, the plugin has support for working with a bom&rsquo;s properties (both overriding them and using them in your Gradle build), automatically including dependency management metadata in Gradle-generated pom files, and more. Take a look at the <a href="https://github.com/spring-gradle-plugins/dependency-management-plugin/blob/master/README.md">README</a> for further details.</p><p>The plugin is Apache-licensed and is on <a href="https://github.com/spring-gradle-plugins/dependency-management-plugin">GitHub</a>. GitHub&rsquo;s also used for <a href="https://github.com/spring-gradle-plugins/dependency-management-plugin/issues">issue tracking</a>. Feature suggestions, pull requests, and bug reports are always welcome.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 1982;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
 <div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>