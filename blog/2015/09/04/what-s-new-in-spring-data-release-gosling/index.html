<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring数据发布Gosling有什么新功能？</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="What's New In Spring Data Release Gosling?">
<meta name="twitter:description" class="anchor" content="<p>Over 300 issues fixed across 12 projects makes it pretty hard to keep track on what has happened since the last release. So here’s a more detailed excerpt of some of the new features we’ve been cooking during the last iteration.</p>
<h2><a href=" #ad-hoc-jpa-fetch-graph="="></head><body >Ad-hoc JPA fetch graphs.
<p>Since the Dijkstra release train we have been able to refer to the named entity graph declared on the entity through the <code>@EntityGraph</code> annotation in JPA-backed repositories. In the example below this forces firstname and lastname to be loaded eagerly, while all others remain lazily loaded.</p>
">
<meta name="twitter:creator" content="@stroblchristoph">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=200">

<meta property="og:title" content="What's New In Spring Data Release Gosling?">
<meta property="og:image" content="https://gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=200">
<meta class="anchor" name="ad-hoc-jpa-fetch-graphs" property="og:description" content="<p>Over 300 issues fixed across 12 projects makes it pretty hard to keep track on what has happened since the last release. So here’s a more detailed excerpt of some of the new features we’ve been cooking during the last iteration.</p>
<h2><a href=" #ad-hoc-jpa-fetch-graph="=">Ad-hoc JPA fetch graphs.
<p>Since the Dijkstra release train we have been able to refer to the named entity graph declared on the entity through the <code>@EntityGraph</code> annotation in JPA-backed repositories. In the example below this forces firstname and lastname to be loaded eagerly, while all others remain lazily loaded.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2015-09-04 08:01:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring数据发布Gosling有什么新功能？</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=20&d=mm"> <a class="author" rel="author" href="/team/christophstrobl">克里斯多夫·斯特罗布尔</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2015-09-04 08:01:00.0">2015年9月4日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2015/09/04/what-s-new-in-spring-data-release-gosling#disqus_thread" data-disqus-identifier="2227">
</a></div>
</div>
</header>
<div class="blog--post"><p>在12个项目中修复了300多个问题，因此很难跟踪自上一个版本以来发生的情况。因此，这是我们在上一次迭代中一直在做的一些新功能的更详细摘录。</p><h2><a href="#ad-hoc-jpa-fetch-graphs" class="anchor" name="ad-hoc-jpa-fetch-graphs"></a>临时JPA提取图。</h2><p>自从Dijkstra发布培训以来，我们已经能够通过引用实体上声明的命名实体图<code>@EntityGraph</code> JPA支持的存储库中的注释。在下面的示例中，这将强制优先加载名字和姓氏，而所有其他名称则保持延迟加载。</p>
<pre><code class="prettyprint java">@Entity
@NamedEntityGraphs(
  @NamedEntityGraph(name = &quot;with-tags&quot;,
    attributeNodes = { @NamedAttributeNode(&quot;tags&quot;) }))
class Product {

  @ManyToMany
  Set&lt;Tag&gt; tags;

  // other properties omitted
}

interface ProductRepository extends Repository&lt;Customer, Long&gt; {

  @EntityGraph(&quot;with-tags&quot;)
  Product findOneById(Long id);
}
</code></pre><p>Gosling版本现在使我们的JPA 2.1故事向前迈了一步，将其扩展到即席提取图定义。通过显式指定属性<code>@EntityGraph(attributePaths = …)</code>在查询方法上，您不需要<code>NamedEntityGraph</code>您实体上的注释。</p>
<pre><code class="prettyprint java">@Entity
class Product {

  @ManyToMany
  Set&lt;Tag&gt; tags;

  // other properties omitted
}

interface ProductRepository extends Repository&lt;Customer, Long&gt; {

  @EntityGraph(attributePaths = {&quot;tags&quot;})
  Product findOneById(Long id);
}
</code></pre><h2><a href="#querydsl-web-support" class="anchor" name="querydsl-web-support"></a> Querydsl Web支持</h2><p>Spring Data Web支持已经允许您声明类型的参数<code>Pageable</code>在控制器处理程序方法中。新引入的Querydsl集成扩展了它，使您可以立即使用<code>Predicate</code>直接从HTTP请求的查询字符串派生。该功能在以下情况时自动启用<code>@EnableSpringDataWebSupport</code>配置并在类路径上找到Querydsl。</p><p>如果<code>Predicate</code>无需进一步配置即可使用，我们将尝试解析根类型<code>Predicate</code>从方法的返回类型解析，尽管在大多数情况下，最好通过以下方法显式声明所需的类型引用<code>@QuerydslPredicate(root = …)</code> 。将其放置到位后，查询字符串属性将绑定到创建例如以下类型的匹配属性</p>
<pre><code class="prettyprint java">QUser.user.firstname.eq(&quot;Dave&quot;).and(QUser.user.lastname.eq(&quot;Matthews&quot;)) 
</code></pre><p>从<code>?firstname=Dave&lastname=Matthews</code>使用默认属性类型依赖绑定。</p>
<pre><code class="prettyprint java">@SpringBootApplication
public class Application {

  public static void main(String[] args) {
    SpringApplication.run(Application.class, args);
  }

  @Controller
  @RequiredArgsConstructor(onConstructor = @__(@Autowired))
  static class UserController {

    private final UserRepository repository;

    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)
    String index(Model model,
                 @QuerydslPredicate(root = User.class) Predicate predicate,
                 Pageable pageable) {

      model.addAttribute(&quot;users&quot;, repository.findAll(predicate, pageable));
      return &quot;index&quot;;
    }
  }
}
</code></pre><p>现在，使用默认（等于）绑定并不是总是有意义的，而是针对每个属性或特定于类型的属性使用专用绑定。为此，只需提供一个<code>QuerydslBinderCustomizer</code>可以通过注册<code>@QuerydslPredicate(bindings = …)</code>或仅由存储库实施。</p>
<pre><code class="prettyprint java">interface UserRepository extends CrudRepository&lt;User, String&gt;,
    QueryDslPredicateExecutor&lt;User&gt;,
    QuerydslBinderCustomizer&lt;QUser&gt; {

  // Query methods go here

  @Override
  default public void customize(QuerydslBindings bindings, QUser user) {

    bindings.bind(user.nationality).first(
      (path, value) -&gt; path.equalsIgnoreCase(value)); // 1
    bindings.bind(String.class).first(
      (StringPath path, String value) -&gt; path.containsIgnoreCase(value)); // 2
    bindings.excluding(user.password);
  }
}
</code></pre><p>如您所见，我们利用Querydsl的类型安全属性引用旁边的Java 8 lambda来定义专用属性（1）或给定类型的所有属性（2）的绑定。使用<code>QuerydslBindings.excluding</code>允许您删除可查询的路径。</p><p>在<a href="https://github.com/spring-projects/spring-data-examples/tree/master/web/querydsl">Spring Data示例存储库中</a>找到一个完整的工作示例，并查看<a href="https://docs.spring.io/spring-data/jpa/docs/1.9.0.RELEASE/reference/html/#core.web.type-safe">参考文档</a>以获取详细信息。</p><h2><a href="#spring-data-rest" class="anchor" name="spring-data-rest"></a> Spring Data REST</h2><h3><a href="#querydsl-support" class="anchor" name="querydsl-support"></a> Querydsl支持</h3><p>Spring Data Commons（请参阅<a href="#querydsl-web-support">上文</a> ）中引入的Querydsl支持已集成到Spring Data REST中。这意味着您可以通过将简单的属性查询参数附加到请求URI来过滤集合资源。</p><p>在展示星巴克商店位置的Spring Data REST示例中，请注意StoreRepository现在如何实现这两个目标<code>QueryDslPredicateExecutor</code>以及<code>QuerydslBinderCustomizer<QStore></code>如上所述。</p><p>Spring Data REST公开的商店的集合资源将使您可以发出如下请求：</p>
<pre><code class="prettyprint bash">$ http :8080/api/stores?address.city=York

{
    &quot;_embedded&quot;: {
        &quot;stores&quot;: [
            {
                &quot;_links&quot;: {
                    …
                }, 
                &quot;address&quot;: {
                    &quot;city&quot;: &quot;New York&quot;, 
                    &quot;location&quot;: { &quot;x&quot;: -73.938421, &quot;y&quot;: 40.851 }, 
                    &quot;street&quot;: &quot;803 W 181st St&quot;, 
                    &quot;zip&quot;: &quot;10033-4516&quot;
                }, 
                &quot;name&quot;: &quot;Washington Hgts/181st St&quot;
            }, 
            {
                &quot;_links&quot;: {
                    …
                }, 
                &quot;address&quot;: {
                    &quot;city&quot;: &quot;New York&quot;, 
                    &quot;location&quot;: { &quot;x&quot;: -73.939822, &quot;y&quot;: 40.84135 }, 
                    &quot;street&quot;: &quot;4001 Broadway&quot;, 
                    &quot;zip&quot;: &quot;10032-1508&quot;
                }, 
                &quot;name&quot;: &quot;168th &amp; Broadway&quot;
            }, 
            …
        ]
    }, 
    &quot;_links&quot;: {
        …
    }, 
    &quot;page&quot;: {
        &quot;number&quot;: 0, 
        &quot;size&quot;: 20, 
        &quot;totalElements&quot;: 209, 
        &quot;totalPages&quot;: 11
    }
}
</code></pre><p>请注意，如在的实现中所定义的，如何仅返回以“ York”结尾的城市的商店<code>QuerydslBinderCustomizer</code>在<code>StoresRepository</code> 。</p><p>当前，我们正在寻找更明显地宣传这种查询机制的选项，例如，使用模板变量，甚至提供高级映射功能来定制要使用的请求参数名称。</p><h3><a href="#custom-hal-browser" class="anchor" name="custom-hal-browser"></a>自定义HAL浏览器</h3><p>Gosling版本的Spring Data REST附带了一个附加模块，该模块包装了Mike Kelly的<a href="https://github.com/mikekelly/hal-browser">HAL浏览器，</a>并对其进行了一些自定义调整，以利用我们公开的API元数据。要在您的应用程序中使用浏览器，只需添加<code>spring-data-rest-hal-browser</code>模块连接到您的项目，并且您的API根目录将为浏览器提供接受请求的服务<code>text/html</code> 。当然，默认情况下还是如果您使用基于JSON的标准HAL响应仍然可以使用<code>Accept</code>标头。</p><p><a href="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/hal-browser.png"><br><img src="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/hal-browser.png" alt="HAL浏览器"></a></p>
<p style="text-align:center;font-size:0.9em">图1.-HAL浏览器（单击放大）</p><p>使用Spring Data REST模块可以轻松地将浏览器添加到您的应用程序中，同时还可以对浏览器进行一些微调。当您点击按钮以触发非<code>GET</code>请求，浏览器通常会打开一个模态对话框，要求一些原始的JSON输入。如果您知道自己在做什么，那固然很好，但是由于您必须了解服务器期望的数据结构，因此容易出错并且不太方便。</p><p>Spring Data REST利用系统提供的JSON模式文档公开了系统公开的类型。 <code>profile</code>链接关系，使该模式通常可以发现，而无需将发现逻辑与Spring Data REST本身联系在一起。我们提供的浏览器实例将查找架构元数据，并在可能的情况下将其交给JSON Editor，以完全从JSON Schema派生的形式替换默认对话框。</p><p><a href="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/json-editor-post-form.png"><br><img src="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/json-editor-post-form.png" alt="基于JSON编辑器的POST表单"></a></p>
<p style="text-align:center;font-size:0.9em">图2.-基于JSON编辑器的POST（单击放大）</p><p>了解表单如何允许添加订单项，因为架构将其公开为数组。价格和订单日期字段标记为只读，位置字段允许从具有国际化值的枚举中选择值。</p><p>示例项目可以<a href="https://github.com/olivergierke/spring-restbucks">在GitHub上找到</a> 。</p><h3><a href="#internationalizing-links-and-enums" class="anchor" name="internationalizing-links-and-enums"></a>国际化链接和枚举</h3><p>如您在上方屏幕截图中所见<code>restbucks:orders</code>链接附有易于阅读的描述。这些描述来自可选的资源包<code>rest-messages</code>使用<code>_links.$rel.title</code>定义可读值的键。该示例使用<code>rest-messages.properties</code>作为后备资源包，但还包含一个<code>rest-messages_de.properties</code>为发送邮件的客户返回德语标签<code>Accept-Language</code>标头设置为<code>de</code> 。</p><p>相同的资源束可用于国际化枚举值，以便可以以人类可读的方式在客户端上使用它们。为了不破坏现有应用程序，必须通过以下方式明确激活它<a href="https://docs.spring.io/spring-data/rest/docs/2.4.0.RELEASE/api/org/springframework/data/rest/core/config/RepositoryRestConfiguration.html#setEnableEnumTranslation-boolean-"><code>RepositoryRestConfiguration.setEnableEnumTranslation(…)</code></a> 。有关翻译的详细信息可以在<a href="https://docs.spring.io/spring-data/rest/docs/2.4.0.RELEASE/api/org/springframework/data/rest/core/config/EnumTranslationConfiguration.html"><code>EnumTranslationConfiguration</code></a> 。</p><h2><a href="#spring-data-gemfire-amp-apache-geode" class="anchor" name="spring-data-gemfire-amp-apache-geode"></a> Spring Data GemFire和Apache Geode</h2><p>对Pivotal GemFire 8.1和Apache Geode的支持是Spring Data GemFire 1.7的最显着添加。Pivotal GemFire已于今年早些时候提交给<a href="https://wiki.apache.org/incubator/GeodeProposal">Apache孵化器</a> ，Spring Data团队迅速做出回应，将<a href="https://spring.io/blog/2015/06/12/spring-data-gemfire-supports-apache-geode">支持</a>纳入Spring Data GemFire。</p><p>此外，添加了其他一些功能来简化使用Spring的GemFire和Apache Geode应用程序的开发。例如，开发人员现在可以使用注释定义特定于应用程序域对象的到期策略：</p>
<pre><code class="prettyprint java">@TimeToLiveExpiration(
  timeout = &quot;@expirationSettings[&#39;spel.defined.timeout&#39;]&quot; action=&quot;DESTROY&quot;)
@IdleTimeoutExpiration(
  timeout = &quot;1800&quot; action=&quot;${property.placeholder.defined.action}&quot;)
class ApplicationDomainObject { … }
</code></pre><p>基于过期的注释同时支持<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#expressions">SpEL</a>和Spring <a href="https://docs.spring.io/spring/docs/1.7.0.RELEASE/spring-framework-reference/htmlsingle/#beans-factory-placeholderconfigurer">属性占位符</a>值。要启用基于注释的过期策略，您只需要在GemFire区域中为TTL和TTI或两者配置Spring Data GemFire的<a href="https://gemfire.docs.pivotal.io/latest/javadocs/japi/com/gemstone/gemfire/cache/CustomExpiry.html">CustomExpiry</a>实现<a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/api/org/springframework/data/gemfire/support/AnnotationBasedExpiration.html">AnnotationBasedExpiration</a> ：</p>
<pre><code class="prettyprint xml">&lt;gfe:partitioned-region id=&quot;Example&quot; persistent=&quot;false&quot; …&gt;
  &lt;gfe:custom-entry-ttl&gt;
    &lt;bean class=&quot;….gemfire.support.AnnotationBasedExpiration&quot; factory-method=&quot;forTimeToLive&quot;/&gt;
  &lt;/gfe:custom-entry-ttl&gt;
  &lt;gfe:custom-entry-tti ref=&quot;ttiExpiration&quot;/&gt;
&lt;/gfe:partitioned-region&gt;

&lt;bean id=&quot;ttiExpiration&quot; class=&quot;….gemfire.support.AnnotationBasedExpiration&quot; factory-method=&quot;forIdleTimeout&quot;&gt;
  &lt;constructor-arg ref=&quot;defaultExpirationAttributes&quot;/&gt;
&lt;/bean&gt;

&lt;bean id=&quot;defaultExpirationAttributes&quot; class=&quot;….ExpirationAttributes&quot;&gt;
  &lt;constructor-arg value=&quot;600&quot;/&gt;
  &lt;constructor-arg value=&quot;#{T(….ExpirationAction).DESTROY}&quot;/&gt;
&lt;/bean&gt;
</code></pre><p>请参阅参考指南以<a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/reference/html/#bootstrap:region:expiration">了解更多信息</a> 。接下来，通过注释添加了对存储库查询方法OQL扩展的支持：</p>
<pre><code class="prettyprint java">interface CustomerRepository implements CrudRepository&lt;Cutomer, Long&gt; {

  @Trace
  @Limit(25)
  @Import(&quot;org.exmple.Customer&quot;)
  @Hint(&quot;CustomerLastNameIdx&quot;)
  List&lt;Customer&gt; findByLastNameOrderByLastNameAsc(String lastName);
}
</code></pre><p><code>@Trace</code>启用单个OQL语句调试。 <code>@Limit</code>限制查询结果集中的结果数，并且<code>@Import</code>使应用程序能够区分名称相似的对象类型。例如，您的应用程序可能同时定义了<code>org.example.app.core.Customer</code>和<code>org.example.app.vendor.xyz.Customer</code>类型。有关更多详细信息，请参见GemFire的<a href="http://gemfire81.docs.pivotal.io/latest/userguide/index.html#developing/query_select/the_import_statement.html">文档</a> 。 <code>@Hint</code>启用OQL提示来标识适用于查询的索引。<a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/reference/html/#gemfire-repositories.oql-extension">在此处</a>了解有关OQL扩展的更多信息。</p><p>最后，Spring Data GemFire使用Spring Data GemFire XML数据命名空间提供对GemFire <a href="http://gemfire81.docs.pivotal.io/latest/userguide/index.html#managing/cache_snapshots/chapter_overview.html">缓存和区域快照的</a>支持：</p>
<pre><code class="prettyprint xml">&lt;gfe:partitioned-region id=&quot;Example&quot; persistent=&quot;false&quot; … /&gt;

&lt;gfe-data:snapshot-service id=&quot;exampleRegionSnapshotService&quot; region-ref=&quot;Example&quot;&gt;
  &lt;gfe-data:snapshot-import location=&quot;/path/to/import/example.snapshot&quot;/&gt;
  &lt;gfe-data:snapshot-export locator=&quot;/path/to/export/example.snapshot&quot;/&gt;
&lt;/gfe-data:snapshot-service&gt;
</code></pre><p>您可以了解有关Spring Data GemFire如何在导入，使用Spring时支持ZIP文件的更多信息<code>ApplicationEvents</code>触发导入和导出快照以及如何在<a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/reference/html/#bootstrap:snapshot">这里</a>适当过滤导入和导出的数据。</p><h2><a href="#spring-data-keyvalue-amp-map-based-repositories" class="anchor" name="spring-data-keyvalue-amp-map-based-repositories"></a>基于Spring Data KeyValue和Map的存储库</h2><p>自从我们被要求提供一种非常简单的方法以来，已经过去了很长时间<code>Map</code>基于Spring Data存储库的基础实现，用于各种目的（主要是测试）。这些请求最终以振兴<a href="https://docs.spring.io/spring-data/keyvalue/docs/1.0.0.RELEASE/reference/html/">KeyValue模块的</a>方式结束，此方式与以前存在的方式略有不同。</p><p>Spring Data KeyValue现在包含一个基本的<code>Map</code>基于库的存储库实现，默认情况下将使用Spring Expression Language（SpEL）来查询值，并基于其收集模块提供排序，分页和Querydsl集成。它还公开了专用的API，以允许键值存储在存储，检索和最重要的查询执行（如果需要）中利用存储特定的优化。</p><p>Spring Data KeyValue存储库使用的默认查询机制基于SpEL，并允许您定义和运行复杂的查询。这种方法在运行时显示出其真正的力量<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html#expressions-spel-compilation"><code>COMPILED</code>模式，</a>因为它可以有效地编译要在值上执行的过滤器表达式。另外，您也可以使用Querydsl表达式进行类型安全查询。</p>
<pre><code class="prettyprint java">@Configuration
@EnableMapRepositories(&quot;com.acme.repositories&quot;)
class AppConfig {}

@KeySpace(&quot;user&quot;)
class User {

  String @Id id;
  String firstname;
}

interface UserRepository extends CrudRepository&lt;User, String&gt; {
  List&lt;String&gt; findByFirstnameStartingWith(String firstname);
}
</code></pre><p>我们目前具有针对Ehcache， <a href="https://github.com/hazelcast-incubator/spring-data-integrations-commons/tree/develop">Hazelcast</a>和<a href="https://github.com/spring-projects/spring-data-aerospike">Aerospike的</a> API烹饪的扩展，并期待评估选项以集成Redis并可能移植一些Gemfire API来使用。</p><h2><a href="#what-rsquo-s-next" class="anchor" name="what-rsquo-s-next"></a>下一步是什么？</h2><p>接下来的是<a href="http://www.springone2gx.com/">位于华盛顿特区的SpringOne2GX-</a>我们很高兴在这里见到您-与团队联系，了解新功能并度过美好时光的最佳场所。同时，我们已经在为Fowler Release Train准备下一个服务版本，并开始为Hopper Release Train开发新功能（Sshh……我们将在<a href="https://2015.event.springone2gx.com/schedule/sessions/what_s_new_in_2015_for_spring_data.html">“ Spring Data的新功能？”中对Hopper进行一个简要介绍。在SpringOne上发言</a> ）。</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2227;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>