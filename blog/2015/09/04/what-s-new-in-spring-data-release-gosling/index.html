<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>What&#39;s New In Spring Data Release Gosling?</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="What&#39;s New In Spring Data Release Gosling?" />
<meta name="twitter:description" content="&lt;p&gt;Over 300 issues fixed across 12 projects makes it pretty hard to keep track on what has happened since the last release. So here’s a more detailed excerpt of some of the new features we’ve been cooking during the last iteration.&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;#ad-hoc-jpa-fetch-graphs&quot; class=&quot;anchor&quot; name=&quot;ad-hoc-jpa-fetch-graphs&quot;&gt;&lt;/a&gt;Ad-hoc JPA fetch graphs.&lt;/h2&gt;
&lt;p&gt;Since the Dijkstra release train we have been able to refer to the named entity graph declared on the entity through the &lt;code&gt;@EntityGraph&lt;/code&gt; annotation in JPA-backed repositories. In the example below this forces firstname and lastname to be loaded eagerly, while all others remain lazily loaded.&lt;/p&gt;
" />
<meta name="twitter:creator" content="@stroblchristoph" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=200" />

<meta property="og:title" content="What&#39;s New In Spring Data Release Gosling?" />
<meta property="og:image" content="https://gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=200" />
<meta property="og:description" content="&lt;p&gt;Over 300 issues fixed across 12 projects makes it pretty hard to keep track on what has happened since the last release. So here’s a more detailed excerpt of some of the new features we’ve been cooking during the last iteration.&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;#ad-hoc-jpa-fetch-graphs&quot; class=&quot;anchor&quot; name=&quot;ad-hoc-jpa-fetch-graphs&quot;&gt;&lt;/a&gt;Ad-hoc JPA fetch graphs.&lt;/h2&gt;
&lt;p&gt;Since the Dijkstra release train we have been able to refer to the named entity graph declared on the entity through the &lt;code&gt;@EntityGraph&lt;/code&gt; annotation in JPA-backed repositories. In the example below this forces firstname and lastname to be loaded eagerly, while all others remain lazily loaded.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2015-09-04 08:01:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">What&#39;s New In Spring Data Release Gosling?</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/christophstrobl">Christoph Strobl</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2015-09-04 08:01:00.0">September 04, 2015</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="2227" href="/blog/2015/09/04/what-s-new-in-spring-data-release-gosling#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>Over 300 issues fixed across 12 projects makes it pretty hard to keep track on what has happened since the last release. So here&rsquo;s a more detailed excerpt of some of the new features we&rsquo;ve been cooking during the last iteration.</p><h2><a href="#ad-hoc-jpa-fetch-graphs" class="anchor" name="ad-hoc-jpa-fetch-graphs"></a>Ad-hoc JPA fetch graphs.</h2><p>Since the Dijkstra release train we have been able to refer to the named entity graph declared on the entity through the <code>@EntityGraph</code> annotation in JPA-backed repositories. In the example below this forces firstname and lastname to be loaded eagerly, while all others remain lazily loaded.</p>
<pre><code class="prettyprint java">@Entity
@NamedEntityGraphs(
  @NamedEntityGraph(name = &quot;with-tags&quot;,
    attributeNodes = { @NamedAttributeNode(&quot;tags&quot;) }))
class Product {

  @ManyToMany
  Set&lt;Tag&gt; tags;

  // other properties omitted
}

interface ProductRepository extends Repository&lt;Customer, Long&gt; {

  @EntityGraph(&quot;with-tags&quot;)
  Product findOneById(Long id);
}
</code></pre><p>The Gosling release now takes our JPA 2.1 story one step forward, extending it to ad-hoc fetch graph definitions. By explicitly specifying properties via <code>@EntityGraph(attributePaths = …)</code> on the query method you don&rsquo;t need to have the <code>NamedEntityGraph</code> annotation on your entity.</p>
<pre><code class="prettyprint java">@Entity
class Product {

  @ManyToMany
  Set&lt;Tag&gt; tags;

  // other properties omitted
}

interface ProductRepository extends Repository&lt;Customer, Long&gt; {

  @EntityGraph(attributePaths = {&quot;tags&quot;})
  Product findOneById(Long id);
}
</code></pre><h2><a href="#querydsl-web-support" class="anchor" name="querydsl-web-support"></a>Querydsl web support</h2><p>The Spring Data web support already lets you declare parameters of type <code>Pageable</code> in your controller handler methods. The newly introduced Querydsl integration extends that to allow you to receive a ready to use <code>Predicate</code> derived directly from the HTTP request&rsquo;s query string. The feature is automatically enabled when <code>@EnableSpringDataWebSupport</code> is configured and Querydsl is found on the classpath.</p><p>If <code>Predicate</code> is used without further configuration we&rsquo;ll try to resolve the root type for <code>Predicate</code> resolution from the method&rsquo;s return type, although in most cases it might be better to explicitly declare the desired type reference via <code>@QuerydslPredicate(root = …)</code>. Having that in place, query string attributes are bound to matching properties of the type which creates e.g.</p>
<pre><code class="prettyprint java">QUser.user.firstname.eq(&quot;Dave&quot;).and(QUser.user.lastname.eq(&quot;Matthews&quot;)) 
</code></pre><p>from <code>?firstname=Dave&amp;lastname=Matthews</code> using the default property type dependent binding.</p>
<pre><code class="prettyprint java">@SpringBootApplication
public class Application {

  public static void main(String[] args) {
    SpringApplication.run(Application.class, args);
  }

  @Controller
  @RequiredArgsConstructor(onConstructor = @__(@Autowired))
  static class UserController {

    private final UserRepository repository;

    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)
    String index(Model model,
                 @QuerydslPredicate(root = User.class) Predicate predicate,
                 Pageable pageable) {

      model.addAttribute(&quot;users&quot;, repository.findAll(predicate, pageable));
      return &quot;index&quot;;
    }
  }
}
</code></pre><p>Now it does not always make sense to use the default (equals) binding, but rather a dedicated binding per property or a type specific one. To achieve this just override the defaults by providing a <code>QuerydslBinderCustomizer</code> that can either be registered via <code>@QuerydslPredicate(bindings = …)</code> or is simply implemented by to the repository.</p>
<pre><code class="prettyprint java">interface UserRepository extends CrudRepository&lt;User, String&gt;,
    QueryDslPredicateExecutor&lt;User&gt;,
    QuerydslBinderCustomizer&lt;QUser&gt; {

  // Query methods go here

  @Override
  default public void customize(QuerydslBindings bindings, QUser user) {

    bindings.bind(user.nationality).first(
      (path, value) -&gt; path.equalsIgnoreCase(value)); // 1
    bindings.bind(String.class).first(
      (StringPath path, String value) -&gt; path.containsIgnoreCase(value)); // 2
    bindings.excluding(user.password);
  }
}
</code></pre><p>As you can see we leverage Java 8 lambdas along side Querydsl&rsquo;s type-safe property references to define the binding for a dedicated property (1) or for all properties of a given type (2). Using <code>QuerydslBindings.excluding</code> allows you remove paths from being queryable.</p><p>Find a complete working example in the <a href="https://github.com/spring-projects/spring-data-examples/tree/master/web/querydsl">Spring Data examples repository</a> and check out the <a href="https://docs.spring.io/spring-data/jpa/docs/1.9.0.RELEASE/reference/html/#core.web.type-safe">reference documentation</a> for details.</p><h2><a href="#spring-data-rest" class="anchor" name="spring-data-rest"></a>Spring Data REST</h2><h3><a href="#querydsl-support" class="anchor" name="querydsl-support"></a>Querydsl support</h3><p>The Querydsl support introduced in Spring Data Commons (see <a href="#querydsl-web-support">above</a>) has been integrated into Spring Data REST. That means that you can filter your collection resources by appending simple property query parameters to the request URI.</p><p>In the Spring Data REST example exposing Starbucks store locations, note how StoreRepository now implements both <code>QueryDslPredicateExecutor</code> as well as <code>QuerydslBinderCustomizer&lt;QStore&gt;</code> just as described above.</p><p>The collection resource for stores exposed by Spring Data REST will let you then issue requests like these:</p>
<pre><code class="prettyprint bash">$ http :8080/api/stores?address.city=York

{
    &quot;_embedded&quot;: {
        &quot;stores&quot;: [
            {
                &quot;_links&quot;: {
                    …
                }, 
                &quot;address&quot;: {
                    &quot;city&quot;: &quot;New York&quot;, 
                    &quot;location&quot;: { &quot;x&quot;: -73.938421, &quot;y&quot;: 40.851 }, 
                    &quot;street&quot;: &quot;803 W 181st St&quot;, 
                    &quot;zip&quot;: &quot;10033-4516&quot;
                }, 
                &quot;name&quot;: &quot;Washington Hgts/181st St&quot;
            }, 
            {
                &quot;_links&quot;: {
                    …
                }, 
                &quot;address&quot;: {
                    &quot;city&quot;: &quot;New York&quot;, 
                    &quot;location&quot;: { &quot;x&quot;: -73.939822, &quot;y&quot;: 40.84135 }, 
                    &quot;street&quot;: &quot;4001 Broadway&quot;, 
                    &quot;zip&quot;: &quot;10032-1508&quot;
                }, 
                &quot;name&quot;: &quot;168th &amp; Broadway&quot;
            }, 
            …
        ]
    }, 
    &quot;_links&quot;: {
        …
    }, 
    &quot;page&quot;: {
        &quot;number&quot;: 0, 
        &quot;size&quot;: 20, 
        &quot;totalElements&quot;: 209, 
        &quot;totalPages&quot;: 11
    }
}
</code></pre><p>Note how only returns stores whose city ends with &ldquo;York&rdquo;, just as defined in the implementation of <code>QuerydslBinderCustomizer</code> in <code>StoresRepository</code>.</p><p>We&rsquo;re currently looking into options to advertise this querying mechanism more obviously, e.g. using template variables and even provide advanced mapping facilities to customize the request parameter names to be used.</p><h3><a href="#custom-hal-browser" class="anchor" name="custom-hal-browser"></a>Custom HAL Browser</h3><p>The Gosling release of Spring Data REST ships with an additional module that wraps Mike Kelly&rsquo;s <a href="https://github.com/mikekelly/hal-browser">HAL browser</a> and tweaks it with a few customizations to leverage the API metadata we expose. To use the browser with your application simply add the <code>spring-data-rest-hal-browser</code> module to your project and your API root will serve the browser for requests accepting <code>text/html</code>. The standard HAL responses are of course still served by default or if you use a JSON based <code>Accept</code> header.</p><p><a href="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/hal-browser.png"><br /><img src="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/hal-browser.png" alt="HAL browser" /></a></p>
<p style="text-align: center; font-size: 0.9em">Fig 1. - HAL Browser (click to enlarge)</p><p>While the Spring Data REST module makes it easy to add the browser to your app, it also tweaks the browser slightly. When you click the button to trigger a non-<code>GET</code> request, the browser would normally open a modal dialogue that expects some raw JSON input. While that&rsquo;s of course great if you know what you&rsquo;re doing, it&rsquo;s a bit error prone and not really convenient, as you have to know about the data structure the server expects.</p><p>Spring Data REST exposes JSON schema documents for the types exposed by the system leveraging the <code>profile</code> link relation which makes the schema generically discoverable without tying the discovery logic to Spring Data REST itself. The browser instance we ship will lookup that schema metadata and – if it can find some – hand this to JSON Editor to replace the default dialogue with a form completely derived from the JSON Schema.</p><p><a href="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/json-editor-post-form.png"><br /><img src="https://gist.githubusercontent.com/olivergierke/4d3683c12769211d97cb/raw/9d11209ea9840b42693854ba62f8a46bc9940f39/json-editor-post-form.png" alt="JSON Editor based POST form" /></a></p>
<p style="text-align: center; font-size: 0.9em">Fig 2. - JSON Editor based POST for (click to enlarge)</p><p>See how the form allows adding line items as the schema exposes it to be an array. The price and order date fields are marked as read-only, the location field allows choosing values from an enumeration with internationalized values.</p><p>The sample project can be found <a href="https://github.com/olivergierke/spring-restbucks">on GitHub</a>.</p><h3><a href="#internationalizing-links-and-enums" class="anchor" name="internationalizing-links-and-enums"></a>Internationalizing links and enums</h3><p>As you could see in the screenshots above the <code>restbucks:orders</code> link was accompanied by a human readable description. The descriptions are pulled from an optional resource bundle <code>rest-messages</code> using <code>_links.$rel.title</code> keys to define a readable value. The sample uses a <code>rest-messages.properties</code> as a fallback resource bundle but also contains a <code>rest-messages_de.properties</code> to return German labels for clients that send an <code>Accept-Language</code> header set to <code>de</code>.</p><p>The same resource bundle can be used to internationalize enum values so that they can be used on the client in a human readable manner. To not break existing applications, this has to be explicitly activated via <a href="https://docs.spring.io/spring-data/rest/docs/2.4.0.RELEASE/api/org/springframework/data/rest/core/config/RepositoryRestConfiguration.html#setEnableEnumTranslation-boolean-"><code>RepositoryRestConfiguration.setEnableEnumTranslation(…)</code></a>. Details about the translation can be configured on <a href="https://docs.spring.io/spring-data/rest/docs/2.4.0.RELEASE/api/org/springframework/data/rest/core/config/EnumTranslationConfiguration.html"><code>EnumTranslationConfiguration</code></a>.</p><h2><a href="#spring-data-gemfire-amp-apache-geode" class="anchor" name="spring-data-gemfire-amp-apache-geode"></a>Spring Data GemFire &amp; Apache Geode</h2><p>Support for Pivotal GemFire 8.1 and Apache Geode are the most notable additions to Spring Data GemFire 1.7. Pivotal GemFire was submitted to the <a href="https://wiki.apache.org/incubator/GeodeProposal">Apache Incubator</a> earlier this year and the Spring Data team responded quickly to include <a href="https://spring.io/blog/2015/06/12/spring-data-gemfire-supports-apache-geode">support</a> in Spring Data GemFire.</p><p>In addition, several other features were added to simplify the development of GemFire and Apache Geode applications using Spring. For instance, developers can now define application domain object specific expiration policies using annotations:</p>
<pre><code class="prettyprint java">@TimeToLiveExpiration(
  timeout = &quot;@expirationSettings[&#39;spel.defined.timeout&#39;]&quot; action=&quot;DESTROY&quot;)
@IdleTimeoutExpiration(
  timeout = &quot;1800&quot; action=&quot;${property.placeholder.defined.action}&quot;)
class ApplicationDomainObject { … }
</code></pre><p>The expiration-based annotations support both <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#expressions">SpEL</a> and Spring <a href="https://docs.spring.io/spring/docs/1.7.0.RELEASE/spring-framework-reference/htmlsingle/#beans-factory-placeholderconfigurer">Property Placeholder</a> values. To enable annotation-based expiration policies, you only need configure Spring Data GemFire&rsquo;s <a href="https://gemfire.docs.pivotal.io/latest/javadocs/japi/com/gemstone/gemfire/cache/CustomExpiry.html">CustomExpiry</a> implementation, <a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/api/org/springframework/data/gemfire/support/AnnotationBasedExpiration.html">AnnotationBasedExpiration</a>, on your GemFire regions for either, or both, TTL and TTI:</p>
<pre><code class="prettyprint xml">&lt;gfe:partitioned-region id=&quot;Example&quot; persistent=&quot;false&quot; …&gt;
  &lt;gfe:custom-entry-ttl&gt;
    &lt;bean class=&quot;….gemfire.support.AnnotationBasedExpiration&quot; factory-method=&quot;forTimeToLive&quot;/&gt;
  &lt;/gfe:custom-entry-ttl&gt;
  &lt;gfe:custom-entry-tti ref=&quot;ttiExpiration&quot;/&gt;
&lt;/gfe:partitioned-region&gt;

&lt;bean id=&quot;ttiExpiration&quot; class=&quot;….gemfire.support.AnnotationBasedExpiration&quot; factory-method=&quot;forIdleTimeout&quot;&gt;
  &lt;constructor-arg ref=&quot;defaultExpirationAttributes&quot;/&gt;
&lt;/bean&gt;

&lt;bean id=&quot;defaultExpirationAttributes&quot; class=&quot;….ExpirationAttributes&quot;&gt;
  &lt;constructor-arg value=&quot;600&quot;/&gt;
  &lt;constructor-arg value=&quot;#{T(….ExpirationAction).DESTROY}&quot;/&gt;
&lt;/bean&gt;
</code></pre><p>See the reference guide to <a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/reference/html/#bootstrap:region:expiration">learn more</a>. Next, support was added for repository query method OQL extensions via annotations:</p>
<pre><code class="prettyprint java">interface CustomerRepository implements CrudRepository&lt;Cutomer, Long&gt; {

  @Trace
  @Limit(25)
  @Import(&quot;org.exmple.Customer&quot;)
  @Hint(&quot;CustomerLastNameIdx&quot;)
  List&lt;Customer&gt; findByLastNameOrderByLastNameAsc(String lastName);
}
</code></pre><p><code>@Trace</code> enables individual OQL statement debugging. <code>@Limit</code> restrains the number of results in the query result set and <code>@Import</code> enables applications to distinguish between similarly named object types. For example, your application might define both <code>org.example.app.core.Customer</code> and <code>org.example.app.vendor.xyz.Customer</code> types. See GemFire&rsquo;s <a href="http://gemfire81.docs.pivotal.io/latest/userguide/index.html#developing/query_select/the_import_statement.html#concept_2E9F15B2FE9041238B54736103396BF7">doc</a> for more details. <code>@Hint</code> enables the use of OQL hints to identify indexes applicable to the query. Learn more about OQL extensions <a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/reference/html/#gemfire-repositories.oql-extension">here</a>.</p><p>Finally, Spring Data GemFire offers support for GemFire <a href="http://gemfire81.docs.pivotal.io/latest/userguide/index.html#managing/cache_snapshots/chapter_overview.html">Cache and Region Snapshots</a> using the Spring Data GemFire XML Data Namespace:</p>
<pre><code class="prettyprint xml">&lt;gfe:partitioned-region id=&quot;Example&quot; persistent=&quot;false&quot; … /&gt;

&lt;gfe-data:snapshot-service id=&quot;exampleRegionSnapshotService&quot; region-ref=&quot;Example&quot;&gt;
  &lt;gfe-data:snapshot-import location=&quot;/path/to/import/example.snapshot&quot;/&gt;
  &lt;gfe-data:snapshot-export locator=&quot;/path/to/export/example.snapshot&quot;/&gt;
&lt;/gfe-data:snapshot-service&gt;
</code></pre><p>You can learn more about how Spring Data GemFire supports ZIP files on import, the use of Spring <code>ApplicationEvents</code> to trigger import and export snapshots as well as how to appropriately filter data imported and exported <a href="https://docs.spring.io/spring-data-gemfire/docs/1.7.0.RELEASE/reference/html/#bootstrap:snapshot">here</a>.</p><h2><a href="#spring-data-keyvalue-amp-map-based-repositories" class="anchor" name="spring-data-keyvalue-amp-map-based-repositories"></a>Spring Data KeyValue &amp; Map based repositories</h2><p>It&rsquo;s been quite a long time since we&rsquo;ve been asked to provide a very simple <code>Map</code> based implementation for Spring Data repositories for various – mostly testing – purposes. The requests eventually concluded in revitalizing the <a href="https://docs.spring.io/spring-data/keyvalue/docs/1.0.0.RELEASE/reference/html/">KeyValue module</a> in a slightly different way than it existed in before.</p><p>Spring Data KeyValue now consists of a basic <code>Map</code> based repository implementation that will use Spring Expression Language (SpEL) for querying values by default, provide sorting, pagination and Querydsl integration based on its collection module. It also exposes dedicated APIs to allow key-value stores to leverage store specific optimizations in storage, retrieval and most importantly query execution if needed.</p><p>The default query mechanism used by Spring Data KeyValue repositories is based on SpEL and allows you to define and run complex queries. This approach shows off its real power when run in <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html#expressions-spel-compilation"><code>COMPILED</code> mode</a> as it effectively compiles the filter expressions to be executed on the values. Alternatively you also can use Querydsl expressions for typesafe querying.</p>
<pre><code class="prettyprint java">@Configuration
@EnableMapRepositories(&quot;com.acme.repositories&quot;)
class AppConfig {}

@KeySpace(&quot;user&quot;)
class User {

  String @Id id;
  String firstname;
}

interface UserRepository extends CrudRepository&lt;User, String&gt; {
  List&lt;String&gt; findByFirstnameStartingWith(String firstname);
}
</code></pre><p>We currently have extensions of that API cooking for Ehcache, <a href="https://github.com/hazelcast-incubator/spring-data-integrations-commons/tree/develop">Hazelcast</a> and <a href="https://github.com/spring-projects/spring-data-aerospike">Aerospike</a> and are looking forward to evaluate options to also integrate Redis and maybe port some of the Gemfire APIs to use that.</p><h2><a href="#what-rsquo-s-next" class="anchor" name="what-rsquo-s-next"></a>What&rsquo;s next?</h2><p>Up next is <a href="http://www.springone2gx.com/">SpringOne2GX in Washington, DC</a>- we&rsquo;d be happy to see you there - the best place to get in touch with the team, learn about new features and simply have a good time. Meanwhile we are already preparing the next service release for the Fowler Release Train and started working on new features for the Hopper release train (Sshh&hellip; We&rsquo;ll give a sneak peak on Hopper in the <a href="https://2015.event.springone2gx.com/schedule/sessions/what_s_new_in_2015_for_spring_data.html">“What’s new in Spring Data?” talk</a> at SpringOne).</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2227;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>