<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Getting Started with Bundlor</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Getting Started with Bundlor" />
<meta name="twitter:description" content="&lt;p&gt;As &lt;a href=&quot;http://blog.springsource.com/2009/03/18/our-plans-for-building-osgi-applications/&quot;&gt;Rob’s post&lt;/a&gt; points out, over the last few months we’ve learned quite a bit about how people want to manage their own OSGi applications.&lt;/p&gt;
&lt;p&gt;We found that some developers want to manage their own bundle manifests, but need a bit of help to automate the details such as specifying package versions across a range of imports. Other developers want to have manifests generated based on the content of their project and the dependencies specified in their build files. In addition, both kinds of developers need to work with existing libraries that do not have the necessary OSGi metadata that enable them to be used in an OSGi Service Platform.&lt;/p&gt;
" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=200" />

<meta property="og:title" content="Getting Started with Bundlor" />
<meta property="og:image" content="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=200" />
<meta property="og:description" content="&lt;p&gt;As &lt;a href=&quot;http://blog.springsource.com/2009/03/18/our-plans-for-building-osgi-applications/&quot;&gt;Rob’s post&lt;/a&gt; points out, over the last few months we’ve learned quite a bit about how people want to manage their own OSGi applications.&lt;/p&gt;
&lt;p&gt;We found that some developers want to manage their own bundle manifests, but need a bit of help to automate the details such as specifying package versions across a range of imports. Other developers want to have manifests generated based on the content of their project and the dependencies specified in their build files. In addition, both kinds of developers need to work with existing libraries that do not have the necessary OSGi metadata that enable them to be used in an OSGi Service Platform.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2009-03-20 14:44:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Getting Started with Bundlor</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/bhale">Ben Hale</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2009-03-20 14:44:00.0">March 20, 2009</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="214" href="/blog/2009/03/20/getting-started-with-bundlor#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>As <a href="http://blog.springsource.com/2009/03/18/our-plans-for-building-osgi-applications/">Rob&rsquo;s post</a> points out, over the last few months we&rsquo;ve learned quite a bit about how people want to manage their own OSGi applications.</p><p>We found that some developers want to manage their own bundle manifests, but need a bit of help to automate the details such as specifying package versions across a range of imports. Other developers want to have manifests generated based on the content of their project and the dependencies specified in their build files. In addition, both kinds of developers need to work with existing libraries that do not have the necessary OSGi metadata that enable them to be used in an OSGi Service Platform.</p><p>Bundlor provides a solution to all of these cases and is the tool that we&rsquo;ve been using internally for some time to manage the bundles published to the SpringSource Enterprise Bundle Repository. Bundlor automates the detection of dependencies and the creation of OSGi manifest directives for JARs after their creation. It takes as input a JAR and a template consisting of a superset of the standard OSGi manifest headers. It then analyses the source code and support files contained in the JAR, applies the template to the results, and generates a manifest.<br /><h2>The Templating Mechanism</h2><br />The Bundlor templating mechanism uses the standard Java manifest format and consists of a superset of the standard OSGi manifest headers. The following table lists all of the Bundlor specific manifest template headers and their usage.<br /><table border="0"><br /><thead><br /><tr><br /><th>Header</th><br /><th>Description</th><br /></tr><br /></thead><br /><tbody><br /><tr><br /><td><tt><span class="nowrap">Excluded-Exports</span></tt></td><br /><td>A comma-separated list of packages that must not be added to the manifest&rsquo;s <tt>Export-Package</tt> header.</td><br /></tr><br /><tr><br /><td><tt>Excluded-Imports</tt></td><br /><td>By default, Bundlor will add imports for every package which it determines is referenced by the code or special files in the jar. This header allows a comma-separated list of packages for which imports will not be generated to be specified.</td><br /></tr><br /><tr><br /><td><tt>Export-Template</tt></td><br /><td>By default, Bundlor versions all exported packages at the specified <tt>Bundle-Version</tt>. This header allows individual exported packages to be exported at different versions. E.g. <tt>Export-Template com.foo.*;version=&ldquo;1.5&rdquo;</tt> will cause any <tt>Export-Package</tt> entries for <tt>com.foo</tt> or its subpackages to be versioned at <tt>1.5</tt>.</td><br /></tr><br /><tr><br /><td><tt>Ignored-Existing-Headers</tt></td><br /><td>For cases where the JAR for which a manifest is being generated already contains an OSGi-compliant manifest, this header can be used to list headers in the original manifest which Bundlor should ignore.</td><br /></tr><br /><tr><br /><td><tt>Import-Template</tt></td><br /><td>This header is used to augment package imports that Bundlor generates via bytecode and special file analysis. Typically this will be to version the import and, in some cases, to mark them as optional. The header&rsquo;s value is in the form of a comma-separated list of package names and attributes.</td><br /></tr><br /></tbody></table><br />A wilcard &lsquo;<tt>*</tt>&rsquo; at the end of the package name is supported to match multiple packages. E.g. <tt>Import-Template: com.foo;version=[1.0,2.0);resolution:=optional,com.bar.*;version=&ldquo;[1.5,1.6)&rdquo;</tt> will cause any import generated for the <tt>com.foo</tt> package to be versioned at 1.0 inclusive to 2.0 exclusive and to be considered optional, and for any import of <tt>com.bar</tt> or its sub-packages to be versioned at 1.5 inclusive to 1.6 exclusive.</p><p>The following is an example Bundlor manifest template from the Spring Binding bundle showing the use of both wildcarding and explicit <tt>Import-Package</tt> statements.</p>
<pre><code class="prettyprint java">Bundle-ManifestVersion: 2
Bundle-SymbolicName: org.springframework.binding
Bundle-Name: Spring Binding
Bundle-Vendor: SpringSource
Import-Package:
 ognl;version=&quot;[2.6.9, 3.0.0)&quot;;resolution:=optional,
 org.jboss.el;version=&quot;[2.0.0, 3.0.0)&quot;;resolution:=optional
Import-Template:
 org.springframework.*;version=&quot;[2.5.4.A, 3.0.0)&quot;,
 org.apache.commons.logging;version=&quot;[1.1.1, 2.0.0)&quot;,
 javax.el;version=&quot;[2.1.0, 3.0.0)&quot;;resolution:=optional
</code></pre>
<h2>Detection Criteria</h2><p>Given a JAR file, Bundlor can detect candidate imports from a variety of sources. For a complete listing and examples of what can be detected, please see the <a rel="nofollow" href="http://static.springsource.org/s2-bundlor/1.0.x/user-guide/html">user guide</a>.</p><p>Bundlor scans for the following types<br /><ul><br /> <li>Java classes<br /><ul><br /> <li>Declared Type Superclass Types</li><br /> <li>Declared Type Implemented Interfaces Types</li><br /> <li>Declared Type Annotation Types</li><br /> <li>Declared Field Types</li><br /> <li>Declared Field Values Types</li><br /> <li>Declared Method Argument Types</li><br /> <li>Declared Method Return Types</li><br /> <li>Declared Method Exception Types</li><br /> <li>Declared Method Annotation Types</li><br /> <li>Reference To Field Owner Type</li><br /> <li>Reference To Field Type</li><br /> <li>Declared Local Variable Type</li><br /> <li>Reference to Method Declaring Type</li><br /> <li>Reference to Method Return Type</li><br /> <li>Reference to Method Argument Types</li><br /> <li>Allocation of Array Type</li><br /> <li>Declared Parameter Annotation Types</li><br /> <li>Caught Exception Type</li><br /> <li>Instantiated Type</li><br /> <li>Cast Target Type</li><br /> <li>Instanceof Type</li><br /> <li>Declared Constant Type</li><br /></ul><br /></li><br /> <li>Spring context configuration files<br /><ul><br /> <li>Specified class names and in the future will be improved with knowledge of Spring schemas</li><br /></ul><br /></li><br /> <li>JPA<br /><ul><br /> <li><tt>provider</tt> and <tt>class</tt> tags from the <tt>persistence.xml</tt> file</li><br /></ul><br /></li><br /> <li>Hibernate Mapping Files<br /><ul><br /> <li><tt>//class/@name</tt></li><br /> <li><tt>//id/@type</tt></li><br /> <li><tt>//generator/@class</tt></li><br /> <li><tt>//composite-id/@class</tt></li><br /> <li><tt>//discriminator/@type</tt></li><br /> <li><tt>//property/@type</tt></li><br /> <li><tt>//many-to-one/@class</tt></li><br /> <li><tt>//one-to-one/@class</tt></li><br /> <li><tt>//one-to-many/@class</tt></li><br /> <li><tt>//many-to-many/@class</tt></li><br /> <li><tt>//version/@type</tt></li><br /> <li><tt>//component/@class</tt></li><br /> <li><tt>//dynamic-component/@class</tt></li><br /> <li><tt>//subclass/@name</tt></li><br /> <li><tt>//joined-subclass/@name</tt></li><br /> <li><tt>//union-subclass/@name</tt></li><br /> <li><tt>//import/@class</tt></li><br /></ul><br /></li><br /> <li>Properties files<br /><ul><br /> <li>Classes defined as a property value</li><br /></ul><br /></li><br /></ul><br /><h2>Getting Bundlor</h2><br />Bundlor is available as a zip download from the <a href="http://www.springsource.org/bundlor">Bundlor page</a>. It is also accessible in the SpringSource Enterprise Bundle Repository as both Ivy and Maven artifacts. In addition, there is a detailed <a href="http://static.springsource.org/s2-bundlor/1.0.x/user-guide/html">user guide</a> available.<br /><h2>Using Bundlor</h2><br />Bundlor has four different forms<br /><ul><br /> <li>A plugin for Apache Maven</li><br /> <li>A Task for Apache ANT</li><br /> <li>A command line application</li><br /> <li>An Eclipse plugin (more information on a separate blog)</li><br /></ul><br />The following instructions only describe simple usage of Bundlor in each environment. Please see the <a href="http://static.springsource.org/s2-bundlor/1.0.x/user-guide/html">user guide</a> for complete information on the syntax for Bundlor.<br /><h3>Maven</h3><br />The Maven plugin allows Bundlor to be run from inside a Maven project. With this task a JAR can be transformed into a bundle or a manifest can be written out to the filesystem.</p><p>Add the SpringSource Enterprise Bundle Repository to the <tt>pom.xml</tt> file.</p>
<pre><code class="prettyprint xml">&lt;pluginRepositories&gt;
  &lt;pluginRepository&gt;
    &lt;id&gt;com.springsource.repository.bundles.milestone&lt;/id&gt;
    &lt;name&gt;SpringSource Enterprise Bundle Repository&lt;/name&gt;
    &lt;url&gt;http://repository.springsource.com/maven/bundles/milestone&lt;/url&gt;
  &lt;/pluginRepository&gt;
...
&lt;/pluginRepositories&gt;
</code></pre><p>Add the <tt>bundlor</tt> plugin to the <tt>pom.xml</tt> file</p>
<pre><code class="prettyprint xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;com.springsource.bundlor&lt;/groupId&gt;
      &lt;artifactId&gt;com.springsource.bundlor.maven&lt;/artifactId&gt;
      &lt;version&gt;1.0.0.M2&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;bundlor&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;transform&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  ...
  &lt;/plugins&gt;
...
&lt;/build&gt;
</code></pre><p>Finally, build a bundle with the package command.<br /><pre>mvn install package</pre><br /><h3>ANT</h3><br />he ANT task allows Bundlor to be run from inside any ANT based build system. With this task a JAR can be transformed into a bundle.</p><p>To run Bundlor from inside of ANT, you start by defining a <tt>bundlor</tt> namespace.</p>
<pre><code class="prettyprint xml">&lt;project name=&quot;bundlor-sample-ant&quot;
    xmlns:bundlor=&quot;antlib:com.springsource.bundlor.ant&quot;&gt;
</code></pre><p>Then you import the bundlor task into the build.</p>
<pre><code class="prettyprint xml">&lt;target name=&quot;bundlor.init&quot;&gt;
  &lt;taskdef resource=&quot;com/springsource/bundlor/ant/antlib.xml&quot;
      uri=&quot;antlib:com.springsource.bundlor.ant&quot;&gt;
    &lt;classpath id=&quot;bundlor.classpath&quot;&gt;
      &lt;fileset dir=&quot;${bundlor.home}/dist&quot;/&gt;
      &lt;fileset dir=&quot;${bundlor.home}/lib&quot;/&gt;
    &lt;/classpath&gt;
  &lt;/taskdef&gt;
&lt;/target&gt;
</code></pre><p>Finally, use the <tt>bundlor</tt> task.</p>
<pre><code class="prettyprint xml">&lt;bundlor:bundlor
    bundlePath=&quot;${basedir}/org.springframework.integration.jar&quot;
    outputPath=&quot;${basedir}/target/org.springframework.integration.jar&quot;
    bundleVersion=&quot;1.0.2.BUILD-${timestamp}&quot;
    manifestTemplatePath=&quot;${basedir}/template.mf&quot;/&gt;
</code></pre>
<h3>Command Line</h3><p>The command line interface is a quick way to use a manifest template to either show the Bundlor-generated OSGi manifest for a bundle or actually transform the bundle.</p><p>To run the Bundlor from the command line change directory to the <tt>$BUNDLOR_HOME/bin</tt> directory and run either <tt>bundlor.sh</tt> or <tt>bundlor.bat</tt>.<br /><pre>% ./bundlor.sh transform \<br />&ndash;bundle ./org.springframework.integration.jar \<br />&ndash;manifest ./template.mf \<br />&ndash;outputfile ./target/org.springframework.integration.jar</p><p>Transformed bundle written to ./target/org.springframework.integration.jar<br />%</pre><br /><h2>Future Bundlor</h2><br />Bundlor is a new product and has a lot of room to grow. Bundlor is now using Scrum for planning which we hope to give the community more visibility into the development process. The current sprint and release backlogs are available on the <a href="https://issuetracker.springsource.com/browse/BNDLR">Bundlor JIRA</a>. The future path of Bundlor is determined by our users, so please take the time to vote on existing issues and create new issues for things that are not currently covered by the backlog.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 214;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>