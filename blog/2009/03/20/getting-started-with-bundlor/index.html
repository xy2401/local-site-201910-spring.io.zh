<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Bundlor入门</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Getting Started with Bundlor">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=200" http:="" ="" blog.springsource.com="" 2009="" 03="" 18="" our-plans-for-building-osgi-applications="" ="=">Rob’s post points out, over the last few months we’ve learned quite a bit about how people want to manage their own OSGi applications.
<p>We found that some developers want to manage their own bundle manifests, but need a bit of help to automate the details such as specifying package versions across a range of imports. Other developers want to have manifests generated based on the content of their project and the dependencies specified in their build files. In addition, both kinds of developers need to work with existing libraries that do not have the necessary OSGi metadata that enable them to be used in an OSGi Service Platform.</p>
" > <meta>

<meta property="og:title" content="Getting Started with Bundlor">
<meta property="og:image" content="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=200">
<meta property="og:type" content="article" http:="" ="" blog.springsource.com="" 2009="" 03="" 18="" our-plans-for-building-osgi-applications="" ="=">Rob’s post points out, over the last few months we’ve learned quite a bit about how people want to manage their own OSGi applications.
<p>We found that some developers want to manage their own bundle manifests, but need a bit of help to automate the details such as specifying package versions across a range of imports. Other developers want to have manifests generated based on the content of their project and the dependencies specified in their build files. In addition, both kinds of developers need to work with existing libraries that do not have the necessary OSGi metadata that enable them to be used in an OSGi Service Platform.</p>
" > <meta>
<meta property="og:article:published_time" content="2009-03-20 14:44:00.0">
</head>
<body >

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Bundlor入门</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/329c22b36844c1d9c698d5e9b6709dc5?s=20&d=mm"> <a class="author" rel="author" href="/team/bhale">本·黑尔</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2009-03-20 14:44:00.0">2009年3月20日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2009/03/20/getting-started-with-bundlor#disqus_thread" data-disqus-identifier="214">
</a></div>
</div>
</header>
<div class="blog--post"><p>正如<a href="http://blog.springsource.com/2009/03/18/our-plans-for-building-osgi-applications/">Rob的帖子所</a>指出的那样，在过去的几个月中，我们已经了解了很多有关人们如何管理自己的OSGi应用程序的知识。</p><p>我们发现有些开发人员想要管理自己的捆绑清单，但是需要一些帮助来自动化细节，例如在一系列导入中指定软件包版本。其他开发人员希望根据他们的项目内容和在其构建文件中指定的依赖项生成清单。此外，两种开发人员都需要使用现有的库，这些库不具有使它们能够在OSGi服务平台中使用的必要OSGi元数据。</p><p>Bundlor为所有这些情况提供了解决方案，并且是我们内部使用了一段时间的工具，用于管理发布到SpringSource Enterprise Bundle Repository的bundle。在创建JAR之后，Bundlor可以自动进行依赖关系的检测和OSGi清单指令的创建。它以JAR和由标准OSGi清单标头的超集组成的模板为输入。然后，它分析JAR中包含的源代码和支持文件，将模板应用于结果，并生成清单。<br></p><h2>模板机制</h2><br>Bundlor模板机制使用标准Java清单格式，并且由标准OSGi清单头的超集组成。下表列出了所有Bundlor特定清单模板标头及其用法。<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><table border="0"><thead><tr><th>标头</th><th>描述</th></tr></thead><tbody><tr><td><tt><span class="nowrap">排除在外</span></tt></td><td>逗号分隔的软件包列表，不能添加到清单的<tt>Export-Package</tt>标头中。</td></tr><tr><td><tt>排除进口</tt></td><td>默认情况下，Bundlor将为它确定由jar中的代码或特殊文件引用的每个程序包添加导入。此标头允许指定一个逗号分隔的软件包列表，对于这些软件包，不会为其生成导入。</td></tr><tr><td><tt>导出模板</tt></td><td>默认情况下，Bundlor在指定的<tt>Bundle-Version</tt>中对所有导出的软件包进行<tt>版本控制</tt> 。此标头允许以不同版本导出单个导出的软件包。例如， <tt>Export-Template com.foo。*; version =“ 1.5”</tt>将导致<tt>com.foo</tt>或其子包的所有<tt>Export-Package</tt>条目版本为<tt>1.5</tt> 。</td></tr><tr><td><tt>忽略现有标题</tt></td><td>对于为其生成清单的JAR已经包含与OSGi兼容的清单的情况，此标头可用于列出Bundlor应忽略的原始清单中的标头。</td></tr><tr><td><tt>导入模板</tt></td><td>此标头用于增强Bundlor通过字节码和特殊文件分析生成的包导入。通常，这将是对导入进行版本控制，在某些情况下，将其标记为可选。标头的值采用软件包名称和属性的逗号分隔列表的形式。</td></tr></tbody></table><br>支持在软件包名称末尾使用通配符“ <tt>*</tt> ”来匹配多个软件包。例如<tt>Import-Template：com.foo; version = [1.0,2.0）; resolution：= optional，com.bar。*; version =“ [1.5,1.6）”</tt>将导致为<tt>com.foo</tt>软件包生成的任何导入版本从1.0（包括1.0）到2.0（包括），并被视为可选，对于任何<tt>com.bar</tt>或其子包的导入，版本从1.5（包括）到1.6（包括）。<p></p><p>以下是Spring Binding捆绑包中的示例Bundlor清单模板，显示了通配符和显式<tt>Import-Package</tt>语句的使用。</p>
<pre><code class="prettyprint java">Bundle-ManifestVersion: 2
Bundle-SymbolicName: org.springframework.binding
Bundle-Name: Spring Binding
Bundle-Vendor: SpringSource
Import-Package:
 ognl;version=&quot;[2.6.9, 3.0.0)&quot;;resolution:=optional,
 org.jboss.el;version=&quot;[2.0.0, 3.0.0)&quot;;resolution:=optional
Import-Template:
 org.springframework.*;version=&quot;[2.5.4.A, 3.0.0)&quot;,
 org.apache.commons.logging;version=&quot;[1.1.1, 2.0.0)&quot;,
 javax.el;version=&quot;[2.1.0, 3.0.0)&quot;;resolution:=optional
</code></pre>
<h2>检测标准</h2><p>给定一个JAR文件，Bundlor可以检测来自各种来源的候选导入。有关可检测到的内容的完整列表和示例，请参阅<a rel="nofollow" href="http://static.springsource.org/s2-bundlor/1.0.x/user-guide/html">用户指南</a> 。</p><p>Bundlor扫描以下类型<br></p><ul><br> <li>Java类<br><ul><br> <li>声明的类型超类类型</li><br> <li>声明的类型实现的接口类型</li><br> <li>声明的类型注释类型</li><br> <li>声明的字段类型</li><br> <li>声明的字段值类型</li><br> <li>声明的方法参数类型</li><br> <li>声明的方法返回类型</li><br> <li>声明的方法异常类型</li><br> <li>声明的方法注释类型</li><br> <li>引用字段所有者类型</li><br> <li>引用字段类型</li><br> <li>声明的局部变量类型</li><br> <li>参考方法声明类型</li><br> <li>引用方法返回类型</li><br> <li>引用方法参数类型</li><br> <li>数组类型的分配</li><br> <li>声明的参数注释类型</li><br> <li>捕获的异常类型</li><br> <li>实例化类型</li><br> <li>投放目标类型</li><br> <li>类型实例</li><br> <li>声明的常量类型</li><br></ul><br></li><br> <li>Spring上下文配置文件<br><ul><br> <li>指定的类名以及将来将通过Spring模式的知识得到改进</li><br></ul><br></li><br> <li>JPA<br><ul><br> <li><tt>persistence.xml</tt>文件中的<tt>提供者</tt>和<tt>类</tt>标记</li><br></ul><br></li><br> <li>休眠映射文件<br><ul><br> <li><tt>//班级名称</tt></li><br> <li><tt>// id / @ type</tt></li><br> <li><tt>//发电机/ @ class</tt></li><br> <li><tt>// composite-id / @ class</tt></li><br> <li><tt>// discriminator / @ type</tt></li><br> <li><tt>//财产种类</tt></li><br> <li><tt>//多对一/ @ class</tt></li><br> <li><tt>//一对一/ @ class</tt></li><br> <li><tt>//一对多/ @ class</tt></li><br> <li><tt>//多对多/ @ class</tt></li><br> <li><tt>//版本/ @类型</tt></li><br> <li><tt>// component / @ class</tt></li><br> <li><tt>// dynamic-component / @ class</tt></li><br> <li><tt>//子类/ @名称</tt></li><br> <li><tt>// joined-subclass / @名称</tt></li><br> <li><tt>// union-subclass / @ name</tt></li><br> <li><tt>//导入/ @ class</tt></li><br></ul><br></li><br> <li>属性文件<br><ul><br> <li>定义为属性值的类</li><br></ul><br></li><br></ul><br><h2>获得邦德尔</h2><br>Bundlor可从<a href="http://www.springsource.org/bundlor">Bundlor页面</a>以zip下载的<a href="http://www.springsource.org/bundlor">形式获得</a> 。在SpringSource Enterprise Bundle仓库中也可以将它作为Ivy和Maven工件进行访问。此外，还有详细的<a href="http://static.springsource.org/s2-bundlor/1.0.x/user-guide/html">用户指南</a> 。<br><h2>使用Bundlor</h2><br>Bundlor有四种不同形式<br><ul><br> <li>Apache Maven的插件</li><br> <li>Apache ANT的任务</li><br> <li>命令行应用程序</li><br> <li>Eclipse插件（更多信息，请参见单独的博客）</li><br></ul><br>以下说明仅描述在每种环境中Bundlor的简单用法。请参阅<a href="http://static.springsource.org/s2-bundlor/1.0.x/user-guide/html">用户指南</a>以获取有关Bundlor语法的完整信息。<br><h3>马文</h3><br>Maven插件允许Bundlor从Maven项目内部运行。通过此任务，可以将JAR转换为束，或者可以将清单写出到文件系统中。<p></p><p>将SpringSource Enterprise Bundle存储库添加到<tt>pom.xml</tt>文件。</p>
<pre><code class="prettyprint xml">&lt;pluginRepositories&gt;
  &lt;pluginRepository&gt;
    &lt;id&gt;com.springsource.repository.bundles.milestone&lt;/id&gt;
    &lt;name&gt;SpringSource Enterprise Bundle Repository&lt;/name&gt;
    &lt;url&gt;http://repository.springsource.com/maven/bundles/milestone&lt;/url&gt;
  &lt;/pluginRepository&gt;
...
&lt;/pluginRepositories&gt;
</code></pre><p>将<tt>Bundlor</tt>插件添加到<tt>pom.xml</tt>文件</p>
<pre><code class="prettyprint xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;com.springsource.bundlor&lt;/groupId&gt;
      &lt;artifactId&gt;com.springsource.bundlor.maven&lt;/artifactId&gt;
      &lt;version&gt;1.0.0.M2&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;bundlor&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;transform&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  ...
  &lt;/plugins&gt;
...
&lt;/build&gt;
</code></pre><p>最后，使用package命令构建一个包。<br></p><pre>mvn install package</pre><br><h3>蚂蚁</h3><br>ANT任务允许Bundlor在任何基于ANT的构建系统中运行。通过此任务，可以将JAR转换为捆绑包。<p></p><p>要从ANT内部运行Bundlor，首先要定义一个<tt>Bundlor</tt>名称空间。</p>
<pre><code class="prettyprint xml">&lt;project name=&quot;bundlor-sample-ant&quot;
    xmlns:bundlor=&quot;antlib:com.springsource.bundlor.ant&quot;&gt;
</code></pre><p>然后，将Bundlor任务导入到构建中。</p>
<pre><code class="prettyprint xml">&lt;target name=&quot;bundlor.init&quot;&gt;
  &lt;taskdef resource=&quot;com/springsource/bundlor/ant/antlib.xml&quot;
      uri=&quot;antlib:com.springsource.bundlor.ant&quot;&gt;
    &lt;classpath id=&quot;bundlor.classpath&quot;&gt;
      &lt;fileset dir=&quot;${bundlor.home}/dist&quot;/&gt;
      &lt;fileset dir=&quot;${bundlor.home}/lib&quot;/&gt;
    &lt;/classpath&gt;
  &lt;/taskdef&gt;
&lt;/target&gt;
</code></pre><p>最后，使用<tt>Bundlor</tt>任务。</p>
<pre><code class="prettyprint xml">&lt;bundlor:bundlor
    bundlePath=&quot;${basedir}/org.springframework.integration.jar&quot;
    outputPath=&quot;${basedir}/target/org.springframework.integration.jar&quot;
    bundleVersion=&quot;1.0.2.BUILD-${timestamp}&quot;
    manifestTemplatePath=&quot;${basedir}/template.mf&quot;/&gt;
</code></pre>
<h3>命令行</h3><p>命令行界面是使用清单模板显示Bundlor为捆绑软件生成的OSGi清单或实际转换捆绑软件的快速方法。</p><p>要从命令行运行Bundlor，请将目录更改为<tt>$ BUNDLOR_HOME / bin</tt>目录，然后运行<tt>bundlor.sh</tt>或<tt>bundlor.bat</tt> 。<br></p><pre>% ./bundlor.sh transform \<br />&ndash;bundle ./org.springframework.integration.jar \<br />&ndash;manifest ./template.mf \<br />&ndash;outputfile ./target/org.springframework.integration.jar</p><p>Transformed bundle written to ./target/org.springframework.integration.jar<br />%</pre><br><h2>未来邦德</h2><br>Bundlor是一种新产品，还有很大的增长空间。Bundlor现在正在使用Scrum进行计划，我们希望该计划使社区对开发过程有更多的了解。<a href="https://issuetracker.springsource.com/browse/BNDLR">Bundlor JIRA</a>提供了当前的sprint和版本积压。 Bundlor的未来之路取决于我们的用户，因此，请花点时间对现有问题进行表决，并为积压未解决的问题创建新问题。<p></p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 214;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>