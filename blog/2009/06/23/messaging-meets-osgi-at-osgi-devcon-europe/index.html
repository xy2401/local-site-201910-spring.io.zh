<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>消息在OSGi DevCon欧洲会见OSGi</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Messaging meets OSGi at OSGi DevCon Europe">
<meta name="twitter:description" content="<p>Yesterday I was speaking at OSGi DevCon Europe about using Spring Integration and dm Server to tackle common problems in large applications in a pragmatic way. Before and after my session I talked to various people that liked to have a little more information about these ideas. This blog will give an overview of what I talked about.</p>
<p>I’ll jump right in with a summary of the presentation.</p>
<p>Any project will grow during its lifetime of active development. Usually developers add features and fix problems raised by the product owners by adding code. This process will naturally grow the code base. While the source grows the maintenance and fixing bugs typically gets harder. If not dealt with this process will ultimately lead to something I call Code Supernova. This uncontrolled growth, and eventual collapse, can be countered by proper modularization, and OSGi is one of the more compelling medicines currently available.</p>
">

<meta property="og:title" content="Messaging meets OSGi at OSGi DevCon Europe">
<meta property="og:description" content="<p>Yesterday I was speaking at OSGi DevCon Europe about using Spring Integration and dm Server to tackle common problems in large applications in a pragmatic way. Before and after my session I talked to various people that liked to have a little more information about these ideas. This blog will give an overview of what I talked about.</p>
<p>I’ll jump right in with a summary of the presentation.</p>
<p>Any project will grow during its lifetime of active development. Usually developers add features and fix problems raised by the product owners by adding code. This process will naturally grow the code base. While the source grows the maintenance and fixing bugs typically gets harder. If not dealt with this process will ultimately lead to something I call Code Supernova. This uncontrolled growth, and eventual collapse, can be countered by proper modularization, and OSGi is one of the more compelling medicines currently available.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2009-06-23 09:10:00.0">
</head>
<body >

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">消息在OSGi DevCon欧洲会见OSGi</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="null?s=20&d=mm"> <span class="author">伊文·富尔德</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2009-06-23 09:10:00.0">2009年6月23日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2009/06/23/messaging-meets-osgi-at-osgi-devcon-europe#disqus_thread" data-disqus-identifier="248">
</a></div>
</div>
</header>
<div class="blog--post"><p>昨天我在OSGi DevCon Europe上发表了有关使用Spring Integration和dm Server来以务实的方式解决大型应用程序中常见问题的演讲。在会议之前和之后，我与各种人进行了交谈，这些人喜欢对这些想法有更多的了解。该博客将概述我所谈论的内容。</p><p>我将直接介绍演示文稿。</p><p>任何项目都将在其积极开发的生命周期中成长。通常，开发人员通过添加代码来添加功能并解决产品所有者提出的问题。这个过程自然会增加代码库。随着源代码的增长，维护和修复错误通常会变得更加困难。如果不加以处理，这个过程最终会导致我称之为代码超新星的事情。这种不受控制的增长以及最终的崩溃，可以通过适当的模块化来解决，OSGi是目前可用的更具吸引力的药物之一。</p><p>我谈论的第二个问题是单线程故障。在像Tomcat这样的servlet容器中，使用线程池为客户端提供服务可以缓解这种情况，但是如果单个请求代表一项繁重的工作，那么在单个线程中运行该请求就很浪费。对于更昂贵的服务调用，您需要划分工作。同样，在以批处理或中间件为重点的系统中，您也不会奢侈地依靠Web容器为您执行线程管理，因此您将不得不自己解决问题或使用良好的框架。</p><p>第三，模块化将负面影响系统的响应时间。对于引入网络边界的模块化尤其如此。即使没有延迟，服务调用的结果也可能具有许多后续步骤，以至于在呈现响应之前等待它花费的时间太长。</p><p>后两个问题通过消息传递解决，而OSGi在使引入的网络延迟降至最低方面起着重要作用。</p><p>如果您想获得一些背景知识，请查看演示文稿。<br></p><div id="__ss_1624045" style="width:425px;text-align:left"><a href="http://www.slideshare.net/iweinfuld/os-gispring-integration?type=powerpoint" title="Os Gi + Spring集成" style="font:14px Helvetica,Arial,Sans-serif;display:block;margin:12px 0 3px 0;text-decoration:underline">Os Gi + Spring集成</a><object width="425" height="355" style="margin:0px"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=osgispringintegration-090623013348-phpapp02&stripped_title=os-gispring-integration"><param name="allowFullScreen" value="true"><param name="allowScriptAccess" value="always"><embed src="https://static.slidesharecdn.com/swf/ssplayer2.swf?doc=osgispringintegration-090623013348-phpapp02&stripped_title=os-gispring-integration" type="application/x-shockwave-flash" width="425" height="355" allowscriptaccess="always" allowfullscreen="true"></object><div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px">从<a href="http://www.slideshare.net/iweinfuld" style="text-decoration:underline">Iwein Fuld</a>查看更多<a href="http://www.slideshare.net/" style="text-decoration:underline">主题演讲</a> 。</div></div><p></p><p>我已经完成了一个系统（简单）示例的演示，并演示了如何使用SpringSource Tool Suite，dm Server和Spring Integration开发该系统。我已经在之前的博客中详细介绍了该想法（请参阅<a href="http://blog.springsource.com/2009/02/27/spring-integration-on-dm-server/">dm Server上的Spring Integration</a> ），因此在此不再赘述。我选择的域与我当时使用的城镇发布者不同。那是关于一辆公共汽车，有一个司机和一些乘客……我已经被告知好几次了，也应该有一个严肃的例子，但是我似乎无法帮助自己。也许<i>您</i>可以成为实施伪造的股票交易系统并将其提交给Spring Integration示例的人？无论如何，我还是很喜欢进行演示，甚至还有Twitter！</p><p>只需几段代码，您就可以构建自己的Twitter集成。我以前已经看过有关此技术的现有技术，但是无论如何，我再也找不到它了。推特：</p>
<pre><code class="prettyprint java"><br />import java.util.concurrent.atomic.AtomicInteger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.integration.annotation.MessageEndpoint;
import twitter4j.Twitter;
import twitter4j.TwitterException;

@MessageEndpoint
public class Twitterer {
	@Autowired
	Twitter twitter;

	private AtomicInteger counter = new AtomicInteger(0);

	public void tweet(String tweet) {
		if (counter.incrementAndGet() &lt; 3) {
			try {
				twitter.updateStatus(&quot;Announcement: \&quot; &quot; + 
						tweet + &quot;\&quot;&quot;);
			} catch (TwitterException e) {
				throw new RuntimeException(e);
			}
		}
	}
}
</code></pre><p>在应用程序上下文中（为简洁起见，省略了命名空间）：</p>
<pre><code class="prettyprint xml"><br />	&lt;integration:outbound-channel-adapter ref=&quot;twitterer&quot;
		method=&quot;tweet&quot; channel=&quot;intercom&quot; /&gt;

	&lt;context:property-placeholder 
		location=&quot;classpath:/passenger/twitter.properties&quot; /&gt;

	&lt;beans:bean id=&quot;twitter&quot; class=&quot;twitter4j.Twitter&quot; 
		p:userId=&quot;${twitter.user}&quot;
		p:password=&quot;${twitter.password}&quot; /&gt;
</code></pre><p>Twitterer负责发推文。您实际上可以用消息过滤器替换它，但是我不建议直接将通道适配器附加到twitter4j。Twitter.updateStatus（..）方法。如果您想看看会发生什么，请看<a href="https://twitter.com/iwrobot">这里</a> 。</p><p>如果您想知道twitter4j包在哪里，我只是使用SpringSource Tool Suite中的Bundlor集成自己创建的。我花了不到20分钟的时间， <a href="http://blog.springsource.com/2009/03/26/using-bundlor-in-eclipse/">完全没有痛苦</a> 。显然，这存在<a href="https://issuetracker.springsource.com/browse/EBR-228">一个问题</a> ，因此将来会将其添加到我们的存储库中。</p><p>希望您能与这些想法联系起来，并在我不完整的地方添加到它们中。我现在要航行，所以我的回复将不得不等到我完成后再进行，但是不要让它阻碍您前进。反馈一如既往地受到赞赏。</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 248;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>