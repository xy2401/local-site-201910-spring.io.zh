<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>宣布DM Server 2.0 M1</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Announcing dm Server 2.0 M1">
<meta name="twitter:description" content="<p>Development work on dm Server 2.0 has been fully underway for some time now and I’m pleased to announce that the first milestone is available for download. Downloads are <a href=" http:="" ="" www.springsource.org="" dmserve="="></head><body dir="ltr">available from our home page. You can find more information about the features in this release and the coming release in my <a href="http://blog.springsource.com/2009/04/01/springsource-dm-server-roadmap/">previous entry</a>.
<p>In this blog entry I’ll outline:</p>
<ul> 
 <li>what is new in 2.0 M1</li> 
 <li>building dm Server directly from SVN</li> 
</ul>
<h2>We're using Scrum</h2>
<p>For the development of the 2.0 release, the dm Server team have adopted Scrum. You can see our current sprint and release backlogs in our <a href="https://issuetracker.springsource.com/browse/DMS">JIRA</a>. As ever, the development of dm Server is driven by the requirements of our users. If you see an item on the backlog that you’d like us to implement, please take the time to vote for it. Equally, if you’d like dm Server to be able to do something that isn’t currently covered by an item on the backlog, please open a new user story describing what you’d like to be able to do.</p>
">

<meta property="og:title" content="Announcing dm Server 2.0 M1">
<meta property="og:description" content="<p>Development work on dm Server 2.0 has been fully underway for some time now and I’m pleased to announce that the first milestone is available for download. Downloads are <a href=" http:="" ="" www.springsource.org="" dmserve="=">available from our home page. You can find more information about the features in this release and the coming release in my <a href="http://blog.springsource.com/2009/04/01/springsource-dm-server-roadmap/">previous entry</a>.
<p>In this blog entry I’ll outline:</p>
<ul> 
 <li>what is new in 2.0 M1</li> 
 <li>building dm Server directly from SVN</li> 
</ul>
<h2>We're using Scrum</h2>
<p>For the development of the 2.0 release, the dm Server team have adopted Scrum. You can see our current sprint and release backlogs in our <a href="https://issuetracker.springsource.com/browse/DMS">JIRA</a>. As ever, the development of dm Server is driven by the requirements of our users. If you see an item on the backlog that you’d like us to implement, please take the time to vote for it. Equally, if you’d like dm Server to be able to do something that isn’t currently covered by an item on the backlog, please open a new user story describing what you’d like to be able to do.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2009-04-02 16:32:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">宣布DM Server 2.0 M1</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="null?s=20&d=mm"> <span class="author">罗伯·哈罗普</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2009-04-02 16:32:00.0">2009年4月2日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2009/04/02/announcing-dm-server-2-0-m1#disqus_thread" data-disqus-identifier="221">
</a></div>
</div>
</header>
<div class="blog--post"><p>dm Server 2.0的开发工作已经进行了一段时间，我很高兴地宣布，第一个里程碑可以下载。<a href="http://www.springsource.org/dmserver">可从我们的主页</a>下载。您可以在我的<a href="http://blog.springsource.com/2009/04/01/springsource-dm-server-roadmap/">上一篇文章中</a>找到有关此版本和即将发布的功能的更多信息。</p><p>在此博客文章中，我将概述：</p>
<ul>
<li>2.0 M1中有什么新功能</li>
<li>直接从SVN构建dm服务器</li>
</ul>
<h2>我们正在使用Scrum</h2><p>对于2.0版本的开发，dm Server团队采用了Scrum。您可以在<a href="https://issuetracker.springsource.com/browse/DMS">JIRA中</a>查看我们当前的冲刺和发布积压。与以往一样，dm Server的开发是由我们用户的需求驱动的。如果您在待办事项列表上看到您希望我们实施的项目，请花点时间投票。同样，如果您希望dm Server能够执行积压中的某个项目当前未涵盖的操作，请打开一个新的用户案例，描述您希望执行的操作。</p>
<h2>新的和值得注意的</h2>
<h4>对计划的初步支持</h4><p>计划与PAR类似，因为它们是描述捆绑在一起作为应用程序一起加载的集合的一种方式。它们的不同之处在于，计划是一个简单的XML文件，该文件定义了工件的集合，而不是实际包含它们。在此里程碑中，初步支持计划，使您能够创建与PAR文件具有相同语义的计划。</p><p>计划文件的语法非常简单。外层<strong><plan></plan></strong>标签定义<strong>名称</strong>和<strong>版本</strong> ，以及范围和原子性要求。（对于此里程碑，仅支持范围内和原子范围内的计划）。在 - 的里面<strong><plan></plan></strong>标签至少是一个<strong><artifact></artifact></strong>标记，用于定义计划中工件的<strong>类型</strong> ， <strong>名称</strong>和<strong>版本</strong> 。</p>
<pre><code class="prettyprint xml"><br><?xml version="1.0" encoding="UTF-8"?>
<plan name="multi-artifact.plan" version="1.0.0" scoped="true" atomic="true"
        xmlns="http://www.springsource.org/schema/dm-server/plan"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
            http://www.springsource.org/schema/dm-server/plan 
            http://www.springsource.org/schema/dm-server/plan/springsource-dm-server-plan.xsd">

    <artifact type="bundle" name="simple.bundle.one" version="[1.0.0, 2.0.0)"/>
    <artifact type="bundle" name="simple.bundle.two" version="[1.0.0, 2.0.0)"/>
</plan>
</code></pre><p>要使用计划，请将组成计划的捆绑软件复制到<strong>$ DMS_HOME / repository / bundles / usr</strong>目录，然后重新启动dm Server。服务器启动后，将计划文件（带有<strong>.plan</strong>文件扩展名） <strong>拖放</strong>到<strong>$ DMS_HOME / pickup</strong>目录中。这将使计划以与PAR文件相同的语义进行部署。从提取目录中删除计划文件将导致该计划取消部署。</p>
<h4>初步支持克隆</h4><p>M1包含克隆支持的第一阶段。请参阅<a href="http://blog.springsource.com/2009/04/01/springsource-dm-server-roadmap/">路线图</a>以了解克隆概述。</p><p>仍然有很少的用户案例可以实现，还有一些问题需要解决，但是支持克隆的大部分基础结构已经到位并通过了基本测试。</p><p>当范围应用程序（即PAR文件或范围计划）由于使用限制而无法解析时，将自动触发克隆。将指定失败使用约束的分发包克隆到应用程序的作用域中，尝试进行解析，然后重复此过程，直到解决方案成功或不再有其他候选分发包要克隆为止，在这种情况下，应用程序的部署失败。</p><p>也可以使用新的“共享”指令在import-bundle或import-library上手动触发克隆。例如：</p>
<pre><code class="prettyprint java"><br>Import-Bundle: org.foo.mybundle;sharing:=clone
</code></pre><p>要么</p>
<pre><code class="prettyprint java"><br>Import-Library: org.springframework.spring;sharing:=clone
</code></pre><p>如果自动或手动克隆导致要克隆Spring DM扩展程序的任何依赖项，则该扩展程序也将被克隆到应用程序的作用域中。克隆Spring捆绑包时，需要更改一些直接处理Spring和Spring DM类型的dm Server代码，以应对这些问题。在某些情况下，将使用此类类型的代码打包成小束，然后将其克隆。在其他情况下，代码已更改为基于OSGi <a href="http://www.osgi.org/Download/File?url=/download/osgi-4.2-early-draft3.pdf">蓝图服务</a>草案通过（非克隆）接口分派给此类类型。</p>
<h4>对共享存储库的初始支持</h4><p>M1包含对共享存储库的第一阶段支持。通过确保托管的存储库PAR文件位于拾取目录中，并且config / hostedRepository.config中的配置合适，可以将dm Server节点配置为托管共享存储库。例如：</p>
<pre><code class="prettyprint java"><br>{
    "my-hosted-repo" : {
        "type" : "external",
        "searchPattern" : "repository/hosted/*"
    }
}
</code></pre><p>此配置将创建一个名为my-hosted-repo的托管存储库，其中填充了存储库/托管目录的内容。然后，可以通过更新dm Server节点的config / repository.config文件来添加远程存储库条目，从而将其配置为访问该托管存储库。例如，假设托管的存储库节点正在my-host上运行，并且已将Tomcat配置为侦听端口8080：</p>
<pre><code class="prettyprint java"><br>{
    ...

    "remote-repo" : {
        "type" : "remote",
        "uri" : "http://my-host:8080/com.springsource.server.repository/my-hosted-repo",
        "indexRefreshInterval" : 30,
    },
    "repositoryChain" : [
        "bundles-subsystems",
        "bundles-ext",
        "bundles-usr",
        "libraries-ext",
        "libraries-usr",
        "remote-repo"
    ]
}
</code></pre><p>共享存储库和dm Server 2.0的存储库一般支持，将在后续博客条目中更详细地描述。</p>
<h4>杂</h4>
<ul>
<li>在启动期间改进了故障检测和处理</li>
<li>改进的约束满足算法，包括不需要的依赖项的垃圾收集</li>
<li>服务范围改进</li>
<li>Findbugs建立支持（并修复检测到的问题）</li>
<li>各种小的改进和错误修复</li>
</ul>
<h2>颠覆存储库</h2><p>为了更好地反映dm Server的模块化性质，我们将dm Server代码库划分为许多新的Subversion存储库，这些存储库现在可以公开访问：</p>
<table>
<tbody><tr><th>储存库网址</th><th>内容</th></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-util">https://anonsvn.springsource.org/svn/dm-server-util</a> </td><td>通用实用程序代码</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-repository">https://anonsvn.springsource.org/svn/dm-server-repository</a> </td><td>工件仓库</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-osgi">https://anonsvn.springsource.org/svn/dm-server-osgi</a> </td><td>OSGi扩展和Equinox挂钩</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-kernel">https://anonsvn.springsource.org/svn/dm-server-kernel</a> </td><td>dm内核</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-servlet">https://anonsvn.springsource.org/svn/dm-server-servlet</a> </td><td>Servlet子系统</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-web">https://anonsvn.springsource.org/svn/dm-server-web</a> </td><td>Web子系统</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server">https://anonsvn.springsource.org/svn/dm-server</a> </td><td>打包</td></tr>
<tr><td> <a href="https://anonsvn.springsource.org/svn/dm-server-documentation">https://anonsvn.springsource.org/svn/dm-server-documentation</a> </td><td>文献资料</td></tr>
</tbody></table><p>每个存储库都分为一个公用文件夹结构，在存储库的根目录中有三个目录。让我们以内核存储库为例：</p>
<pre><code class="prettyprint java"><br>svn ls https://anonsvn.springsource.org/svn/dm-server-kernel
development-branches/
main-branches/
tags/
</code></pre><p>最感兴趣的是分支和标签目录。标签目录包含每个标记的内核版本的目录，例如，它当前包含M1版本的单个标签。main-branches目录包含我们正在处理的每个主要分支（即发行版）的目录。2.0版本的代号为Jersey（以<a href="https://en.wikipedia.org/wiki/Jersey">island</a>命名），如下所示，main-branches目录包含jersey（2.0）版本的目录：</p>
<pre><code class="prettyprint java"><br>svn ls https://anonsvn.springsource.org/svn/dm-server-kernel/main-branches
jersey/
</code></pre>
<h2>从源代码构建dm服务器</h2><p>如果您只想创建dm Server安装二进制文件，最简单的方法是打包现有二进制文件。另外，如果您有兴趣修改或添加到dm Server代码库中，也可以从源代码编译所有dm Server代码库并将其打包为安装二进制文件。</p>
<h4>设定</h4><p>必须先在计算机上进行以下设置，然后才能从源代码构建dm Server：</p>
<li>已安装Java 6，并且已将JAVA_HOME环境变量配置为指向它</li>
<li>安装了Ant 1.7.0或更高版本</li>
<li>ANT_OPTS环境变量，配置为提供至少512MB的最大堆，例如ANT_OPTS = Xmx512m</li><p>完成此设置后，您就可以构建dm Server了。</p>
<h4>包装现有的二进制文件</h4><p>打包现有已发布的二进制文件非常简单。只需签出包装库</p>
<pre><code class="prettyprint java"><br>svn co https://anonsvn.springsource.org/svn/dm-server/tags/2.0.0.M1
</code></pre><p>然后进入build-dm-server目录并使用Ant运行jar和package目标</p>
<pre><code class="prettyprint java"><br>cd 2.0.0.M1/build-dm-server
ant jar package
</code></pre><p>该版本将下载构成2.0.0的所有捆绑软件。M1版本的dm Server并将其打包为安装二进制文件。您可以在target / artifacts目录中找到此二进制文件。</p>
<h4>完全从源代码构建</h4><p>要完全从源代码构建dm Server，您必须检出更多存储库，以便在计算机上拥有整个代码库。检出各个存储库的目录的名称以及它们之间的相对位置很重要，因此请使用下面显示的目录名称，并从同一目录执行所有检出：</p>
<pre><code class="prettyprint java"><br>svn co https://anonsvn.springsource.org/svn/dm-server-util/main-branches/jersey util
svn co https://anonsvn.springsource.org/svn/dm-server-repository/main-branches/jersey repository
svn co https://anonsvn.springsource.org/svn/dm-server-osgi/main-branches/jersey osgi-extensions
svn co https://anonsvn.springsource.org/svn/dm-server-kernel/main-branches/jersey kernel
svn co https://anonsvn.springsource.org/svn/dm-server-servlet/main-branches/jersey servlet
svn co https://anonsvn.springsource.org/svn/dm-server-web/main-branches/jersey web
svn co https://anonsvn.springsource.org/svn/dm-server-documentation/main-branches/jersey documentation
svn co https://anonsvn.springsource.org/svn/dm-server/main-branches/jersey packaging
</code></pre><p>接下来，进入Packaging / build-dm-server目录：</p>
<pre><code class="prettyprint java"><br>cd packaging/build-dm-server
</code></pre><p>现在运行src-build Ant目标：</p>
<pre><code class="prettyprint java"><br>ant src-build
</code></pre><p>构建完成后，现在可以在目标/工件中找到带有时间戳的dm Server安装二进制文件（以zip文件的形式）。其名称将采用springsource-dm-server-2.0.0的形式。建<timestamp>.zip</timestamp></p>
<h2>更多资源</h2>
<li><a href="http://forum.springframework.org/forumdisplay.php?f=53">dm服务器论坛</a></li></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">var disqus_shortname = 'spring-io';
      var disqus_identifier = 221;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));</script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });</script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>