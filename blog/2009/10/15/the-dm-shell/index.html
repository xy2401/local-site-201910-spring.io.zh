<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>dm Shell</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="The dm Shell">
<meta name="twitter:description" content="<p>The dm Server has a new command line shell. It is currently available along with the existing Equinox shell and will replace it for the 2.0 release. Improvements over the Equinox shell include basic tab completion and a command history.</p>
<p>The dm Shell is available both locally and remotely over ssh. When used locally by starting the server with the <em>‘./startup.sh -shell’</em> option it will take over the console output once the dm Kernel has started. Console output will still be viewable in the event log. Either way the first thing to be produced is an ASCII art splash image followed by the command prompt <em>‘:> ’</em>. </p>
">
<meta name="twitter:creator" content="@cgfrost">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/30994352b9a990d525f9aed9718b012a?s=200">

<meta property="og:title" content="The dm Shell">
<meta property="og:image" content="https://gravatar.com/avatar/30994352b9a990d525f9aed9718b012a?s=200">
<meta property="og:description" content="<p>The dm Server has a new command line shell. It is currently available along with the existing Equinox shell and will replace it for the 2.0 release. Improvements over the Equinox shell include basic tab completion and a command history.</p>
<p>The dm Shell is available both locally and remotely over ssh. When used locally by starting the server with the <em>‘./startup.sh -shell’</em> option it will take over the console output once the dm Kernel has started. Console output will still be viewable in the event log. Either way the first thing to be produced is an ASCII art splash image followed by the command prompt <em>‘:> ’</em>. </p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2009-10-15 14:08:00.0">
</head>
<body >

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">dm Shell</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/30994352b9a990d525f9aed9718b012a?s=20&d=mm"> <span class="author">克里斯托弗·弗罗斯特</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2009-10-15 14:08:00.0">2009年10月15日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2009/10/15/the-dm-shell#disqus_thread" data-disqus-identifier="275">
</a></div>
</div>
</header>
<div class="blog--post"><p>dm Server具有新的命令行外壳。当前，它与现有的Equinox shell一起提供，并将替换为2.0版本。对Equinox shell的改进包括基本的制表符完成和命令历史记录。</p><p>dm Shell可通过ssh在本地和远程使用。通过使用<em>'./startup.sh -shell'</em>选项启动服务器在本地使用时，一旦dm内核启动，它将接管控制台输出。控制台输出仍将在事件日志中可见。无论哪种方式，首先要生成的是ASCII艺术喷溅图像，后跟命令提示符<em>'：>'</em> 。</p>
<pre><code class="prettyprint plain">[13:36:54 ~]: ssh -p 2402 <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e58481888c8ba5898a8684898d8a9691">[email&#160;protected]</a>
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="accdc8c1c5c2ecc0c3cfcdc0c4c3dfd8">[email&#160;protected]</a>&#39;s password: 

     @@@ ***                                                                       
    @@@ *****            .__.                  .__.            .__.  .__.          
   @@@@ ******         __|  |  _____     _____.|  |__    ____  |  |  |  |          
   @@@@@@ ****        / __  | /     \   /  ___/|  |  \ ./ __ \ |  |  |  |       
    @@@@@ ***        / /_/  ||  Y Y  \  \___ \ |   Y  \\  ___/ |  |__|  |__   
     @@@ ***         \______||__|_|__/ /_____/ |___|__/ \____/ |____/|____/      

Type &#39;help&#39; to see the available commands.
:&gt; 
</code></pre><p>远程访问dm Shell时，要求输入密码，JAAS身份验证提供了安全性，并且该安全性与dm控制台的ID /密码相同。默认是<em>'admin / springsource'</em> 。可以从<em>“ config”</em>目录中的<em>“ com.springsource.kernel.users.properties”</em>文件中进行<em>配置</em> 。</p>
<h3>列表包</h3><p>在外壳中，键入<em>“帮助”</em>以查看可用命令列表。在执行命令的一半时，只需按“ <strong>TAB</strong> ”以查看命令可能完成的列表，而不是返回并再次键入<em>“ help”</em> 。</p><p>从<em>“ bundles”</em>命令开始，它将显示系统中的<a href="http://blog.springsource.com/2009/10/13/regions/">用户区域</a>包。显示它们的状态，名称，版本以及它们是否由弹簧驱动。除了少数几个用于管理用户区域的内核包及其服务之外，用户安装的工件都看不到任何内核。由于可见的系统包和服务要少得多，因此这更加清楚。</p>
<pre><code class="prettyprint plain">:&gt; bundles
Id  State         Name-Version
0   Active        org.eclipse.osgi-3.5.1.R35x_v20090827
1   Active        com.springsource.region.user-0.0.0
2   Resolved      org.springframework.aop-3.0.0.CI-395
3   Resolved      org.springframework.asm-3.0.0.CI-395
....
46  Active      S com.springsource.server.admin.web-2.0.0.M5
47  Active        com.springsource.javax.servlet.jsp.jstl-1.1.2
48  Active        com.springsource.org.apache.taglibs.standard-1.1.2
49  Active        org.springframework.context.support-3.0.0.CI-395
50  Active        org.springframework.jdbc-3.0.0.CI-395
51  Active        org.springframework.js-2.0.8.RELEASE
52  Active        org.springframework.transaction-3.0.0.CI-395
53  Active        org.springframework.web.servlet-3.0.0.CI-395
54  Active      S com.springsource.server.repository.hosted-2.0.0.M5-com.springsource.server.repository.hosted.core-2.0.0.M5
55  Active        com.springsource.server.repository.hosted-2.0.0.M5-com.springsource.server.repository.hosted.web-2.0.0.M5
56  Active        com.springsource.server.repository.hosted-2.0.0.M5-com.springsource.server.repository.hosted-synthetic.context-2.0.0.M5
57  Active        com.springsource.server.splash-2.0.0.M5
</code></pre>
<h3>执行生命周期操作</h3><p>同样容易执行操作，例如安装捆绑软件。键入<em>“安装文件：/path.to.bundle.jar”</em> 。</p>
<pre><code class="prettyprint plain">:&gt; install file:/Users/chrisfrost/Desktop/com.bar.import-1.0.0.jar
60  Installed     com.bar.importer-1.0.0
</code></pre><p>该捆绑包已安装，但是当我们尝试<em>“启动”</em>它时，会出现错误。尝试启动捆绑软件时，将显示该捆绑软件缺少的必需依赖关系。</p>
<pre><code class="prettyprint plain">:&gt; start 60
Error occured while starting bundle &#39;[60] com.bar.importer-1.0.0&#39; : The bundle could not be resolved. Reason: Missing Constraint: Import-Package: com.foo; version=&quot;[1.0.0,2.0.0)&quot;
:&gt; 
</code></pre><p>使用<em>“ diag”</em>命令可随时轻松获取此信息。尝试启动捆绑软件时，显示的信息将与日志文件中显示的信息相同。</p>
<pre><code class="prettyprint plain">:&gt; diag 60
Resolution report for bundel 60  Installed     com.bar.importer-1.0.0

Cannot resolve: com.bar.importer
    Resolver report:
        An Import-Package could not be resolved. Caused missing constraint &lt;Import-Package: com.foo; version=&quot;[1.0.0,2.0.0)&quot;&gt; in bundle &lt;com.bar.importer_1.0.0&gt;

:&gt; 
</code></pre><p>我们可以安装一个满足依赖关系的捆绑软件，然后再次<em>“启动”</em>原始捆绑软件，这次一切顺利。</p>
<h3>捆绑包详细信息</h3><p>这是一个非常简单的捆绑包，可以通过键入<em>“捆绑包60”</em>对其进行详细查看。记住，有制表符补全，所以只有<em>“ bu</em> <strong>TAB</strong> <em>60”</em>才能完成命令。这里显示了该捆绑软件导入和导出的所有软件包。捆绑软件名称前的<em>“ S”</em>表示捆绑软件具有Spring上下文。</p>
<pre><code class="prettyprint plain">:&gt; bundle 60
Bundle report for 60  Active      S com.bar.importer-1.0.0

Imported packages:
    com.foo-[1.0.0, 2.0.0)

Exported packages:

:&gt; bundle 61
Bundle report for 61  Resolved      com.foo.exporter-1.0.0

Imported packages:

Exported packages:
    com.foo-1.0.0

:&gt; 
</code></pre><p>我们可以看到它现在正在导入之前导致错误的软件包。显示的第二个捆绑包是导出该包裹的那个。</p>
<h3>查看配置</h3><p>其他可用命令包括<em>'config'</em>和<em>'configs'</em> ，这些命令将显示已安装的配置及其属性。</p>
<pre><code class="prettyprint plain">:&gt; configs
Pid
com.springsource.kernel
com.springsource.repository
com.springsource.server.repository.hosted
com.springsource.osgi.medic
com.springsource.kernel.users
com.springsource.kernel.jmxremote.access

:&gt; config com.springsource.osgi.medic
Pid                 = com.springsource.osgi.medic
Factory pid         = null
Bundle location     = null

dump.root.directory = serviceability/dump
log.wrapSysErr      = true
log.wrapSysOut      = true
service.pid         = com.springsource.osgi.medic

:&gt; 
</code></pre><p>显示的是可用配置的列表以及医学配置的属性。完成dm Shell后，有两种方法可以退出它。 <em>“退出”</em>将简单地退出外壳，而<em>“关闭”</em>将在服务器上调用关闭，并且外壳会话将作为关闭的一部分终止。</p>
<pre><code class="prettyprint plain">:&gt; exit
Goodbye.
Connection to localhost closed.
[14:24:03 ~]: 
</code></pre>
<h2>快来了...</h2><p>在2.0之前的版本中，要在Shell上做更多的工作，而当发生这种情况时，将会有完整的用户指南，我怀疑还有另一个博客或截屏。因此，如果您想看到一些<strong>杀手级</strong>功能，请大喊大叫。</p></div>
</div>
<section id="disqus_thread"></section>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 275;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>