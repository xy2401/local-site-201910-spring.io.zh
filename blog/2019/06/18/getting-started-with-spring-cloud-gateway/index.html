<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Getting Started with Spring Cloud Gateway</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Getting Started with Spring Cloud Gateway" />
<meta name="twitter:description" content="&lt;p&gt;Microservice architectures are great, but as your application programming interfaces (APIs) start to grow, so do the challenges related to their maintenance. &lt;/p&gt;
&lt;p&gt;For example, as an existing API matures and adds new features it will need to take its clients along with it on the journey. When the details of an API change, clients need to adjust in order to work with these changes. This process takes time and can really slow your APIs evolution and interfere with your ability to iterate quickly. &lt;/p&gt;
&lt;p&gt;Offering multiple APIs brings with it its own set of challenges. How do you route requests and responses to the correct API? How do you manage any message disparity? How do you support clients when your endpoints can move around? &lt;/p&gt;
" />
<meta name="twitter:creator" content="@benbravo73" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/15aba3f666761f09945e8efc6384006b?s=200" />

<meta property="og:title" content="Getting Started with Spring Cloud Gateway" />
<meta property="og:image" content="https://gravatar.com/avatar/15aba3f666761f09945e8efc6384006b?s=200" />
<meta property="og:description" content="&lt;p&gt;Microservice architectures are great, but as your application programming interfaces (APIs) start to grow, so do the challenges related to their maintenance. &lt;/p&gt;
&lt;p&gt;For example, as an existing API matures and adds new features it will need to take its clients along with it on the journey. When the details of an API change, clients need to adjust in order to work with these changes. This process takes time and can really slow your APIs evolution and interfere with your ability to iterate quickly. &lt;/p&gt;
&lt;p&gt;Offering multiple APIs brings with it its own set of challenges. How do you route requests and responses to the correct API? How do you manage any message disparity? How do you support clients when your endpoints can move around? &lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2019-06-18 04:30:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
 <div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Getting Started with Spring Cloud Gateway</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/15aba3f666761f09945e8efc6384006b?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/benwilcock">Ben Wilcock</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2019-06-18 04:30:00.0">June 18, 2019</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="3711" href="/blog/2019/06/18/getting-started-with-spring-cloud-gateway#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>Microservice architectures are great, but as your application programming interfaces (APIs) start to grow, so do the challenges related to their maintenance. </p>
<p>For example, as an existing API matures and adds new features it will need to take its clients along with it on the journey. When the details of an API change, clients need to adjust in order to work with these changes. This process takes time and can really slow your APIs evolution and interfere with your ability to iterate quickly. </p>
<p>Offering multiple APIs brings with it its own set of challenges. How do you route requests and responses to the correct API? How do you manage any message disparity? How do you support clients when your endpoints can move around? </p>
<p>And then there’s the question of integrating with legacy systems. Not everyone is so lucky that they get to build apps and services into an entirely new ecosystem, instead needing to play nicely with preexisting systems for things like authentication and other backing services. </p>
<p>An API Gateway helps you to solve these problems and more. It is a powerful architectural tool which you can use to manage message routing, filtering and proxying in your microservice architecture. Many API Management Gateways can be dated back to SOA and these tend to have been implemented as centralized servers. But as microservices became more popular, modern lightweight independent and decentralized micro-gateway applications have appeared – such as <a href="https://spring.io/projects/spring-cloud-gateway">Spring Cloud Gateway</a>. </p>
<p>In this first article in our series on Spring Cloud Gateway, we’ll start by doing something very simple – reroute requests coming into a gateway and forward them to another service elsewhere. We’ll also insert a simple HTTP Header to the request just to show one more example of what’s possible with a gateway.</p><h4><a href="#tools-you-rsquo-ll-need" class="anchor" name="tools-you-rsquo-ll-need"></a>Tools you&rsquo;ll need:</h4>
<ul>
<li><a href="https://httpie.org/">HTTPie</a> – a command line client for http calls</li>
<li>Your favorite Java IDE (check out <a href="https://spring.io/tools">Spring Tools</a> if you don’t have one)</li>
<li>Your favorite command line (e.g zsh, bash, DOS command or PowerShell)</li>
<li><a href="https://httpbin.org">Httpbin.org</a> – a website and diagnosis tool which converts Http GET request data into a JSON response</li>
</ul><h2><a href="#step-1-create-a-project" class="anchor" name="step-1-create-a-project"></a>Step 1: Create a project</h2>
<p>In a new folder, download and extract a new Spring Cloud Gateway project using <a href="https://start.spring.io/">start.spring.io</a> (and <a href="https://httpie.org/">HTTPie</a>) as follows&hellip;</p>
<pre><code class="prettyprint bash">http https://start.spring.io/starter.zip dependencies==cloud-gateway,actuator baseDir==spring-cloud-gateway-demo | tar -xzvf -
</code></pre>
<p>We can immediately assert that this project is working by building and running the code and checking the Spring Boot Actuator health endpoint like so&hellip;</p>
<pre><code class="prettyprint bash">./mvnw package spring-boot:run
</code></pre>
<p>Now that your Spring Boot application is up and running, point your browser to <a href="http://localhost:8080/actuator/health">http://localhost:8080/actuator/health</a>. You should receive a JSON-formatted message saying <code>{&quot;status&quot;:&quot;UP&quot;}</code> which indicates that everything is working fine. Now stop your server (ctrl+c) and continue to the next section.</p><h2><a href="#step-2-add-a-re-route-instruction-to-the-gateway" class="anchor" name="step-2-add-a-re-route-instruction-to-the-gateway"></a>Step 2: Add a re-route instruction to the Gateway</h2>
<p>In your IDE, open the class <code>src/main/java/com/example/demo/DemoApplication.java</code> and add the following method, correcting the import statements as you go. If you get stuck, check out the code sample <a href="https://github.com/benwilcock/spring-cloud-gateway-demo">here</a>.</p>
<pre><code class="prettyprint java">    @Bean
    public RouteLocator myRoutes(RouteLocatorBuilder builder) {
        return builder.routes()
            // Add a simple re-route from: /get to: http://httpbin.org:80
            // Add a simple &quot;Hello:World&quot; HTTP Header
            .route(p -&gt; p
            .path(&quot;/get&quot;) // intercept calls to the /get path
            .filters(f -&gt; f.addRequestHeader(&quot;Hello&quot;, &quot;World&quot;)) // add header
            .uri(&quot;http://httpbin.org:80&quot;)) // forward to httpbin
            .build();
    }
</code></pre>
<p>Here we build a new route for our gateway. Any request to <code>http://localhost:8080/get</code> will be matched to this route instruction and our two changes to the request will be made. The <code>filters()</code> method handles things such as adding or changing headers, in our case setting the <code>Hello</code> header to the value <code>World</code>. Additionally, the <code>uri()</code> method forwards our request to the new host. It’s important to note that the <code>/get</code> path is being retained when forwarding the message. </p>
<p>Now compile your new code and start the application server once more, like this&hellip;</p>
<pre><code class="prettyprint bash">./mvnw package spring-boot:run
</code></pre>
<p>In the next section, we&rsquo;ll test what we&rsquo;ve built.</p><h1><a href="#step-3-test-your-new-gateway" class="anchor" name="step-3-test-your-new-gateway"></a>Step 3: Test your new Gateway</h1>
<p>To test what we have built, we can once again use <a href="https://httpie.org/">HTTPie</a>. Send a HTTP GET request to <a href="http://localhost:8080/get">http://localhost:8080/get</a> and observe what comes back, like this&hellip;</p>
<pre><code class="prettyprint bash">http localhost:8080/get --print=HhBb
</code></pre>
<p>You should see a response very much like the one shown below.</p>
<pre><code class="prettyprint bash">GET /get HTTP/1.1
Accept: */*
Accept-Encoding: gzip, deflate
Connection: keep-alive
Host: localhost:8080
User-Agent: HTTPie/1.0.2

HTTP/1.1 200 OK
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: *
Content-Encoding: gzip
Content-Length: 256
Content-Type: application/json
Date: Mon, 10 Jun 2019 13:13:36 GMT
Referrer-Policy: no-referrer-when-downgrade
Server: nginx
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block

{
    &quot;args&quot;: {},
    &quot;headers&quot;: {
        &quot;Accept&quot;: &quot;*/*&quot;,
        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,
        &quot;Forwarded&quot;: &quot;proto=http;host=\&quot;localhost:8080\&quot;;for=\&quot;0:0:0:0:0:0:0:1:52144\&quot;&quot;,
        &quot;Hello&quot;: &quot;World&quot;,
        &quot;Host&quot;: &quot;httpbin.org&quot;,
        &quot;User-Agent&quot;: &quot;HTTPie/1.0.2&quot;,
        &quot;X-Forwarded-Host&quot;: &quot;localhost:8080&quot;
    },
    &quot;origin&quot;: &quot;0:0:0:0:0:0:0:1, 2.102.147.153, ::1&quot;,
    &quot;url&quot;: &quot;https://localhost:8080/get&quot;
}
</code></pre>
<p>There are a few things of note in this output:</p>
<ol>
<li>The response originates from <a href="https://httpbin.org">httpbin.org</a> as evidenced by the <code>&quot;Host&quot;</code> header.</li>
<li>The <code>&quot;X-Forwarded-Host&quot;</code> is <code>&quot;localhost:8080&quot;</code> (our locally running Gateway application)</li>
<li>The Http header <code>&quot;Hello&quot;</code> has been inserted and given a value of <code>&quot;World&quot;</code>.</li>
<li>In the Json response, the full <code>&quot;url&quot;</code> of the original request is <code>&quot;https://localhost:8080/get&quot;</code> (the gateway service that we built together).</li>
</ol>
<p>The path of execution is from the client (<a href="https://httpie.org/">HTTPie</a>) -&gt; DemoApplication.java (our gateway) -&gt; httpbin.org (our echo service) and then back again.</p><h2><a href="#final-thoughts" class="anchor" name="final-thoughts"></a>Final thoughts.</h2>
<p>That’s it. You now should have a Spring Cloud Gateway application up and running and have learned how to forward the requests it receives to another endpoint. You could use this technique to automatically forward requests from your Gateway application to any other service.</p>
<p>The code to accompany this article can be found <a href="https://github.com/benwilcock/spring-cloud-gateway-demo">here</a>. The full documentation for the current GA release of Spring Cloud Gateway (2.1.0 at the time of writing) can be found <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.1.0.RELEASE/single/spring-cloud-gateway.html">here</a>.</p><h2><a href="#next-time" class="anchor" name="next-time"></a>Next time.</h2>
<p>We’ve only dipped our toes into what Spring Cloud Gateway can do, but hopefully, this was a good first look. In our next post, we’ll take a look at how to create a dynamic gateway – one that can discover the location of services at runtime. Until then, if you&rsquo;d like to learn more, be sure to check out the <a href="https://spring.io/projects/spring-cloud-gateway">Spring Cloud Gateway page on spring.io</a>, the <a href="https://spring.io/guides/gs/gateway/">official guide</a>, or set up your own service and gateway on <a href="https://run.pivotal.io/">Pivotal Web Services</a>! </p>
<p>Finally, be sure to check out <a href="https://springoneplatform.io/">SpringOne Platform</a>, the premier conference for building scalable applications that people love. Join your peers to learn, share, and have fun in Austin, TX from October 7th to 10th for the biggest and best show yet. Even better, use code <strong>S1P_Save200</strong> when registering to save on your ticket. We hope to see you there!</p>
<hr /><h1><a href="#authors" class="anchor" name="authors"></a>Authors</h1>
<ul>
<li><a href="https://twitter.com/benbravo73">Ben Wilcock</a> – Spring Marketing, Pivotal.</li>
<li><a href="https://twitter.com/BrianMMcClain">Brian McClain</a> – Technical Marketing, Pivotal.</li>
</ul>
</div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 3711;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>