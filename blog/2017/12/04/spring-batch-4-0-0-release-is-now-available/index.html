<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring Batch 4.0.0。现在可以发布</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Spring Batch 4.0.0.RELEASE is now available">
<meta name="twitter:description" class="anchor" content="<p>We are pleased to announce that Spring Batch 4.0.0.RELEASE is now available through Github, the Pivotal download repository, and Maven Central. This is the generally available release of the 4.0 line. Many thanks to all that contributed to this release.</p>
<h2><a href=" #how-we-got-her="="></head><body dir="ltr">How We Got Here
<p>Spring Batch 4 is the first major version release of Spring Batch since 3.0 went out in 2014. A lot has changed in the Spring ecosystem since that version went out. This release is intended to bring Spring Batch up to date with those changes. When Spring Batch 3 came out, Java configuration was just beginning to take over XML-based configuration. Spring Boot had not been announced yet. Also, while JDK 8 had just come out, Spring Framework 4 (which Spring Batch 3 was based on) still supported java back to JDK 6. Spring Batch 4 brings upgrades to all of these areas. Let’s take a look.</p>
">
<meta name="twitter:creator" content="@michaelminella">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/ab8031806cdd258238e67411157d215a?s=200">

<meta property="og:title" content="Spring Batch 4.0.0.RELEASE is now available">
<meta property="og:image" content="https://gravatar.com/avatar/ab8031806cdd258238e67411157d215a?s=200">
<meta class="anchor" name="how-we-got-here" property="og:description" content="<p>We are pleased to announce that Spring Batch 4.0.0.RELEASE is now available through Github, the Pivotal download repository, and Maven Central. This is the generally available release of the 4.0 line. Many thanks to all that contributed to this release.</p>
<h2><a href=" #how-we-got-her="=">How We Got Here
<p>Spring Batch 4 is the first major version release of Spring Batch since 3.0 went out in 2014. A lot has changed in the Spring ecosystem since that version went out. This release is intended to bring Spring Batch up to date with those changes. When Spring Batch 3 came out, Java configuration was just beginning to take over XML-based configuration. Spring Boot had not been announced yet. Also, while JDK 8 had just come out, Spring Framework 4 (which Spring Batch 3 was based on) still supported java back to JDK 6. Spring Batch 4 brings upgrades to all of these areas. Let’s take a look.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2017-12-04 14:59:03.83">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category content--title">
<div>工程</div>
</div>
<div class="blog-category active content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Batch 4.0.0。现在可以发布</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon releases"></div>
<a class="category">发布</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/ab8031806cdd258238e67411157d215a?s=20&d=mm"> <a class="author" rel="author" href="/team/mminella">迈克尔·米内拉</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2017-12-04 14:59:03.83">2017年12月4日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2017/12/04/spring-batch-4-0-0-release-is-now-available#disqus_thread" data-disqus-identifier="3123">
</a></div>
</div>
</header>
<div class="blog--post"><p>我们很高兴地宣布Spring Batch 4.0.0。现在可以通过Github，Pivotal下载存储库和Maven Central获得RELEASE。这是4.0系列的通用版本。非常感谢对此版本做出的所有贡献。</p><h2><a href="#how-we-got-here" class="anchor" name="how-we-got-here"></a>我们如何来到这里</h2>
<p>自2014年3.0推出以来，Spring Batch 4是Spring Batch的第一个主要版本。自从该版本发布以来，Spring生态系统发生了很多变化。该发行版旨在使Spring Batch具有这些更改的最新信息。当Spring Batch 3发布时，Java配置才刚刚开始接管基于XML的配置。Spring Boot尚未宣布。而且，尽管JDK 8刚刚问世，但Spring Framework 4（基于Spring Batch 3）仍支持Java回到JDK 6。Spring Batch 4为所有这些领域带来了升级。让我们来看看。</p><h2><a href="#new-baseline" class="anchor" name="new-baseline"></a>新基准</h2>
<p>Spring Batch 3基于Spring Framework 4，它支持可追溯到Java 6的依赖关系生态系统。Spring Batch 4重新审视了其依赖关系树，并将其与即将发布的Spring Boot 2依赖关系树进行了更新，其中包括Spring Framework 5和Java 8作为基线要求。尽管Spring Batch拥有完整的Java 8故事已有多年，但是通过允许我们在内部使用Java 8习惯用法，此升级使我们能够在内部改进和简化事情。</p><h2><a href="#improved-java-configuration" class="anchor" name="improved-java-configuration"></a>改进的Java配置</h2>
<p>如前所述，Spring Batch 4是自Spring Boot发布以来的第一个主要版本。在此发行版中，我们已在改善用户最痛苦的所有领域的Java配置体验方面取得了长足的进步。现在，生成器可用于所有<code>ItemReader</code>和<code>ItemWriter</code>实现。Spring Batch 3和4之间的简化示例是配置<code>FlatFileItemReader</code> 。使用Spring Batch 3的Java配置功能，您的配置将类似于以下内容：</p>
<pre><code class="prettyprint">@Bean
public FlatFileItemReader<Foo> reader(Resource resource) 
    throws Exception {

        FlatFileItemReader<Foo> reader = new FlatFileItemReader<>();

        reader.setName(“fooReader”);
        reader.setResource(resource);

        BeanWrapperFieldSetMapper<Foo> fieldSetMapper = 
            new BeanWrapperFieldSetMapper<>();
        fieldSetMapper.setTargetType(Foo.class);
        fieldSetMapper.afterPropertiesSet();

        DelimitedLineTokenizer tokenizer = new DelimitedLineTokenizer();
        tokenizer.setNames(new String[] {“first”, “second”, “third”});
        tokenizer.afterPropertiesSet();

        DefaultLineMapper lineMapper = new DefaultLineMapper();
        lineMapper.setLineTokenizer(tokenizer);
        lineMapper.setFieldSetMapper(fieldSetMapper);

        reader.setLineMapper(lineMapper);

        return reader;
    }
</code></pre>
<p>使用Spring Batch 4，先前的配置简化为以下内容：</p>
<pre><code class="prettyprint">@Bean
public FlatFileItemReader<Foo> reader(Resource resource) {
        return new FlatFileItemReaderBuilder<Foo>()
            .name(“fooReader”)
            .resource(resource)
            .delimited()
            .names(new String[]{“first”, “second”, “third”})
            .targetType(Foo.class)
            .build();
}
</code></pre>
<p>此版本中的所有<code>ItemReader</code>和<code>ItemWriter</code>实现都可以使用前面示例中显示的流利的构建器。</p><h2><a href="#new-documentation" class="anchor" name="new-documentation"></a>新文件</h2>
<p>Spring Batch的文档多年来没有进行大修。是时候了。在此版本中，文档已迁移到Asciidoc，以简化文档的创建并在整个Spring产品组合中保持一致。除此之外，参考文档现在还可以通过使用每页顶部的切换按钮来查看Java配置或XML配置中的任何示例。</p>
<p><img src="https://raw.githubusercontent.com/mminella/blog_images/master/documentation_toggle.png" alt="Java配置切换"></p>
<p>通过此切换，您可以选择以所需方式向您提供文档。如果您在基于XML的项目中，则整个文件将显示适合XML配置的内容。如果使用Java配置，则整个文件将显示适合使用Java配置的项目的文件。</p><h2><a href="#wait-there-rsquo-s-more" class="anchor" name="wait-there-rsquo-s-more"></a>等待！还有更多！</h2>
<p>除了上述所有内容之外，Spring Batch 4还包括其他改进，包括委派给<code>java.util.Function</code></p><h2><code>java.util.Function</code></h2><code>java.util.Function</code></div><code>java.util.Function</code></div><code>java.util.Function</code></article><code>java.util.Function</code></div><code>java.util.Function</code></div><code>java.util.Function</code></div><code>java.util.Function</code></div><code>java.util.Function</code></body></html>