<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>é“‹ååº”å †å‡ºç‚‰äº†</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Reactor Bismuth is out">
<meta name="twitter:description" content="<div class=" paragrap="="> 
 </head><body dir="ltr"><p>It is my great pleasure to announce the GA release of <strong>Reactor Bismuth</strong>, which notably encompasses <code>reactor-core</code> <strong>3.1.0.RELEASE</strong> and <code>reactor-netty</code> <strong>0.7.0.RELEASE</strong> ğŸ‰</p> 

<div class="paragraph"> 
 <p>With the release of <a href="https://spring.io/blog/2017/09/28/spring-framework-5-0-goes-ga">Spring Framework 5.0</a> now just happening, you can imagine this is a giant step for Project Reactor :)</p> 
</div>
<div class="imageblock"> 
 <div class="content"> 
  <img src="https://farm2.staticflickr.com/1434/5109110719_6f10365d85_m_d.jpg" alt="é“‹æ™¶ä½“" width="300" height="200"> 
 </div> 
 <div class="title">
  <em>Like the bismuth crystal this release is intricate</em>
 </div> 
</div>
<div class="paragraph"> 
 <p>Â <br> The release contains a lot of changes and API polishing. For reactor-core you can find the exhaustive list in the <a href="https://github.com/reactor/reactor-core/releases/tag/v3.1.0.RELEASE">release notes</a>.</p> 
</div>
<div class="admonitionblock important"> 
 <table> 
  <tbody>
   <tr> 
    <td class="icon"> 
     <div class="title">
      Important
     </div> </td> 
    <td class="content"> There is a <strong>known (minor) issue</strong> with the <code>reactor-core</code> and <code>reactor-test</code> <strong>sources</strong> jars: They contain duplicate java source entries. See issue <a href="https://github.com/reactor/reactor-core/issues/887">#887</a> for more details. </td> 
   </tr> 
  </tbody>
 </table> 
</div>
">
<meta name="twitter:creator" content="@simonbasle">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/056097e00486bcdf172708607f194b1e?s=200">

<meta property="og:title" content="Reactor Bismuth is out">
<meta property="og:image" content="https://gravatar.com/avatar/056097e00486bcdf172708607f194b1e?s=200">
<meta property="og:description" content="<div class=" paragrap="="> 
 <p>It is my great pleasure to announce the GA release of <strong>Reactor Bismuth</strong>, which notably encompasses <code>reactor-core</code> <strong>3.1.0.RELEASE</strong> and <code>reactor-netty</code> <strong>0.7.0.RELEASE</strong> ğŸ‰</p> 

<div class="paragraph"> 
 <p>With the release of <a href="https://spring.io/blog/2017/09/28/spring-framework-5-0-goes-ga">Spring Framework 5.0</a> now just happening, you can imagine this is a giant step for Project Reactor :)</p> 
</div>
<div class="imageblock"> 
 <div class="content"> 
  <img src="https://farm2.staticflickr.com/1434/5109110719_6f10365d85_m_d.jpg" alt="é“‹æ™¶ä½“" width="300" height="200"> 
 </div> 
 <div class="title">
  <em>Like the bismuth crystal this release is intricate</em>
 </div> 
</div>
<div class="paragraph"> 
 <p>Â <br> The release contains a lot of changes and API polishing. For reactor-core you can find the exhaustive list in the <a href="https://github.com/reactor/reactor-core/releases/tag/v3.1.0.RELEASE">release notes</a>.</p> 
</div>
<div class="admonitionblock important"> 
 <table> 
  <tbody>
   <tr> 
    <td class="icon"> 
     <div class="title">
      Important
     </div> </td> 
    <td class="content"> There is a <strong>known (minor) issue</strong> with the <code>reactor-core</code> and <code>reactor-test</code> <strong>sources</strong> jars: They contain duplicate java source entries. See issue <a href="https://github.com/reactor/reactor-core/issues/887">#887</a> for more details. </td> 
   </tr> 
  </tbody>
 </table> 
</div>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2017-09-28 15:08:20.37">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">ä¸“æ¡ˆ</a>
</li>
<li class="navbar-link">
<a href="/guides">å¯¼æ¸¸</a>
</li>
<li class="navbar-link active">
<a href="/blog">åšå®¢</a>
</li>
<li class="navbar-link">
<a href="/services">åŸ¹è®­ä¸è®¤è¯</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="æœç´¢æ–‡æ¡£ï¼ŒæŒ‡å—å’Œå¸–å­..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="æœç´¢..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">å®¶<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">ä¸“æ¡ˆ<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">å¯¼æ¸¸<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">åšå®¢<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">åŸ¹è®­ä¸è®¤è¯<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category content--title">
<div>å·¥ç¨‹</div>
</div>
<div class="blog-category active content--title">
<div>å‘å¸ƒ</div>
</div>
<div class="blog-category content--title">
<div>æ–°é—»ä¸æ´»åŠ¨</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">é“‹ååº”å †å‡ºç‚‰äº†</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon releases"></div>
<a class="category">å‘å¸ƒ</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/056097e00486bcdf172708607f194b1e?s=20&d=mm"> <a class="author" rel="author" href="/team/simonbasle">è¥¿è’™Â·å·´æ–¯è±ï¼ˆSimonBaslÃ©ï¼‰</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2017-09-28 15:08:20.37">ä¹æœˆ28ï¼Œ2017</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2017/09/28/reactor-bismuth-is-out#disqus_thread" data-disqus-identifier="3046">
</a></div>
</div>
</header>
<div class="blog--post"><div class="paragraph">
<p>æˆ‘éå¸¸é«˜å…´åœ°å®£å¸ƒï¼ŒGAé‡Šæ”¾äº†<strong>Reactor Bismuth</strong> ï¼Œè¯¥<strong>ååº”å †</strong>ç‰¹åˆ«åŒ…å«äº†<strong>Reactor</strong> <code>reactor-core</code> <strong>3.1.0ã€‚å‘å¸ƒ</strong>å’Œ<code>reactor-netty</code> <strong>0.7.0ã€‚RELEASEğŸ‰</strong></p>
</div>
<div class="paragraph">
<p>éšç€<a href="https://spring.io/blog/2017/09/28/spring-framework-5-0-goes-ga">Spring Framework 5.0</a>çš„å‘å¸ƒåˆšåˆšå¼€å§‹ï¼Œæ‚¨å¯ä»¥æƒ³è±¡è¿™å¯¹Project Reactoræ¥è¯´æ˜¯å·¨å¤§çš„ä¸€æ­¥ï¼š)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://farm2.staticflickr.com/1434/5109110719_6f10365d85_m_d.jpg" alt="é“‹æ™¶ä½“" width="300" height="200">
</div>
<div class="title"><em>åƒé“‹æ™¶ä½“ä¸€æ ·ï¼Œè¿™ç§é‡Šæ”¾æ˜¯å¤æ‚çš„</em></div>
</div>
<div class="paragraph">
<p>Â <br>è¯¥ç‰ˆæœ¬åŒ…å«è®¸å¤šæ›´æ”¹å’ŒAPIæ”¹è¿›ã€‚å¯¹äºååº”å †å †èŠ¯ï¼Œæ‚¨å¯ä»¥åœ¨<a href="https://github.com/reactor/reactor-core/releases/tag/v3.1.0.RELEASE">å‘è¡Œè¯´æ˜ä¸­</a>æ‰¾åˆ°è¯¦å°½çš„æ¸…å•ã€‚</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<div class="title">é‡è¦</div>
</td>
<td class="content"><code>reactor-core</code>å’Œ<code>reactor-test</code> <strong>æº</strong> jarå­˜åœ¨ä¸€ä¸ª<strong>ï¼ˆè¾ƒå°çš„ï¼‰é—®é¢˜</strong> ï¼šå®ƒä»¬åŒ…å«é‡å¤çš„Javaæºæ¡ç›®ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§é—®é¢˜<a href="https://github.com/reactor/reactor-core/issues/887">ï¼ƒ887</a> ã€‚
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>è®©æˆ‘ä»¬æ¦‚è¿°ä¸€ä¸‹æ­¤ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½å’Œå€¼å¾—æ³¨æ„çš„åŠŸèƒ½ï¼š</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api">APIæœ€ç»ˆæŠ›å…‰</a></p>
</li>
<li>
<p><a href="#moved">ååº”å †æµ‹è¯•å’ŒKotlinæ‰©å±•å·²ç§»åŠ¨</a></p>
</li>
<li>
<p><a href="#kotlin-null-safety">Kotlinå’Œé›¶å®‰å…¨æ”¯æŒ</a></p>
</li>
<li>
<p><a href="#docs">æ–‡æ¡£æŠ›å…‰</a></p>
</li>
<li>
<p>æ­¤ç‰ˆæœ¬ä¸­çš„ä¸»è¦æ–°åŠŸèƒ½ï¼š <a href="#context"><code>Context</code></a></p>
</li>
<li>
<p><a href="#other-new">å…¶ä»–æœ‰è¶£çš„æ–°åŠŸèƒ½</a></p>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="api"><a class="anchor" href="#api"></a> APIæœ€ç»ˆæŠ›å…‰</h2>
<div class="sectionbody">
<div class="paragraph">
<p>åœ¨3.0.xå‘¨æœŸçš„æœ€æ–°ç‰ˆæœ¬å’Œ3.1.0ä¹‹é—´è¿›è¡Œäº†è®¸å¤šAPIæ›´æ”¹ã€‚æˆ‘ä»¬å¸Œæœ›é•¿æœŸä½¿ç”¨Spring Framework 5è·å¾—æœ€ä½³çš„APIï¼Œå› æ­¤è¿™äº›é‡å¤§æ›´æ”¹æ˜¯å¿…è¦çš„ã€‚å‘è¡Œè¯´æ˜åŒ…å«æ­¤ç±»æ›´æ”¹çš„æ›´è¯¦å°½åˆ—è¡¨ï¼Œä½†è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å…¶ä¸­çš„ä¸€äº›æ›´æ”¹ã€‚</p>
</div>
<div class="sect2">
<h3 id="error-handling-operators"><a class="anchor" href="#error-handling-operators"></a>é”™è¯¯å¤„ç†è¿ç®—ç¬¦</h3>
<div class="paragraph">
<p>åœ¨<code>Flux</code>å’Œ<code>Mono</code>ä½¿é”™è¯¯å¤„ç†è¿ç®—ç¬¦æ›´åŠ ä¸€è‡´ã€‚å…¨éƒ¨ä½¿ç”¨<code>onError</code>å‰ç¼€ï¼Œå¹¶ä¸”ä¸¤ä¸ªç±»ä¸­çš„APIå‡å¯¹é½ï¼š</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>onErrorReturn</strong>åˆ‡æ¢åˆ°å›é€€å€¼ï¼ˆä»¥å‰ä¸º<code>otherwiseReturn</code>è¿”å›Monoï¼‰</p>
</li>
<li>
<p><strong>onErrorResume</strong>åˆ‡æ¢åˆ°åå¤‡<code>Publisher</code> ï¼ˆåŸ<code>onErrorResumeWith</code>åœ¨é€šé‡å’Œ<code>otherwise</code>åœ¨å•å£°é“ï¼‰</p>
</li>
<li>
<p><strong>onErrorMap</strong>å°†<code>Exception</code>è½¬æ¢ä¸ºå¦ä¸€ä¸ª<code>Exception</code> ï¼ˆä»¥å‰åœ¨Fluxå’ŒMonoä¸­éƒ½æ˜¯<code>mapError</code> ï¼‰</p>
</li>
<li>
<p><strong>switchIfEmpty</strong>åˆ‡æ¢åˆ°å›é€€åºåˆ—å¦‚æœæºæ˜¯ç©ºçš„ï¼ˆåŸ<code>otherwiseIfEmpty</code>åœ¨<code>Mono</code> ï¼‰</p>
</li>
<li>
<p><code>Flux#switchOnError</code>å·²è¢«åˆ é™¤ï¼Œä½¿ç”¨<code>onErrorResume</code>ä½¿ç”¨å¿½ç•¥å…¶å‚æ•°çš„lambdaå¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœã€‚</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="alignment-between-code-flux-code-and-code-mono-code-concepts-and-operators"><a class="anchor" href="#alignment-between-code-flux-code-and-code-mono-code-concepts-and-operators"></a> <code>Flux</code>å’Œ<code>Mono</code>æ¦‚å¿µä¸è¿ç®—ç¬¦ä¹‹é—´çš„å¯¹é½</h3>
<div class="paragraph">
<p>å°½ç®¡æœ‰ç±»ä¼¼çš„æ¦‚å¿µï¼Œ <code>Mono</code> APIæœ‰æ—¶è¿˜æ˜¯ä¼šåç¦»<code>Flux</code> APIã€‚åœ¨åˆç†çš„åœ°æ–¹ï¼Œè¿™äº›åˆ†éš”å·²å¾—åˆ°ä¿®å¤ã€‚</p>
</div>
<div class="sect3">
<h4 id="alignment-of-code-when-code-code-and-code-code-zip-code-and-code-zipwith-code"><a class="anchor" href="#alignment-of-code-when-code-code-and-code-code-zip-code-and-code-zipwith-code"></a> <code>when</code> ï¼Œ <code>and</code> ï¼Œ <code>zip</code>å’Œ<code>zipWith</code></h4>
<div class="paragraph">
<p>ä¾‹å¦‚ï¼Œ <code>Mono</code>æœ‰ä¸€ä¸ª<code>and</code>è¿ç®—ç¬¦ï¼Œè€Œ<code>when</code>é™æ€æ–¹æ³•<strong>ç”¨äºç»„åˆå…ƒç´ å¹¶ç”Ÿæˆ<code>Mono<Tuple2></code></strong> ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯<code>zipWith</code>å’Œ<code>Flux</code> <code>zip</code>çš„ä¸“ä¸šåŒ–ï¼Œä½†æ˜¯åç§°ä¸åŒä½¿é™„åŠ æ¦‚å¿µå˜å¾—å›°éš¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•å·²åœ¨<code>Mono</code>é‡å‘½åçš„åŸå› ã€‚</p>
</div>
<div class="paragraph">
<p>å¦ä¸€æ–¹é¢ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°<code>Mono</code> APIä¸­ä»ç„¶å­˜åœ¨ä¸åŒçš„<code>when</code>å’Œ<code>and</code>é£æ ¼ã€‚ä¸æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ç›¸åï¼Œè¿™äº›è¿”å›ä¸€ä¸ª<code>Mono<Void></code> ã€‚å¤„ç†ä»»åŠ¡çš„å®Œæˆæ˜¯<code>Mono</code>çš„åŸºæœ¬ç”¨ä¾‹ï¼Œå¹¶ä¸”è¿™äº›æ–¹æ³•ç°åœ¨ä¸“é—¨é’ˆå¯¹æ­¤ç±»åº”ç”¨ç¨‹åºé‡èº«å®šåˆ¶ï¼šå®ƒä»¬å°†åˆå¹¶å¹¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆè¡¨ç¤ºä¸ºæºMonosï¼‰ï¼Œå¿½ç•¥å…¶æ½œåœ¨çš„<code>onNext</code>ä¿¡å·ï¼Œä»…ä¼ æ’­è¯¥ç»„åˆ<code>onComplete</code>ä¿¡å·ï¼Œäº§ç”Ÿ<code>Mono<Void></code> Nä¸ªä»»åŠ¡å®Œæˆæ—¶ï¼Œè¯¥æ“ä½œå³å®Œæˆã€‚</p>
</div>
</div>
<div class="sect3">
<h4 id="consistent-semantic-of-the-code-then-code-prefix"><a class="anchor" href="#consistent-semantic-of-the-code-then-code-prefix"></a>ä¸€è‡´è¯­ä¹‰çš„<code>then</code>å‰ç¼€</h4>
<div class="paragraph">
<p>ç±»ä¼¼åœ°ï¼Œ <code>then</code>å‰ç¼€ç°åœ¨å§‹ç»ˆè¡¨ç¤ºå°†ä¸¢å¼ƒæºçš„<code>onNext</code> ï¼Œè€Œæ˜¯å»ºç«‹åœ¨ç»ˆç«¯ä¿¡å·ä¸Šã€‚è¿™å·²åœ¨<code>Flux</code>å’Œ<code>Mono</code>ä¿æŒä¸€è‡´ï¼š</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>then()</code>è¿”å›ä¸€ä¸ª<code>Mono<Void></code>ä»…ä»æºä¼ æ’­<code>onComplete</code>æˆ–<code>onError</code>ä¿¡å·ã€‚</p>
</li>
<li>
<p><code>then(Mono<V>)</code>è¿”å›ä¸€ä¸ª<code>Mono<V></code> ï¼šç­‰å¾…åŸå§‹<code>onComplete</code>åˆ‡æ¢åˆ°å¦ä¸€æä¾›å‰ä¿¡å·<code>Mono</code> ï¼Œå‘å…‰åªä»å…¶å®ƒå…ƒç´ <code>Mono</code> ã€‚</p>
</li>
<li>
<p><code>thenMany(Publisher<V>)</code>ç›¸ä¼¼ï¼Œé™¤äº†å®ƒç»§ç»­è¿›å…¥<code>Flux<V></code> ã€‚</p>
</li>
<li>
<p><code>thenEmpty(Publisher<Void>)</code>è¿”å›ä¸€ä¸ª<code>Mono<Void></code>ä¸€æ—¦å®ŒæˆåŸ<code>Mono</code> <em>ï¼Œåˆ™</em> <code>Publisher</code>å·²ç»å®Œæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»£è¡¨é¡ºåºå®Œæˆï¼Œè¿™ä¸<code>and</code>ç«‹å³è®¢é˜…ä¸¤ä¸ªåºåˆ—ä¸åŒã€‚</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>è¯·æ³¨æ„ï¼Œå·²ç»å®Œå…¨åˆ é™¤äº†é‡‡ç”¨<code>Supplier</code>å‚æ•°çš„å˜ä½“ï¼ˆå®ƒä»¬çš„æƒ°æ€§è¯­ä¹‰å¯ä»¥ç”±<code>Mono.defer</code> ï¼‰ã€‚å¦å¤–ï¼Œä¸Šè¿°çš„<code>Mono#thenEmpty</code>ä»<code>then(Publisher<Void>)</code>é‡å‘½åã€‚</p>
</div>
</div>
<div class="sect3">
<h4 id="how-one-code-then-code-was-really-a-code-flatmap-code"><a class="anchor" href="#how-one-code-then-code-was-really-a-code-flatmap-code"></a>å¦‚ä½•ä¸€<code>then</code>çš„ç¡®æ˜¯ä¸€ä¸ª<code>flatMap</code></h4>
<div class="paragraph">
<p><code>Mono</code>æ›¾ç»æœ‰å¦ä¸€ä¸ªæœ‰è¶£<code>then</code>å˜ç§ï¼š</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Mono<V> then(Function<T, Mono<V>> thenFunction);</code></pre>
</div>
</div>
<div class="paragraph">
<p>å½“ä»”ç»†è§‚å¯Ÿæ—¶ï¼Œè¿™ä¸<code>then*</code>å…³æ³¨ç»ˆç«¯ä¿¡å·çš„æ–°è¯­ä¹‰ä¸ç¬¦ã€‚ç›¸åï¼Œå®ƒå°†<em>æ ¹æ®æºçš„</em> <code>onNext</code>å°†æºè½¬æ¢ä¸ºå¦ä¸€ä¸ª<code>Mono</code> ã€‚å¬èµ·æ¥å¾ˆç†Ÿæ‚‰ï¼Ÿè¿™ç¡®å®ä¸<code>Flux#flatMap</code>åŠŸèƒ½ä¸€è‡´ï¼</p>
</div>
<div class="paragraph">
<p>ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼š <code>Mono</code>å·²ç»æœ‰ä¸€ä¸ª<code>flatMap</code>è¿ç®—ç¬¦ï¼š</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Flux<V> flatMap(Function<T, Publisher<V>> mapper);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ç»è¿‡ä»”ç»†è€ƒè™‘ä¹‹åï¼Œæˆ‘ä»¬è®¤è¯†åˆ°<code>flatMap</code>çš„ç»å…¸è¯­ä¹‰æ˜¯è¿”å›ä¸åº”ç”¨<code>flatMap</code>ç›¸åŒç±»å‹çš„å€¼ã€‚å› æ­¤è®©<code>Mono#flatMap</code>è¿”å›<code>Mono</code>æ›´ä¸ºæ­£ç¡®ã€‚</p>
</div>
<div class="paragraph">
<p>ç»“æœï¼Œæˆ‘ä»¬å°†æ­¤å˜é‡é‡å‘½åä¸º<code>flatMap</code>å¹¶åœ¨å˜é‡åç¼€ä¸­ä½¿ç”¨<code>Many</code>åç¼€ï¼Œè¯¥åç¼€å°†è¿”å›<code>Flux</code> ï¼š</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Mono<V> flatMap(Function<T, Mono<V>> mapper);
Flux<V> flatMapMany(Function<T, Publisher<V>> mapper);</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<div class="title">å°è´¹</div>
</td>
<td class="content">ä¸ºäº†ç®€åŒ–è¿ç§»ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨æœç´¢æ—§ç‰ˆ<code>Mono.flatMap</code>æ‰€æœ‰ç”¨æ³•ï¼Œå¹¶<code>Mono.flatMap</code>å…¶æ›¿æ¢ä¸º<code>flatMapMany</code> ã€‚ç„¶åæœç´¢<code>then(Function)</code>ç”¨æ³•å¹¶å°†å…¶æ›¿æ¢ä¸º<code>flatMap</code> ã€‚
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="various-api-simplifications"><a class="anchor" href="#various-api-simplifications"></a>å„ç§APIç®€åŒ–</h3>
<div class="paragraph">
<p><strong>æ—¶é—´</strong> ï¼šåœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰çš„å¤„ç†æ—¶é—´çš„è¿è¥å•†è¿™æ ·åšåªé€šè¿‡<code>Duration</code>å‹ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œå¸¦æœ‰<code>*Millis</code>åç¼€çš„å˜ä½“ä½¿ç”¨ä¸€ä¸ª<code>long</code>å’Œä¸€ä¸ª<code>TimeUnit</code>æ¥è¡¨ç¤ºæŒç»­æ—¶é—´ã€‚è¿™äº›å˜ä½“å·²åœ¨3.1.0ä¸­åˆ é™¤ã€‚</p>
</div>
<div class="paragraph">
<p><strong>é”™è¯¯å»¶è¿Ÿ</strong> ï¼šå¦ä¸€ä¸ªå¤„ç†åç¼€çš„è·¨é¢†åŸŸå˜æ›´ï¼šä¸€äº›è¿ç®—ç¬¦å…·æœ‰å¯é€‰çš„é…ç½®ï¼Œåœ¨è¿™äº›é…ç½®ä¸­ï¼Œä»–ä»¬å¯ä»¥ç»„åˆå¤šä¸ªé”™è¯¯å¹¶åœ¨æœ€åå‘å‡º<code>onError</code>ä¿¡å·ï¼Œå…è®¸æŸäº›å€¼ä»ä½¿å…¶åœ¨ç»“æœåºåˆ—ä¸­å‡ºç°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå†…éƒ¨åºåˆ—å‘å‡º<code>onError</code> ï¼Œ <code>flatMap</code>å¯ä»¥ç«‹å³åœæ­¢ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼ æ’­è¯¥é”™è¯¯ä¹‹å‰ç»§ç»­åˆå¹¶å…¶ä»–å†…éƒ¨åºåˆ—ä¸­çš„å…ƒç´ ã€‚</p>
</div>
<div class="paragraph">
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¯¥å¯é€‰è¡Œä¸ºåœ¨APIä¸­è¡¨ç¤ºä¸º<code>boolean</code>æ ‡å¿—å‚æ•°ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåç¼€ä¸º<code>DelayError</code>çš„å•ç‹¬å˜ä½“ã€‚åœ¨3.1.0ä¸­ï¼Œæ‰€æœ‰è¿™äº›å˜ä½“éƒ½è¿›è¡Œäº†å¯¹é½ï¼Œä»¥ä¸€è‡´åœ°ä½¿ç”¨<code>*DelayError</code>åç¼€è€Œä¸æ˜¯booleanæ ‡å¿—ã€‚</p>
</div>
<div class="paragraph">
<p><strong>ç®€åŒ–çš„æ¥å£</strong> ï¼šä¸€äº›ä¸“é—¨çš„æ¥å£ä¹Ÿå·²è¢«åˆ é™¤ï¼Œä»¥ä¾¿ä½¿ç”¨æ›´ç®€å•æˆ–æ›´é€šç”¨çš„æ›¿ä»£æ–¹æ³•ï¼š</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Cancellation</code>æ¥å£å·²è¢«åˆ é™¤ï¼Œè½¬è€Œä½¿ç”¨æ›´é€šç”¨çš„â€œ <code>Disposable</code>æ¥å£ã€‚</p>
</li>
<li>
<p><code>TimedScheduler</code>ç•Œé¢å·²è¢«åˆ é™¤ã€‚å°‘æ•°å‡ ä¸ªæ²¡æœ‰æ—¶é—´èƒ½åŠ›çš„<code>Scheduler</code>ä¼šæŠ›å‡º<code>RejectedExecutionException</code>è¡¨æ˜æ¯å½“æœ‰äººå°è¯•åœ¨å…¶ä¸Šä½¿ç”¨<code>schedulePeriodically</code> ã€‚å¦å¤–ï¼Œå·²ä»<code>Scheduler#shutdown</code>ä¸­åˆ é™¤äº†Disposableï¼Œä»¥æ”¯æŒ<code>dispose()</code> ã€‚</p>
</li>
<li>
<p>ç”¨äºè‡ªçœçš„å¤šä¸ªæ¥å£å·²ç®€åŒ–ä¸ºå•ä¸ª<code>Scannable</code>æ¥å£ï¼Œè¯¥æ¥å£é€šè¿‡æ“ä½œå‘˜çš„<code>scan(Scannable.Attr)</code></p><code>scan(Scannable.Attr)</code></li><code>scan(Scannable.Attr)</code></ul><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></article><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></div><code>scan(Scannable.Attr)</code></body></html>