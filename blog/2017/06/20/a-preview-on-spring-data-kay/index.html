<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>A preview on Spring Data Kay</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="A preview on Spring Data Kay" />
<meta name="twitter:description" content="&lt;div class=&quot;paragraph&quot;&gt; 
 &lt;p&gt;As we’ve just shipped the fourth milestone release of Spring Data release train Kay, let’s take a look at the changes and features that come with the 13 modules on the train since our first milestone. This blog post covers a set of changes but is no means comprehensive of the 550+ changes between M2 and M4. To get a full list of changes, take a look into our &lt;a href=&quot;https://jira.spring.io/issues/?filter=15640&quot;&gt;Jira&lt;/a&gt; for &lt;a href=&quot;https://jira.spring.io/issues/?filter=15455&quot;&gt;Kay M1&lt;/a&gt;, &lt;a href=&quot;https://jira.spring.io/issues/?filter=15456&quot;&gt;M2&lt;/a&gt;, &lt;a href=&quot;https://jira.spring.io/issues/?filter=15537&quot;&gt;M3&lt;/a&gt;, and &lt;a href=&quot;https://jira.spring.io/issues/?filter=15637&quot;&gt;M4&lt;/a&gt; changes.&lt;/p&gt; 
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt; 
 &lt;p&gt;Here’s a curated list of our key changes:&lt;/p&gt; 
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt; 
 &lt;ul&gt; 
  &lt;li&gt; &lt;p&gt;Adjustments in the reactive support&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Composable repositories&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Improved naming scheme for CRUD methods&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Fluent MongoOperations API&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Kotlin extension for MongoDB’s Template API&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;MongoDB Collation Support&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Redis client configuration&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Cassandra Lightweight transaction support and Query/Update objects&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Java 9 compatibility&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Upgrade to Elasticsearch 5.4&lt;/p&gt; &lt;/li&gt; 
 &lt;/ul&gt; 
&lt;/div&gt;
" />
<meta name="twitter:creator" content="@mp911de" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/6494a9d91e9ffef9adc8253257f1b35e?s=200" />

<meta property="og:title" content="A preview on Spring Data Kay" />
<meta property="og:image" content="https://gravatar.com/avatar/6494a9d91e9ffef9adc8253257f1b35e?s=200" />
<meta property="og:description" content="&lt;div class=&quot;paragraph&quot;&gt; 
 &lt;p&gt;As we’ve just shipped the fourth milestone release of Spring Data release train Kay, let’s take a look at the changes and features that come with the 13 modules on the train since our first milestone. This blog post covers a set of changes but is no means comprehensive of the 550+ changes between M2 and M4. To get a full list of changes, take a look into our &lt;a href=&quot;https://jira.spring.io/issues/?filter=15640&quot;&gt;Jira&lt;/a&gt; for &lt;a href=&quot;https://jira.spring.io/issues/?filter=15455&quot;&gt;Kay M1&lt;/a&gt;, &lt;a href=&quot;https://jira.spring.io/issues/?filter=15456&quot;&gt;M2&lt;/a&gt;, &lt;a href=&quot;https://jira.spring.io/issues/?filter=15537&quot;&gt;M3&lt;/a&gt;, and &lt;a href=&quot;https://jira.spring.io/issues/?filter=15637&quot;&gt;M4&lt;/a&gt; changes.&lt;/p&gt; 
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt; 
 &lt;p&gt;Here’s a curated list of our key changes:&lt;/p&gt; 
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt; 
 &lt;ul&gt; 
  &lt;li&gt; &lt;p&gt;Adjustments in the reactive support&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Composable repositories&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Improved naming scheme for CRUD methods&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Fluent MongoOperations API&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Kotlin extension for MongoDB’s Template API&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;MongoDB Collation Support&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Redis client configuration&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Cassandra Lightweight transaction support and Query/Update objects&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Java 9 compatibility&lt;/p&gt; &lt;/li&gt; 
  &lt;li&gt; &lt;p&gt;Upgrade to Elasticsearch 5.4&lt;/p&gt; &lt;/li&gt; 
 &lt;/ul&gt; 
&lt;/div&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2017-06-20 13:16:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">A preview on Spring Data Kay</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/6494a9d91e9ffef9adc8253257f1b35e?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/mp911de">Mark Paluch</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2017-06-20 13:16:00.0">June 20, 2017</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="2958" href="/blog/2017/06/20/a-preview-on-spring-data-kay#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><div class="paragraph">
<p>As we&#8217;ve just shipped the fourth milestone release of Spring Data release train Kay, let&#8217;s take a look at the changes and features that come with the 13 modules on the train since our first milestone. This blog post covers a set of changes but is no means comprehensive of the 550+ changes between M2 and M4. To get a full list of changes, take a look into our <a href="https://jira.spring.io/issues/?filter=15640">Jira</a> for
<a href="https://jira.spring.io/issues/?filter=15455">Kay M1</a>,
<a href="https://jira.spring.io/issues/?filter=15456">M2</a>,
<a href="https://jira.spring.io/issues/?filter=15537">M3</a>, and
<a href="https://jira.spring.io/issues/?filter=15637">M4</a> changes.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a curated list of our key changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adjustments in the reactive support</p>
</li>
<li>
<p>Composable repositories</p>
</li>
<li>
<p>Improved naming scheme for CRUD methods</p>
</li>
<li>
<p>Fluent MongoOperations API</p>
</li>
<li>
<p>Kotlin extension for MongoDB&#8217;s Template API</p>
</li>
<li>
<p>MongoDB Collation Support</p>
</li>
<li>
<p>Redis client configuration</p>
</li>
<li>
<p>Cassandra Lightweight transaction support and Query/Update objects</p>
</li>
<li>
<p>Java 9 compatibility</p>
</li>
<li>
<p>Upgrade to Elasticsearch 5.4</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We&#8217;d love to hear your feedback and you&#8217;ll find how to get in touch with us at the end of this post.</p>
</div>
<div class="sect1">
<h2 id="changes-in-our-reactive-support"><a class="anchor" href="#changes-in-our-reactive-support"></a>Changes in our reactive support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After we laid some <a href="https://spring.io/blog/2016/11/28/going-reactive-with-spring-data">significant groundwork</a> with our initial draft for reactive data access with Redis, Cassandra and MongoDB late last year, Couchbase has joined the reactive party. The Couchbase driver is fully reactive built on RxJava 1, so the reactive Template API uses RxJava 1. Couchbase repositories work smoothly with RxJava 1 &amp; 2 and Reactive Stream types.</p>
</div>
<div class="paragraph">
<p>Meanwhile, we added support for RxJava 2 types with our predefined <code>RxJava2CrudRepository</code> and <code>RxJava2SortingRepository</code> interfaces so you can use RxJava 2 types with all reactive repositories (Apache Cassandra, Couchbase, and MongoDB).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Repository
interface RxJava2PersonRepostitory extends
                    RxJava2SortingRepository&lt;Person, String&gt; {

  Flowable&lt;Person&gt; findByFirstnameAndLastname(String firstname, String lastname);

  Maybe&lt;Person&gt; findByLastname(String lastname);

  Single&lt;Person&gt; findProjectedByLastname(Maybe&lt;String&gt; lastname);

  Observable&lt;ProjectedPerson&gt; findProjectedByLastname(Single&lt;String&gt; lastname);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Spring Data goes GA in the next few months. That&#8217;s after RxJava 1&#8217;s feature freeze which won&#8217;t be maintained after March 2018 anymore. Therefore, we decided to deprecate our RxJava 1 repositories and to remove them with the upcoming release candidate. Rest assured, RxJava 1 support remains functional so you can copy these interfaces into your project code if you require RxJava 1 repositories.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re a user of reactive MongoDB repositories, you might be interested to hear that we renamed <code>@InfiniteStream</code> to <code>@Tailable</code> to reflect the underlying cursor although infinite stream sounds quite fancy.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="composable-repositories"><a class="anchor" href="#composable-repositories"></a>Composable repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data Repositories are a tool to implement DDD-style repositories.
The implementation of them has been designed to consist of 3 major parts: a store-specific base implementation, a query execution engine to back query methods and an optional custom implementation to link customized functionality into a repository instance.</p>
</div>
<div class="paragraph">
<p>Over time, we found that our initial design was limited when it comes to repository implementation aspects.
A repository can provide Query-by-Example operations via <code>QueryByExampleExecutor</code> or Querydsl support though <code>QuerydslPredicateExecutor</code>. Both are orthogonal features to a store-specific base repository implementation and required some trickery to work.</p>
</div>
<div class="paragraph">
<p>The situation is similar to the custom implementation part: only a single custom implementation object was supported which required to bring all functionality you want to link into the repository object.</p>
</div>
<div class="paragraph">
<p>Composable repositories eliminate the mentioned design limitations by turning the composition-oriented approach into a first class citizen.
A repository no is longer limited to a base implementation and a custom implementation but composed of fragments.
A fragment represents an interface along with an implementation object.
Multiple fragments form a composition used to implement a repository.</p>
</div>
<div class="paragraph">
<p>Consider the following repository declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">class Person extends Contact {
  // …
}

interface PersonRepository extends CrudRepository&lt;Person, String&gt;,
                                      ContactFragment,
                                      PersonBatchExecutor {
}

interface ContactFragment {
  Iterable&lt;Contact&gt; search(ContactQuery query);
}

interface PersonBatchExecutor {
  void bulkEdit(PersonQuery query, PersonUpdate update);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Up above, we have a simple domain object <code>Person</code> which is also a <code>Contact</code>.
The repository is composed of CRUD operations: a <code>Contact</code> search via <code>ContactFragment</code> and some bulk operations through <code>PersonBatchExecutor</code>.
Each interface repository is a fragment interface backed by an implementation.</p>
</div>
<div class="paragraph">
<p>Calls to the repository methods are routed according to their method implementations. The CRUD operations get routed to their store-specific implementations while a call to <code>search(ContactQuery query)</code> is routed to the user-provided implementation of <code>ContactFragment</code> (shown below).</p>
</div>
<div class="paragraph">
<p>While bootstrapping, the configuration component scans for implementations of the <em>declared</em> fragment interfaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">interface ContactFragment {
  Iterable&lt;Contact&gt; search(ContactQuery query);
}

class ContactFragmentImpl implements ContactFragment {

  @Override
  Iterable&lt;Contact&gt; search(ContactQuery query) {
    // …
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fragment implementations are fully-featured Spring beans.
They are looked up by name using the fragment interface name and adding the implementation postfix, i.e. by default the implementation for <code>ContactFragment</code> is looked up as <code>ContactFragmentImpl</code>.</p>
</div>
<div class="sect2">
<h3 id="ordering-of-overrides"><a class="anchor" href="#ordering-of-overrides"></a>Ordering of Overrides</h3>
<div class="paragraph">
<p>Java allows composition of interfaces that declare the same method multiple times.
From an API perspective, multiple methods with the same name and signature are merged into a single method without further differentiation.</p>
</div>
<div class="paragraph">
<p>On the implementation side, there can be multiple implementations available
that declare the same method signature.
Composable repositories use the <strong>interface declaration order</strong> to disambiguate amongst multiple implementations.</p>
</div>
<div class="paragraph">
<p>Look at the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public interface ContactFragment {
  Iterable&lt;Contact&gt; search(ContactQuery query);
}

public interface PersonFragment {
  Iterable&lt;Contact&gt; search(ContactQuery query);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// Calls search(…) on ContactFragment
public interface PersonRepository implements CrudRepository&lt;Person, String&gt;,
  ContactFragment, PersonFragment {
  …
}

// Calls search(…) on PersonFragment
public interface PersonRepository implements CrudRepository&lt;Person, String&gt;,
  PersonFragment, ContactFragment {
  …
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first declaration of <code>PersonRepository</code> will first invoke the <code>search(…)</code> method on <code>ContactFragmentImpl</code> as <code>ContactFragment</code> is declared first.
Thus, the second declaration will pick <code>PersonFragmentImpl</code> for the invocation of the <code>search(…)</code> method.</p>
</div>
<div class="paragraph">
<p>Store-specific aspects (like Querydsl) and the base implementation are fallbacks if no fragment contributes an implementation.</p>
</div>
<div class="paragraph">
<p>Composite repositories are an option to link custom implementation fragments. They provide a powerful way to define a single query and hook it in without losing the rest of Spring Data&#8217;s pre-built options.
If you previously used the custom implementation functionality, rest assured, those will continue as expected.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="improved-naming-for-crud-repository-methods"><a class="anchor" href="#improved-naming-for-crud-repository-methods"></a>Improved naming for CRUD repository methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the first generation of Spring Data the naming scheme for methods in <code>CrudRepository</code> caused a couple problems. Especially the methods taking parameters that are generic type variables. Under some circumstances (such as domain or identifier type implementing <code>Iterable</code>) they could effectively resolve to the same methods and cause ambiguities caused by <code>save(…)</code> and <code>delete(…)</code>.</p>
</div>
<div class="paragraph">
<p>With the Kay release, we decided to rename methods guided by:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Be able to find methods by name and (raw) parameter types.</p>
</li>
<li>
<p>Methods named <code>…All(…)</code> affect a collection of items and/or return a collection.</p>
</li>
<li>
<p>Methods taking an identifier are named <code>…ById(…)</code>.</p>
</li>
<li>
<p>Let&#8217;s drop the <code>ID extends Serializable</code> requirement.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We no longer require <code>Serializable</code> identifiers after the method rename. It&#8217;s a constraint that was introduced by JPA&#8217;s identifier handling while Spring Data was purely used with JPA. Our NoSql stores do not enforce this serializable identifiers so removing this requirement reduces complexity at many places.</p>
</div>
<div class="paragraph">
<p>The new <code>CrudRepository</code> features a consistent naming scheme without causing resolution ambiguities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">interface CrudRepository&lt;T, ID&gt; extends Repository&lt;T, ID&gt; {

    S save(S entity);

    Iterable&lt;S&gt; saveAll(Iterable&lt;S&gt; entities)

    Optional&lt;T&gt; findById(ID id);

    boolean existsById(ID id);

    Iterable&lt;T&gt; findAllById(Iterable&lt;ID&gt; ids);

    void deleteById(ID id);

    void delete(T entity);

    void deleteAll(Iterable&lt;? extends T&gt; entities);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, what if you previously had a property named <code>id</code> which isn&#8217;t the entity identifier? Doesn&#8217;t a query method for this property clash with <code>findById(…)</code> and the other …ById(…)` methods?. It does.</p>
</div>
<div class="paragraph">
<p>If you run in such a scenario, you can insert a custom distinction in your method name, like <code>findPersonById(…)</code> if you work with <code>Person</code> entities. Spring Data&#8217;s method parsing uses prefix keywords like <code>find</code>, <code>exists</code>, <code>count</code>, and <code>delete</code> and a terminating <code>By</code> keyword. Everything you put in between <code>find</code> and <code>By</code> makes your method name more expressive and does not affect query derivation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fluent-mongooperations-api"><a class="anchor" href="#fluent-mongooperations-api"></a>Fluent MongoOperations API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>MongoOperations</code> interface is one of the central components when it comes to more low level interaction with MongoDB.
It offers a wide range of methods covering needs from collection / index creation and CRUD operations to more advanced functionality like map-reduce and aggregations.</p>
</div>
<div class="paragraph">
<p>Looking at <code>MongoOperations</code> one can find multiple overloads for each and every method. Most of them just cover optional / nullable parts of the API. While this can be quite handy, it also gets verbose almost the point of being unreadable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// ...excerpt from MongoOperations

&lt;T&gt; List&lt;T&gt; find(Query query, Class&lt;T&gt; entityClass);
&lt;T&gt; List&lt;T&gt; find(Query query, Class&lt;T&gt; entityClass, String collectionName);

&lt;T&gt; T findOne(Query query, Class&lt;T&gt; entityClass);
&lt;T&gt; T findOne(Query query, Class&lt;T&gt; entityClass, String collectionName);

&lt;T&gt; CloseableIterator&lt;T&gt; stream(Query query, Class&lt;T&gt; entityType);
&lt;T&gt; CloseableIterator&lt;T&gt; stream(Query query, Class&lt;T&gt; entityType, String collectionName);</code></pre>
</div>
</div>
<div class="paragraph">
<p>With <code>FluentMongoOperations</code> we&#8217;ve introduced an interface specifically tailored for common methods of <code>MongoOperations</code> providing a more readable, fluent API.
The entry points <code>insert(…)</code>, <code>find(…)</code>, <code>update(…)</code>, etc. follow a natural naming schema based on the operation to execute.
Moving on from the entry point the API is designed to only offer context dependent methods guiding towards a terminating method that invokes the actual <code>MongoOperations</code> counterpart.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at a concrete example.
Imagine you&#8217;ve got a collection of Star Wars characters that includes <code>Jedi</code>s.
In classic <code>MongoOperations</code> style the lookup of all entities in that collection would look something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Query query = new BasicQuery(new Document());
List&lt;SWCharacter&gt; all = ops.find(query, SWCharacter.class, "star-wars");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>FluentMongoOperations</code> this above can be expressed as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">List&lt;SWCharacter&gt; all = ops.find(SWCharacter.class)
  .inCollection("star-wars")
  .all();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>SWCharacter</code> defines the collection via <code>@Document</code> or you are using the class name as the collection name, the <code>….inCollection("star-wars")</code> step can be skipped as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">List&lt;SWCharacter&gt; all = ops.find(SWCharacter.class).all();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes a collection in MongoDB holds entites of different types. Like a <code>Jedi</code> within a collection of <code>SWCharacter</code>s. Refining the request via <code>….as(Jedi.class)</code> will cause the query result to be mapped against <code>Jedi</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Optional&lt;Jedi&gt; luke = ops.find(SWCharacter.class)
  .as(Jedi.class)
  .matching(query(where("firstname").is("luke")))
  .one();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Switching between retrieving a single entity, multiple ones as <code>List</code> or <code>Stream</code> like is done via the terminating methods <code>first()</code>, <code>one()</code>, <code>all()</code> or <code>stream()</code>.</p>
</div>
<div class="paragraph">
<p>When writing a geo-spatial query via <code>near(NearQuery)</code> the number of terminating methods is altered to just the ones valid for executing a <code>geoNear</code> command in MongoDB fetching entities as <code>GeoResult</code> within <code>GeoResults</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">GeoResults&lt;Jedi&gt; results = mongoOps.query(SWCharacter.class)
  .as(Jedi.class)
  .near(alderaan) // NearQuery.near(-73.9667, 40.78).maxDis…
  .all();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same approach of working applies to the other API parts of <code>FluentMongoOperations</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">ops.update(Jedi.class)
  .matching(query(where("lastname").is("solo")))
  .apply(update("firstname", "han"))
  .upsert();

ops.remove(SWCharacter.class)
  .matching(query(where("name").is("yoda")))
  .all();

ops.aggregateAndReturn(Jedi.class)
  .by(newAggregation(Person.class, project("firstna...
  .all();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mongodb-collation-support"><a class="anchor" href="#mongodb-collation-support"></a>MongoDB Collation Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MongoDB 3.4 introduced native support for <a href="https://docs.mongodb.com/manual/reference/collation/">Collations</a> that allow to specify language-specific rules for <code>String</code> comparison.
Collations can now be used throughout most of MongoDB commands eg. when creating a collection or an index, but also for <code>query</code>, <code>findAndModify</code>, <code>remove</code> and other operations.</p>
</div>
<div class="paragraph">
<p>It is definitely worth mentioning that as of MongoDB 3.4 it is now possible to set up multiple indices involving the same fields using different collations. This is important for the query plan in MongoDB itself as only queries defining the same collation can actually make use of the index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">CollectionOptions collectionOptions = CollectionOptions.empty()
  .collation(Collation.of("en_US")
     .strength(primary().includeCase()));

template.createCollection("persons", collectionOptions);

IndexDefinition index = new Index()
  .named("en-name-idx")
  .on("name", Direction.ASC)
  .collation(Collation.of("en").caseFirst(off()));

template.indexOps("persons").ensureIndex(index);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no collation is provided, MongoDB will use a simple binary comparison that can also be set explicitly via <code>Collation.simple()</code>.
To use <code>Collation</code> support throughout Spring Data MongoDB we&#8217;ve introduced various extension points for <code>Query</code>, <code>NearQuery</code>, <code>AggregationOptions</code>, and others.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Query query = query(where("firstName").is("Amél"))
  .collation(collation);

NearQuery nearQuery = near(-73.9667, 40.78)
  .query(where(…))
  .collation(Collation.of("fr")));

AggregationOptions options = new AggregationOptions.Builder()
  .collation(Collation.of("en_US"))
  .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the time of writing, defining <code>Collation</code> via <code>@Indexed</code> is not supported. Moving forward we&#8217;ll add this feature utilizing Java 8 repeatable annotations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redis-client-configuration"><a class="anchor" href="#redis-client-configuration"></a>Redis client configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A configuration of Spring Data Redis connection factories can be cumbersome if you consider all of the various Redis operation modes (Standalone, Sentinel, Cluster).
Using client-specific aspects (SSL support, pooling etc.) requires additional configuration objects or conditional configuration.</p>
</div>
<div class="paragraph">
<p>We organized Redis client configuration to environment- and client-specific parts. The environment-specific configuration contains endpoints, database, and authentication (password-based) details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RedisStandaloneConfiguration</code> - used for Redis Standalone. You can use it also to connect with a specific Redis Master or Slave node if using replication.</p>
</li>
<li>
<p><code>RedisSentinelConfiguration</code> - used when your Redis nodes are managed by Redis Sentinel.</p>
</li>
<li>
<p><code>RedisClusterConfiguration</code> - used for Redis Cluster.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lettuce and Jedis, the two supported clients, are configured each with their client-specific configurations: <code>LettuceClientConfiguration</code> and <code>JedisClientConfiguration</code>. We introduced this split because each client evolves independent from the other, and there is only little common ground.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">RedisStandaloneConfiguration envConfig =
  new RedisStandaloneConfiguration("localhost", 6379);
envConfig.setDatabase(2);
envConfig.setPassword(RedisPassword.of("foobared"));

LettuceClientConfiguration clientConfig = LettuceClientConfiguration.builder()
        .clientResources(…)
        .clientOptions(…)
        .commandTimeout(Duration.ofMillis(500))
        .shutdownTimeout(Duration.ofMillis(200))
        .useSsl().disablePeerVerification()
        .build();

connectionFactory = new LettuceConnectionFactory(envConfig, clientConfig);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">RedisStandaloneConfiguration envConfig =
  new RedisStandaloneConfiguration("localhost", 6379);
envConfig.setDatabase(2);
envConfig.setPassword(RedisPassword.of("foobared"));

JedisClientConfiguration clientConfig = JedisClientConfiguration.builder()
        .clientName(environment.getProperty("spring.application.name"))
        .connectTimeout(Duration.ofMillis(200))
        .readTimeout(Duration.ofMillis(500))
        .useSsl().sslParameters(…).and()
        .usePooling().poolConfig(…)
        .build();

connectionFactory = new JedisConnectionFactory(envConfig, clientConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Previously, some properties were set on the connection factory, some with client-specific objects. The client configuration is immutable. You can still use connection factories without a client configuration, but we deprecated configuration setters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-data-for-apache-cassandra"><a class="anchor" href="#spring-data-for-apache-cassandra"></a>Spring Data for Apache Cassandra</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With this release we streamlined the module&#8217;s library layout.
Spring Data for Apache Cassandra used to ship with two libraries, Spring CQL and Spring Data Cassandra.
With Spring Data Kay, we merged <code>spring-cql</code> into <code>spring-data-cassandra</code> as the majority of usage is inside <code>spring-data-cassandra</code> anyway.
With this change, we a couple of package renames have been applied already.
We&#8217;re going to finish those for the upcoming RC1 release.</p>
</div>
<div class="sect2">
<h3 id="cassandra-query-update-objects"><a class="anchor" href="#cassandra-query-update-objects"></a>Cassandra Query &amp; Update objects</h3>
<div class="paragraph">
<p><code>Query</code> and <code>Update</code> objects allow fine-grained control over query predicates and selective updates.
Previously, we supported either persisting the whole row by updating all properties or CQL-based updates without mapping.</p>
</div>
<div class="paragraph">
<p><code>Query</code> and <code>Update</code> now use details from the entity model to support property-to-Cassandra column mapping.
Our query mapper converts values (mapped UDTs, datatype-specific conversions) prior query execution, so you&#8217;re not required to convert query values to their Cassandra-specific representation yourself.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">class Person {

  @PrimaryKeyColumn(name="last_name", ordinal = 0, type = PARTITIONED)
  String lastname;

  @PrimaryKeyColumn(name="firs_tname", ordinal = 1, type = CLUSTERED)
  String firstname;

  List&lt;String&gt; episodes;

  String mood;
}

Query query = Query.query(Criteria.where("lastname").is("White"))
  .and(Criteria.where("firstname").in("Walter", "Skyler"))
  .sort(Sort.by("firstname").ascending())
  .withAllowFiltering()
  .limit(10);

List&lt;Person&gt; people = cassandraOperations.select(query, Person.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Query</code> contains filter criteria, sorting and a set of query options to control query execution.
You can use it with the Template API with various <code>select</code> and <code>update</code> methods to query data for selection or to constrain the update selection.</p>
</div>
<div class="paragraph">
<p>Speaking of which, <code>Update</code> allows you to specify a set of update assignments.
<code>Update</code> supports all update operators as of Apache Cassandra 3.10 (set, add to list, remove from collection, and more).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Update update = Update.update("mood", "Bad")
  .addTo("episodes").appendAll("S1E1", "S1E2");

Query query = Query.query(Criteria.where("lastname").is("White"))
  .and(Criteria.where("firstname").is("Skyler"))
  .queryOptions(WriteOptions.builder().ttl(100).build());

cassandraOperations.update(query, update, Person.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find more details about <code>Query</code> and <code>Update</code> in the <a href="https://docs.spring.io/spring-data/cassandra/docs/current-SNAPSHOT/reference/html/#cassandra-template.query">reference documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="lightweight-transactions"><a class="anchor" href="#lightweight-transactions"></a>Lightweight transactions</h3>
<div class="paragraph">
<p>Lightweight transactions (compare-and-set transactions) are supported with <code>insert</code> and <code>update</code> operations for entities through their query options.
The operation result reports whether the transaction was applied by returning either the entity or <code>null</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">InsertOptions lwtOptions = InsertOptions.builder().withIfNotExists().build();

User user = new User("heisenberg", "Walter", "White");
User inserted = template.insert(user, lwtOptions);
User second = template.insert(user, lwtOptions); // returns null</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our support for basic lightweight transactions ships with this release and we would love to hear your feedback.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="java-9-compatibility"><a class="anchor" href="#java-9-compatibility"></a>Java 9 compatibility</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="the-problem"><a class="anchor" href="#the-problem"></a>The problem</h3>
<div class="paragraph">
<p>The upcoming Java 9 release will behave differently from past releases.
It will break many existing applications that don&#8217;t adapt to the changes.
This is caused by the Java Platform Module System (JPMS) and the associated encapsulation of Java internals.
There are three potential reasons applications might break:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Illegal use of Internal API. One gets an exception along these lines:</p>
<div class="literalblock">
<div class="content">
<pre>module &lt;xyz&gt; does not "open &lt;package.abc&gt;" to unnamed module @&lt;random string&gt;</pre>
</div>
</div>
</li>
<li>
<p>Changed behavior of interal API (or removed internal API).</p>
</li>
<li>
<p>Unnamed modules by default only get access to the module <code>java.base</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is sufficient for many cases, but unfortunately not for all.
So one might have to specify additional module as dependencies using <code>--add-modules &lt;module name&gt;</code>.
<a href="http://cr.openjdk.java.net/~mr/jigsaw/ea/module-summary.html">There is a list of all modules and their content</a> defined by Java itself which will help finding the proper module name to use.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-data-compatibility"><a class="anchor" href="#spring-data-compatibility"></a>Spring Data compatibility</h3>
<div class="paragraph">
<p>We are happy to announce that Spring Data is a good citizen on Java 9!</p>
</div>
<div class="paragraph">
<p>The team made changes to ensure that our code runs with Java 9 without any <code>--permit-illegal-access</code> command line parameter, which would be required to fix issues mentioned in the first bullet point. We also don&#8217;t use any APIs for which the second bullet point applies.</p>
</div>
<div class="paragraph">
<p>Unfortunately there are a couple caveats to this compatibility:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It does not include some stores.
We track what we know about their respective compatibility in <a href="https://jira.spring.io/browse/DATACMNS-1033">DATACMNS-1033</a></p>
</li>
<li>
<p>You might still run into the issue of the third bullet.
One known example is an exception like this:</p>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException</code></pre>
</div>
</div>
<div class="paragraph">
<p>This can be fixed by adding <code>--add-modules java.xml.bind</code> to the call to <code>java</code></p>
</div>
</li>
<li>
<p>Currently, we can&#8217;t use generated property accessors (introduced in the Ingalls release train) as a generated property accessor can no longer be injected into the originating class loader. This causes a slight performance regression.
We are still looking for a Java 9 compatible version that has the same performance characteristic as the Java 8 compatible version (see <a href="https://jira.spring.io/browse/DATACMNS-1080">DATACMNS-1080</a> for details).</p>
</li>
<li>
<p>Compiling and executing the tests still requires <code>--permit-illegal-access</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Everybody involved wants to make a migration to Java 9 as smooth as possible and you can really help with that.
Get the early access release of JDK 9 and build and run your application with it.
If you are having problems, please file an issue with the project you experience problems with.</p>
</div>
</div>
<div class="sect2">
<h3 id="unnamed-modules"><a class="anchor" href="#unnamed-modules"></a>Unnamed modules</h3>
<div class="paragraph">
<p>If you already looked into project Jigsaw, you might have noted that Spring Data comes without a proper module descriptor, i.e. as a so called unnamed module.
This has the one major drawback that we can&#8217;t specify module dependencies in the module definition, but have to provide them at execution time using the <code>--add-modules</code> command line option.</p>
</div>
<div class="paragraph">
<p>The problem is that all the libraries we depend on would need to provide a module descriptor as well.
And while we have very few required dependencies, we have many optional dependencies.
Only when all these libraries provide proper modules can we start providing proper modules ourself.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrade-to-elasticsearch-5-4"><a class="anchor" href="#upgrade-to-elasticsearch-5-4"></a>Upgrade to Elasticsearch 5.4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We upgraded Spring Data Elasticsearch (thanks to Moshin and Artur!) to 5.4 using the transport client.</p>
</div>
<div class="paragraph">
<p>This upgrade required some changes in our public API. The <code>scan</code> methods were replaced with <code>scroll</code> methods returning paged results in the Template API and aligned our annotations (<code>@CompletionField</code>, <code>@Field</code>, <code>@GeoPointField</code>, <code>@InnerField</code>) to Elasticsearch&#8217;s API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s been a long road since milestone one of Spring Data Kay and we hope you got a good impression of what the release train will ship.
We&#8217;re going to add some minor features for the upcoming release candidate with a rather short stint to GA in early August.
Reach out via <a href="https://jira.spring.io/browse/DATACMNS">Jira</a>, <a href="https://stackoverflow.com/questions/tagged/spring-data">Stack Overflow</a>, <a href="https://twitter.com/SpringData">Twitter</a>, or <a href="https://gitter.im/spring-projects/spring-data">Gitter</a> if you have questions, feedback or want to discuss features with us.</p>
</div>
</div>
</div></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2958;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>