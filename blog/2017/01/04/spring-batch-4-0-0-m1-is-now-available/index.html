<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring Batch 4.0.0。M1现在可用</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Spring Batch 4.0.0.M1 is now available">
<meta name="twitter:description" >
<meta name="twitter:creator" content="@michaelminella">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/ab8031806cdd258238e67411157d215a?s=200">

<meta property="og:title" content="Spring Batch 4.0.0.M1 is now available">
<meta property="og:image" content="https://gravatar.com/avatar/ab8031806cdd258238e67411157d215a?s=200">
<meta class="anchor" name="what-rsquo-s-new" property="og:description" content="<p>We are pleased to announce that Spring Batch 4.0.0.M1 is now available via Github and the Pivotal download repository. This release represents the first milestone for the Spring Batch 4.0 release. Many thanks to all of those who contributed to this release.</p>
<h2><a href=" #what-rsquo-s-ne="=">What’s new?
<p>We have taken this opportunity to look at Spring Batch from a new light in a few areas. Specifically:<br>* Java baseline<br>* Dependency baseline<br>* Java configuration</p>
<h3><a href="#java-baseline" class="anchor" name="java-baseline"></a>Java Baseline</h3>
<p>Spring Batch has historically followed the baseline of Spring Framework with the intent of providing the best interoperability between Spring Batch and Spring Framework versions as possible. Spring Batch 4.0 is taking this opportunity to upgrade to Spring Framework 5 as the minimum required version. With this, Java 8 will be required for Spring Batch 4. If you’ve been using Spring Batch with Java 8 already, this should be a pretty transparent as Spring Batch has had a solid Java 8 story for years now. Doing things like the following has been supported as long as Java 8 has been around:</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2017-01-04 22:31:44.884">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category content--title">
<div>工程</div>
</div>
<div class="blog-category active content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Batch 4.0.0。M1现在可用</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon releases"></div>
<a class="category">发布</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/ab8031806cdd258238e67411157d215a?s=20&d=mm"> <a class="author" rel="author" href="/team/mminella">迈克尔·米内拉</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2017-01-04 22:31:44.884">一月04，2017</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2017/01/04/spring-batch-4-0-0-m1-is-now-available#disqus_thread" data-disqus-identifier="2761">
</a></div>
</div>
</header>
<div class="blog--post"><p>我们很高兴地宣布Spring Batch 4.0.0。现在可以通过Github和Pivotal下载存储库使用M1。该发行版是Spring Batch 4.0发行版的第一个里程碑。非常感谢所有对此版本做出贡献的人。</p><h2><a href="#what-rsquo-s-new" class="anchor" name="what-rsquo-s-new"></a>什么是新的？</h2>
<p>我们借此机会从几个方面以崭新的视角审视了Spring Batch。特别：<br>* Java基准<br>*依赖基准<br>* Java配置</p><h3><a href="#java-baseline" class="anchor" name="java-baseline"></a> Java基准</h3>
<p>从历史上讲，Spring Batch遵循Spring Framework的基线，目的是在Spring Batch和Spring Framework版本之间提供最佳的互操作性。Spring Batch 4.0借此机会升级到最低要求的版本Spring Framework 5。这样，Spring Batch 4将需要Java 8。如果您已经将Spring Batch与Java 8一起使用，那么这应该是相当透明的，因为Spring Batch在Java 8上已有很长的历史了。只要Java 8存在，就支持以下操作：</p>
<pre><code class="prettyprint">@Bean
public JdbcCursorItemReader&lt;Foo&gt; reader() {
	JdbcCursorItemReader&lt;Foo&gt; reader = new JdbcCursorItemReader&lt;&gt;();

	reader.setDataSource(this.dataSource);
	reader.setName(&quot;fooReader&quot;);
	reader.setSql(&quot;SELECT * FROM FOO ORDER BY FIRST&quot;);
	reader.setRowMapper((rs, rowNum) -&gt; {
		Foo foo = new Foo();

		foo.setFirst(rs.getInt(&quot;FIRST&quot;));
		foo.setFirst(rs.getString(&quot;SECOND&quot;));
		foo.setFirst(rs.getString(&quot;THIRD&quot;));

		return foo;
	});

	return reader;
}
</code></pre>
<p>就像Spring Framework 5在Java 8上重新建立基线一样，这对框架内部产生了较大的影响。现在，我们作为框架的开发人员和贡献者，将能够利用您一直使用的Java 8有趣的功能。</p><h3><a href="#dependencies-baseline" class="anchor" name="dependencies-baseline"></a>依赖基准</h3>
<p>除了根据Spring Framework重新对Java进行基线设置之外，Spring Batch 4还全面研究了所有依赖项并将其升级到最新版本。这与最新技术一样重要，因为它能够为我们提供的功能提供支持。我们需要依赖那些依赖项的受支持版本，以便可以解决一些错误。因此，我们需要跟上他们当前支持的版本。Hibernate就是一个例子。Spring Batch 3.x支持将Hibernate返回4.2.x。但是，如果发现了Hibernate 4.2.x的问题，则无法在此处解决。JBoss只会在5.2中修复它。因此，我们需要保持最新。Spring Framework 5已经对其所有依赖项进行了全面审查。Spring Batch 4更新了所有依赖关系，以与Spring Framework保持一致。</p><h3><a href="#java-configuration" class="anchor" name="java-configuration"></a> Java配置</h3>
<p>Spring Batch的Java配置不是新的。Spring Batch 2.2具有<code>@EnableBatchProcessing</code>注释以及相关的构建器。但是，Java配置故事仍然有很多需要改进的地方。例如，使用Spring Batch 3.0.7中提供的功能， <code>FlatFileItemReader</code>可能类似于以下内容：</p>
<pre><code class="prettyprint">@Bean
public FlatFileItemReader reader(Resource resource) throws Exception {
	FlatFileItemReader&lt;Foo&gt; reader = new FlatFileItemReader&lt;&gt;();

	reader.setName(&quot;fooReader&quot;);
	reader.setResource(resource);

	BeanWrapperFieldSetMapper&lt;Foo&gt; fieldSetMapper = 
		new BeanWrapperFieldSetMapper&lt;&gt;();
	fieldSetMapper.setTargetType(Foo.class);
	fieldSetMapper.afterPropertiesSet();

	DelimitedLineTokenizer tokenizer = new DelimitedLineTokenizer();
	tokenizer.setNames(String [] {&quot;first&quot;, &quot;second&quot;, &quot;third&quot;});
	tokenizer.afterProperitesSet();

	DefaultLineMapper lineMapper = new DefaultLineMapper();
	lineMapper.setLineTokenizer(tokenizer);
	lineMapper.setFieldSetMapper(fieldSetMapper);

	reader.setLineMapper(lineMapper);
}
</code></pre>
<p>但是，在Spring Batch 4中，我们引入了一组构建器，这些构建器将简化所提供的读者和作家的构建。上面使用Spring Batch 3.0.x的示例使用Spring Batch 4中的构建器将其转换为以下内容：</p>
<pre><code class="prettyprint">@Bean
public FlatFileItemReader reader(Resource resource) {
	return new FlatFileItemReaderBuilder&lt;Foo&gt;()
		.name(&quot;fooReader&quot;)
		.resource(resource)
		.delimited()
		.names(new String[] {&quot;first&quot;, &quot;second&quot;, &quot;third&quot;})
		.targetType(Foo.class)
		.build();
}
</code></pre>
<p>从这个里程碑开始， <code>FlatFileItemReader</code> ， <code>FlatFileItemWriter</code> ， <code>JdbcCursorItemReader</code>和<code>JdbcBatchItemWriter</code>可用。在Spring Batch 4正式发布之前，我们将介绍其他项目读取器和项目写入器。</p><h2><a href="#what-rsquo-s-next" class="anchor" name="what-rsquo-s-next"></a>下一步是什么？</h2>
<p>展望未来，我们计划为其他Spring Batch读者和作家实施构建器。我们还计划全面阅读我们的文档。该文档当前采用了我们认为的“ XML优先”方法。对于Spring Batch的GA版本，我们打算将文档重构为“ java优先”的方法，以更好地了解如何使用java配置来配置批处理应用程序。请注意进一步的里程碑，并在Spring Framework 5正式发布之后不久就可以普遍使用Spring Batch 4。</p><h2><a href="#what-do-you-think" class="anchor" name="what-do-you-think"></a>你怎么看？</h2>
<p>我们期待您在<a href="https://jira.spring.io/browse/BATCH/">Jira</a> ， <a href="https://stackoverflow.com/tags/spring-batch">StackOverflow中</a>对这些新功能的反馈，或者通过Twitter <a href="https://twitter.com/michaelminella">@michaelminella</a>直接给我！</p>
<p><a href="https://projects.spring.io/spring-batch/">Spring Batch处理</a> <a href="https://github.com/spring-projects/spring-batch">源于GitHub</a> | <a href="https://docs.spring.io/spring-batch/4.0.x/reference/html/index.html">参考文件</a></p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2761;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>