<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>What&#39;s New in Spring Data Release Ingalls?</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="What&#39;s New in Spring Data Release Ingalls?" />
<meta name="twitter:description" content="&lt;div class=&quot;paragraph&quot;&gt; 
 &lt;p&gt;As you probably have seen, we have &lt;a href=&quot;https://spring.io/blog/2017/01/26/spring-data-release-train-ingalls-goes-ga&quot;&gt;just announced&lt;/a&gt; the GA release of Spring Data release train Ingalls. As the release is packed with way too many features to cover them in a release announcement, I would like to use this post to take a deeper look at the changes and features that come with the 15 modules on the train.&lt;/p&gt; 
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt; 
 &lt;h2 id=&quot;housekeeping&quot;&gt;&lt;a class=&quot;anchor&quot; href=&quot;#housekeeping&quot;&gt;&lt;/a&gt;Housekeeping&lt;/h2&gt; 
 &lt;div class=&quot;sectionbody&quot;&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;A very fundamental change in the release train’s dependencies is the upgrade to Spring Framework 4.3 (currently 4.3.6) as the baseline. Other dependency upgrades are mostly driven by major version bumps of the underlying store drivers and implementations that need to be reflected in potential breaking changes to the API exposed by those modules.&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;Ingalls also ships with a new Spring Data Module: Spring Data LDAP. The Spring LDAP project has shipped Spring Data repository support for quite a while. After a couple of glitches and incompatibilities we decided to move LDAP repository support into a separate Spring Data module so that it is more closely aligned to the release train.&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;Another big change to the module setup is that Spring Data for Apache Cassandra has now become a core module, which means it now has been and is going to be maintained by the Spring Data team at Pivotal. A great chance to thank the previous core maintainers David Webb and Matthew T. Adams for all their efforts.&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;Besides those very fundamental changes, the team has been working on a whole bunch of new features:&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;ulist&quot;&gt; 
   &lt;ul&gt; 
    &lt;li&gt; &lt;p&gt;Use of method handles for property access in conversion subsystem.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Support for XML and JSON based projections for REST payloads (Commons)&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Cross-origin resource sharing with Spring Data REST&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;More MongoDB Aggregation Framework operators for array, arithmetic, date and set operations.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Support for Redis Geo commands.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Upgrade to Cassandra 3.0 with support for query derivation in repository query methods, User-defined types, Java 8 types (Optional, Stream), JSR-310 and ThreeTen Backport.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Support for Javaslang’s &lt;code&gt;Option&lt;/code&gt;, collection and map types for repository query methods.&lt;/p&gt; &lt;/li&gt; 
   &lt;/ul&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;These are the ones that I would like to discuss in the remainder of this post.&lt;/p&gt; 
  &lt;/div&gt; 
 &lt;/div&gt; 
&lt;/div&gt;
" />
<meta name="twitter:creator" content="@mp911de" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/6494a9d91e9ffef9adc8253257f1b35e?s=200" />

<meta property="og:title" content="What&#39;s New in Spring Data Release Ingalls?" />
<meta property="og:image" content="https://gravatar.com/avatar/6494a9d91e9ffef9adc8253257f1b35e?s=200" />
<meta property="og:description" content="&lt;div class=&quot;paragraph&quot;&gt; 
 &lt;p&gt;As you probably have seen, we have &lt;a href=&quot;https://spring.io/blog/2017/01/26/spring-data-release-train-ingalls-goes-ga&quot;&gt;just announced&lt;/a&gt; the GA release of Spring Data release train Ingalls. As the release is packed with way too many features to cover them in a release announcement, I would like to use this post to take a deeper look at the changes and features that come with the 15 modules on the train.&lt;/p&gt; 
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt; 
 &lt;h2 id=&quot;housekeeping&quot;&gt;&lt;a class=&quot;anchor&quot; href=&quot;#housekeeping&quot;&gt;&lt;/a&gt;Housekeeping&lt;/h2&gt; 
 &lt;div class=&quot;sectionbody&quot;&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;A very fundamental change in the release train’s dependencies is the upgrade to Spring Framework 4.3 (currently 4.3.6) as the baseline. Other dependency upgrades are mostly driven by major version bumps of the underlying store drivers and implementations that need to be reflected in potential breaking changes to the API exposed by those modules.&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;Ingalls also ships with a new Spring Data Module: Spring Data LDAP. The Spring LDAP project has shipped Spring Data repository support for quite a while. After a couple of glitches and incompatibilities we decided to move LDAP repository support into a separate Spring Data module so that it is more closely aligned to the release train.&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;Another big change to the module setup is that Spring Data for Apache Cassandra has now become a core module, which means it now has been and is going to be maintained by the Spring Data team at Pivotal. A great chance to thank the previous core maintainers David Webb and Matthew T. Adams for all their efforts.&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;Besides those very fundamental changes, the team has been working on a whole bunch of new features:&lt;/p&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;ulist&quot;&gt; 
   &lt;ul&gt; 
    &lt;li&gt; &lt;p&gt;Use of method handles for property access in conversion subsystem.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Support for XML and JSON based projections for REST payloads (Commons)&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Cross-origin resource sharing with Spring Data REST&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;More MongoDB Aggregation Framework operators for array, arithmetic, date and set operations.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Support for Redis Geo commands.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Upgrade to Cassandra 3.0 with support for query derivation in repository query methods, User-defined types, Java 8 types (Optional, Stream), JSR-310 and ThreeTen Backport.&lt;/p&gt; &lt;/li&gt; 
    &lt;li&gt; &lt;p&gt;Support for Javaslang’s &lt;code&gt;Option&lt;/code&gt;, collection and map types for repository query methods.&lt;/p&gt; &lt;/li&gt; 
   &lt;/ul&gt; 
  &lt;/div&gt; 
  &lt;div class=&quot;paragraph&quot;&gt; 
   &lt;p&gt;These are the ones that I would like to discuss in the remainder of this post.&lt;/p&gt; 
  &lt;/div&gt; 
 &lt;/div&gt; 
&lt;/div&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2017-01-30 12:47:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">What&#39;s New in Spring Data Release Ingalls?</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/6494a9d91e9ffef9adc8253257f1b35e?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/mp911de">Mark Paluch</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2017-01-30 12:47:00.0">January 30, 2017</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="2804" href="/blog/2017/01/30/what-s-new-in-spring-data-release-ingalls#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><div class="paragraph">
<p>As you probably have seen, we have <a href="https://spring.io/blog/2017/01/26/spring-data-release-train-ingalls-goes-ga">just announced</a> the GA release of Spring Data release train Ingalls.
As the release is packed with way too many features to cover them in a release announcement, I would like to use this post to take a deeper look at the changes and features that come with the 15 modules on the train.</p>
</div>
<div class="sect1">
<h2 id="housekeeping"><a class="anchor" href="#housekeeping"></a>Housekeeping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A very fundamental change in the release train&#8217;s dependencies is the upgrade to Spring Framework 4.3 (currently 4.3.6) as the baseline.
Other dependency upgrades are mostly driven by major version bumps of the underlying store drivers and implementations that need to be reflected in potential breaking changes to the API exposed by those modules.</p>
</div>
<div class="paragraph">
<p>Ingalls also ships with a new Spring Data Module: Spring Data LDAP.
The Spring LDAP project has shipped Spring Data repository support for quite a while.
After a couple of glitches and incompatibilities we decided to move LDAP repository support into a separate Spring Data module so that it is more closely aligned to the release train.</p>
</div>
<div class="paragraph">
<p>Another big change to the module setup is that Spring Data for Apache Cassandra has now become a core module, which means it now has been and is going to be maintained by the Spring Data team at Pivotal.
A great chance to thank the previous core maintainers David Webb and Matthew T. Adams for all their efforts.</p>
</div>
<div class="paragraph">
<p>Besides those very fundamental changes, the team has been working on a whole bunch of new features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use of method handles for property access in conversion subsystem.</p>
</li>
<li>
<p>Support for XML and JSON based projections for REST payloads (Commons)</p>
</li>
<li>
<p>Cross-origin resource sharing with Spring Data REST</p>
</li>
<li>
<p>More MongoDB Aggregation Framework operators for array, arithmetic, date and set operations.</p>
</li>
<li>
<p>Support for Redis Geo commands.</p>
</li>
<li>
<p>Upgrade to Cassandra 3.0 with support for query derivation in repository query methods, User-defined types, Java 8 types (Optional, Stream), JSR-310 and ThreeTen Backport.</p>
</li>
<li>
<p>Support for Javaslang&#8217;s <code>Option</code>, collection and map types for repository query methods.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These are the ones that I would like to discuss in the remainder of this post.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performance-improvements"><a class="anchor" href="#performance-improvements"></a>Performance improvements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="methodhandles-for-improved-object-access"><a class="anchor" href="#methodhandles-for-improved-object-access"></a>MethodHandles for improved object access</h3>
<div class="paragraph">
<p>A major theme of our release train was to improve the performance in how our object-to-store mapping subsystem accesses data from domain classes.
Traditionally, Spring Data has used reflection for that, either inspecting the fields directly or invoking accessor methods of properties.</p>
</div>
<div class="paragraph">
<p>Although the perfomance of reflection has significantly improved in Java 8, there is still a different way that we can use to even bring the performance close to native access: <code>MethodHandle</code>s.
They are especially fast to use if they are held in static fields of a class, which poses a bit of a challenge to us as we do not know about the structure the domain types you want to persist beforehand.
However, we already apply a similar kind of optimization to the creation of domain object instances by using ASM to generate tailor made factories that invoke constructors directly.
We now went ahead and applied the same idea to our <code>PersistentPropertyAccessor</code> implementations: we inspect the types and ASM-generate a class that holds static final <code>MethodHandle</code>s, that our API to read and write properties then use to avoid reflection.
In case the classes expose public API (e.g. accessors) we just use those.</p>
</div>
<div class="paragraph">
<p>In case you are interested, the implementation code can be found <a href="https://github.com/spring-projects/spring-data-commons/blob/17366031071c68ddb87a9de1debac6f1dda85524/src/main/java/org/springframework/data/mapping/model/ClassGeneratingPropertyAccessorFactory.java">here</a>.
However, brace yourselves, ASM code might feel a bit complicated to read.
All Spring Data modules using the object-to-store mapping benefit from this change (i.e. JPA does not) if you are running at least Java 7. You can find more details in the <a href="https://jira.spring.io/browse/DATACMNS-809">ticket requesting that change</a>.
We have seen performance improvements from 20 to 70%.</p>
</div>
</div>
<div class="sect2">
<h3 id="domain-event-publication-from-aggregate-roots"><a class="anchor" href="#domain-event-publication-from-aggregate-roots"></a>Domain event publication from aggregate roots</h3>
<div class="paragraph">
<p><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#context-functionality-events">Spring Application Events</a> are usually used to publish technical events within an application. However, they&#8217;re also a great tool to decouple parts of a system by using the infrastructure for domain events. This is usually implemented like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">class OrderManagement {

  private final ApplicationEventPublisher publisher;
  private final OrderRepository orders;

  @Transactional
  void completeOrder(Order order) {

    OrderCompletedEvent event = order.complete();
    orders.save(order);
    publisher.publish(event);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See how the aggregate root produces an event which a service component then publishes via Spring&#8217;s <code>ApplicationEventPublisher</code>. The pattern is a nice one in general but involves quite a bit of ceremony and introduces a technical framework dependency in a business component which one might like to avoid.</p>
</div>
<div class="paragraph">
<p>With the Spring Data Ingalls release train, repositories now inspect the aggregates handed to <code>save(…)</code> methods for the aggregate method annotation <code>@DomainEvents</code>, invokes that method and automatically publishes the returned objects via the event publisher. So assuming an <code>Order.complete()</code> implementation looking something like this (<code>AbstractAggregateRoot</code> is a Spring Data provided type containing the annotated methods):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">class Order extends AbstractAggregateRoot {

  Order complete() {
    register(new OrderCompletedEvent(this));
    return this;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>the client code can be simplified to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">class OrderManagement {

  private final OrderRepository orders;

  @Transactional
  void completeOrder(Order order) {
    repository.save(order.complete());
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, there are no references to Spring infrastructure anymore. The event publication is taken care of by the component responsible for it: the aggregate root. Read more about that new mechanism in the <a href="https://docs.spring.io/spring-data/commons/docs/current/reference/html/#core.domain-events">reference documentation</a>. There are more advanced ideas regarding domain events circling around in the team currently. Watch this space for further updates.</p>
</div>
</div>
<div class="sect2">
<h3 id="pagination"><a class="anchor" href="#pagination"></a>Pagination</h3>
<div class="paragraph">
<p>Pagination queries with Spring Data MongoDB and Spring Data JPA now benefit from an <a href="https://github.com/spring-projects/spring-data-commons/blob/17366031071c68ddb87a9de1debac6f1dda85524/src/main/java/org/springframework/data/repository/support/PageableExecutionUtils.java#L46">improved fetching strategy</a> that more aggressively tries to avoid executing a count query.
Constructing a <code>Page</code> requires the fetched data and usually the total record count returned by the query.
While data queries can be optimized with range selection and indexes, count queries are quite expensive because they require a scan of the table or an index.
In case you request the last, only partially-filled page, we can skip counting the records as the toal number of elements can be calculated from the offset and numer of items in the result page.</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb-dbref-resolution"><a class="anchor" href="#mongodb-dbref-resolution"></a>MongoDB DBRef resolution</h3>
<div class="paragraph">
<p>Another performance-related change was made in Spring Data MongoDB&#8217;s <code>DBRef</code> fetching. Collections of references are fetched in a <a href="https://github.com/spring-projects/spring-data-mongodb/blob/b79474c92c231ee4f2b3bd77fdde12878002acef/spring-data-mongodb/src/main/java/org/springframework/data/mongodb/core/convert/MappingMongoConverter.java#L1253">single bulk-operation</a> if the references in the collection point to the same database collection. That means, wen can basically read the related collection using a single query instead of one for each element.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xml-and-json-based-projections-for-rest-payloads"><a class="anchor" href="#xml-and-json-based-projections-for-rest-payloads"></a>XML and JSON based projections for REST payloads</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://spring.io/blog/2014/09/09/spring-data-release-train-evans-goes-ga">Evans</a> and <a href="https://spring.io/blog/2016/05/03/what-s-new-in-spring-data-hopper">Hopper</a> release trains shipped with projection features that allow customizing the view on existing domain objects by applying projection interfaces.
Projections can be used in application code (repositories or manually implemented Spring MVC controllers) or with Spring Data REST to expose a dedicated view on a domain object through a web endpoint.
The projection also could have been used to bind form submissions (see this example for details).
With Ingalls we now extend that support to handle JSON and XML requests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@RestController
class UserController {

  /**
   * Receiving POST requests supporting both JSON and XML.
   */
  @PostMapping(value = "/")
  HttpEntity&lt;String&gt; post(@RequestBody UserPayload user) {

    return ResponseEntity
      .ok(String.format("firstname: %s, lastname: %s",
        user.getFirstname(), user.getLastname()));
  }
}

@ProjectedPayload
public interface UserPayload {

  @XBRead("//firstname")
  @JsonPath("$..firstname")
  String getFirstname();

  @XBRead("//lastname")
  @JsonPath("$..lastname")
  String getLastname();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Projection interfaces are annotated with <code>@ProjectedPayload</code> to enable projection and projection method annotations contain a <a href="https://github.com/jayway/JsonPath#getting-started">JSON path</a> or <a href="https://xmlbeam.org/t01.html#E01:_Printing_some_weather_data">XPath expression</a>.</p>
</div>
<div class="paragraph">
<p>If these property annotations are omitted, we are going to assume defaults (i.e. <code>$.firstname</code> or <code>/firstname</code> etc. in the example above).
The fundamental idea here is to&#8201;&#8212;&#8201;instead of using an object structure to map incoming data&#8201;&#8212;&#8201;rather point exactly to the parts of a payload that you are interested in.
The use of JSON Path expressions or XPath allows you to be more lenient about the actual location of the element you want to access so that a change in the payload structure does not necessarily break the consumer.
See how the example above looksup <code>firstname</code> anywhere in the document.
If the party producing the JSON decided to all of a sudden nest that into e.g. a <code>user</code> document or XML sub node, nothing would need to change in the consuming code.</p>
</div>
<div class="paragraph">
<p>If you want to use that kind of payload access on the client, you can simply register the corresponding <code>HttpMessageConverter</code> instances on a <code>RestTemplate</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Configuration
class Config {

  @Bean
  RestTemplateBuilder builder() {
    return new RestTemplateBuilder()
      .additionalMessageConverters(new ProjectingJackson2HttpMessageConverter())
      .additionalMessageConverters(new XmlBeamHttpMessageConverter());
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The projection binding support uses <a href="https://github.com/jayway/JsonPath">JsonPath</a> to evaluate JSON-path expressions and <a href="https://xmlbeam.org/">XMLBeam</a> to evaluate XPath expressions. You can find a complete example for this in in the <a href="https://github.com/spring-projects/spring-data-examples/tree/c523b8d468484075658a2b3c63a4a718c54bab16/web/projection">Spring Data Examples repository</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cross-origin-resource-sharing-with-spring-data-rest"><a class="anchor" href="#cross-origin-resource-sharing-with-spring-data-rest"></a>Cross-Origin Resource Sharing with Spring Data REST</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using client-side JavaScript requests inside of browsers is restricted by the <a href="https://en.wikipedia.org/wiki/Same-origin_policy">same-origin policy</a>. Requesting data from other sources than the application server is a forbidden by default because it is a cross-origin request. Enabling Cross-Origin Resource Sharing (CORS) requires the target server to provide <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS headers</a> to be sent with every HTTP response. The Ingalls release of Spring Data REST now allows you to easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@CrossOrigin
public interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-http" data-lang="http">GET /customers/1 HTTP/1.1
Origin: http://localhost</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Vary: Origin
ETag: "0"
Access-Control-Allow-Origin: http://localhost
Access-Control-Allow-Credentials: true
Last-Modified: Tue, 24 Jan 2017 09:38:01 GMT
Content-Type: application/hal+json;charset=UTF-8</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exported domain classes and repositories can be annotated with <code>@CrossOrigin</code> to enable CORS and the annotation can be used to customize the setup.
For more global configuration you can use <code>RepositoryRestConfigurer.configureRepositoryRestConfiguration(…)</code> to gain full control over the CORS setup across all Spring Data REST exposed resources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Component
public class SpringDataRestCustomization extends
  RepositoryRestConfigurerAdapter {

  @Override
  public void configureRepositoryRestConfiguration(
    RepositoryRestConfiguration config) {

    config.getCorsRegistry().addCorsMapping("/person/**")
      .allowedOrigins("http://domain2.com")
      .allowedMethods("PUT", "DELETE")
      .allowedHeaders("header1", "header2", "header3")
      .exposedHeaders("header1", "header2")
      .allowCredentials(false).maxAge(3600);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find more details about that in the <a href="https://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.configuring-cors">reference documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="new-mongodb-aggregation-framework-operators"><a class="anchor" href="#new-mongodb-aggregation-framework-operators"></a>New MongoDB Aggregation Framework operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MongoDB team adds <a href="https://docs.mongodb.com/manual/release-notes/3.4/#aggregation">new aggregation framework operators</a> on a regular basis.
With the Ingalls release train, we took the chance to enhance Spring Data MongoDB&#8217;s set of available operators to align with MongoDB ones and how you interact with these.
This release adds native support for the following aggregation operators and aggregation stages:</p>
</div>
<div class="sect2">
<h3 id="aggregation-operators"><a class="anchor" href="#aggregation-operators"></a>Aggregation operators</h3>
<div class="ulist">
<ul>
<li>
<p><code>$anyElementTrue</code>, <code>$allElementsTrue</code>, <code>$setEquals</code>, <code>$setIntersection</code>, <code>$setUnion</code>, <code>$setDifference</code>, <code>$setIsSubset</code></p>
</li>
<li>
<p><code>$filter</code>, <code>$in</code>, <code>$indexOfArray</code>, <code>$range</code>, <code>$reverseArray</code>, <code>$reduce</code>, <code>$zip</code></p>
</li>
<li>
<p><code>$indexOfBytes</code>, <code>$indexOfCP</code>, <code>$split</code>, <code>$strLenBytes</code>, <code>$strLenCP</code>, <code>$substrCP</code></p>
</li>
<li>
<p><code>$stdDevPop</code>, <code>$stdDevSamp</code></p>
</li>
<li>
<p><code>$abs</code>, <code>$ceil</code>, <code>$exp</code>, <code>$floor</code>, <code>$ln</code>, <code>$log</code>, <code>$log10</code>, <code>$pow</code>, <code>$sqrt</code>, <code>$trunc</code></p>
</li>
<li>
<p><code>$arrayElementAt</code>, <code>$concatArrays</code>, <code>$isArray</code></p>
</li>
<li>
<p><code>$literal</code>, <code>$let</code></p>
</li>
<li>
<p><code>$dayOfYear</code>, <code>$dayOfMonth</code>, <code>$dayOfWeek</code>, <code>$year</code>, <code>$month</code>, <code>$week</code>, <code>$hour</code>, <code>$minute</code>, <code>$second</code>, <code>$millisecond</code>, <code>$dateToString</code>, <code>$isoDayOfWeek</code>, <code>$isoWeek</code>, <code>$isoWeekYear</code></p>
</li>
<li>
<p><code>$count</code>, <code>$cond</code>, <code>$ifNull</code>, <code>$map</code>, <code>$switch</code>, <code>$type</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="aggregation-stages"><a class="anchor" href="#aggregation-stages"></a>Aggregation stages</h3>
<div class="ulist">
<ul>
<li>
<p><code>$facet</code>, <code>$bucket</code>, <code>$bucketAuto</code></p>
</li>
<li>
<p><code>$replaceRoot</code>, <code>$unwind</code>, <code>$graphLookup</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Aggregation operators have entry points for creation and are built in a fluent style.
Multiple aggregators are grouped in facades like <code>ArrayOperators</code>, <code>ArithmeticOperators</code> and many more.
Field references and aggregation expressions can be used in the entry point methods.
Entry points to aggregation stage operators are accessible via <code>Aggregation</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Aggregation.newAggregation(
  project()
    .and(ArrayOperators.arrayOf("instock").concat("ordered")).as("items")
);

Aggregation.newAggregation(
  project()
    .and(ArithmeticOperators.valueOf("quizzes").sum()).as("quizTotal")
);

Aggregation.newAggregation(
  group().stdDevSamp("age").as("ageStdDev")
);

Aggregation.newAggregation(Employee.class,
  match(Criteria.where("name").is("Andrew")),
  graphLookup("employee")
    .startWith("reportsTo")
    .connectFrom("reportsTo")
    .connectTo("name")
    .depthField("depth")
    .maxDepth(5)
    .as("reportingHierarchy"));

Aggregation.newAggregation(bucketAuto("field", 5)
  .andOutputExpression("netPrice + tax").as("total")
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any currently unsupported aggregation operators and expressions can be used by implementing <code>AggregationOperation</code> or <code>AggregationExpression</code> respectively.
Please also note that some of these operators were introduced in very recent MongoDB versions and can only be used with those.</p>
</div>
<div class="paragraph">
<p>The growing number of operators opens up a whole lot new set of possibilities to combine them with each other.
Operators can be nested in various combinations, which can sometimes lead to code that is hard to read.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">newAggregation(
  project()
    .and(ConditionalOperators.when(Criteria.where("a").gte(42))
      .then("answer")
      .otherwise("no-answer"))
      .as("deep-tought")
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To simplify this code we now support Spring Expression Language (SpEL) expressions to formulate the same projection like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">newAggregation(
  project()
    .andExpression("cond(a &gt;= 42, 'answer', 'no-answer')")
    .as("deep-tought")
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>SpEL support in aggregations is not something entirely new.
In fact, it has been available since Spring Data MongoDB 1.6.
So far it supported arithmetic operations (like <code>'$items.price' * '$items.quantity'</code>).
The new bit that Ingalls adds here is that now aggregation operators can be expressed as functions that accept parameters.
You pass fields to aggregation operators by using their field names.
The aggregation framework then evaluates SpEL expressions and creates the BSON documents for the aggregation operator.</p>
</div>
<div class="paragraph">
<p>The gateway to SpEL is <code>AggregationSpELExpression.expressionOf(…)</code> that allows handing in SpEL expressions everywhere you are able to hand in an <code>AggregationExpression</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">newAggregation(
  group("number")
    .first(expressionOf("cond(a &gt;= 42, 'answer', 'no-answer')"))
    .as("deep-tought")
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the
<a href="https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongo.aggregation">reference documentation</a> or the <a href="https://github.com/spring-projects/spring-data-examples/blob/9a2e95a784cf449bdda372668ae78e8d5c06956d/mongodb/aggregation/src/test/java/example/springdata/mongodb/aggregation/SpringBooksIntegrationTests.java">MongoDB Aggegation Framework example</a> for further details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redis-geo-indexes"><a class="anchor" href="#redis-geo-indexes"></a>Redis Geo Indexes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redis 3.2 supports geo indexing and we received great support from our community regarding geo indexes.
We ship geo index support with Ingalls that is available through <code>RedisTemplate</code> and Redis repositories. Let us have a look at an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">geoOperations.geoAdd("Sicily", new Point(13.361389, 38.115556), "Arigento");
geoOperations.geoAdd("Sicily", new Point(15.087269, 37.502669), "Catania");
geoOperations.geoAdd("Sicily", new Point(13.583333, 37.316667), "Palermo");

GeoResults&lt;GeoLocation&lt;String&gt;&gt; result =
  geoOperations.geoRadiusByMember("Sicily", "Palermo",
    new Distance(100, DistanceUnit.KILOMETERS));

List&lt;String&gt; geohashes = geoOperations.geoHash("Sicily", "Arigento", "Catania");
List&lt;Point&gt; points = geoOperations.geoPos("Sicily", "Arigento", "Palermo");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Geo indexes integrate seamless with your domain classes.
Domain objects with geospatial values can be indexed in a Geo index and queried through Redis repositories.
The following example shows domain class and repository interface declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class City {

  @Id String id;
  String name;

  @GeoIndexed Point location;
}

public interface CityRepository extends Repository&lt;City, String&gt; {

  List&lt;City&gt; findByLocationNear(Point point, Distance distance);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Declaring a repository query using the <code>Near</code> or <code>Within</code> keywords lets you use geospatial queries near a <code>Point</code> or within a <code>Circle</code>.
Note the <code>@GeoIndexed</code> annotation used on <code>location</code> allows the usage of a geo-index that can be used with the derived geospatial query method.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-data-for-apache-cassandra"><a class="anchor" href="#spring-data-for-apache-cassandra"></a>Spring Data for Apache Cassandra</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data for Apache Cassandra is now a core module maintained by the Spring Data team.
Besides the change in primary ownership of development effort, the Ingalls release train ships with a series of noteworthy changes to the module itself.</p>
</div>
<div class="paragraph">
<p>We upgraded to the Datastax Java Driver 3.1 and so Spring Data for Apache Cassandra now supports Apache Cassandra 3.0 (1.2, 2.0, 2.1, 2.2 and 3.0, up to 3.9).</p>
</div>
<div class="paragraph">
<p>This release also ships with support for query derivation so that you do not necessarily have to use string queries but can derive an Apache Cassandra CQL query from the query method name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public interface BasicUserRepository extends Repository&lt;User, Long&gt; {

  /**
   * Derived query method.
   * Creates {@code SELECT * FROM users WHERE username = ?0}.
   */
  User findUserByUsername(String username);

  /**
   * Derived query method using SASI (SSTable Attached Secondary Index)
   * features through the {@code LIKE} keyword.
   * This query corresponds with
   * {@code SELECT * FROM users WHERE lastname LIKE '?0'}.
   * {@link User#lastname} is not part of the
   * primary key so it requires a secondary index.
   */
  List&lt;User&gt; findUsersByLastnameStartsWith(String lastnamePrefix);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find examples for query derivation for Spring Data for Apache Cassandra in our <a href="https://github.com/spring-projects/spring-data-examples/blob/c523b8d468484075658a2b3c63a4a718c54bab16/cassandra/example/src/main/java/example/springdata/cassandra/basic/BasicUserRepository.java">examples repository</a>.</p>
</div>
<div class="paragraph">
<p>Query derivation supports all predicates provided by Apache Cassandra and ships with predicates for SASI (SSTable Attached Secondary Index) indexes. In this context, query derivation is in not opinionated about primary keys or columns with a secondary index. There is no support for <code>AllowFiltering</code> <a href="https://jira.spring.io/browse/DATACASS-376">yet</a>. Also, repository query methods also support <code>Stream</code> as a return type. Using a <code>Stream</code> does not preload the whole result set but iterates over the results as you pull on the stream.</p>
</div>
<div class="paragraph">
<p>To round things off, you can now use JSR-310 and ThreeTen back-port types as well as JodaTime types in your domain classes that were added as part of the Java 8 support story.
JSR-310 types are converted to native Apache Cassandra data types. Refer to the revised <a href="https://docs.spring.io/spring-data/cassandra/docs/1.5.0.RELEASE/reference/html/#mapping-conversion">reference documentation</a> or our <a href="https://github.com/spring-projects/spring-data-examples/tree/c523b8d468484075658a2b3c63a4a718c54bab16/cassandra/java8">Java 8 examples</a> for details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Order {

  @Id String id;
  LocalDate orderDate;
  ZoneId zoneId;
}

public interface OrderRepository extends Repository&lt;Order, String&gt; {

  /**
   * Method parameters are converted according the registered
   * Converters into Cassandra types.
   */
  @Query("SELECT * from pizza_orders WHERE orderdate = ?0 and zoneid = ?1 ALLOW FILTERING")
  Order findOrderByOrderDateAndZoneId(LocalDate orderDate, ZoneId zoneId);

  /**
   * String-based query using native data types.
   */
  @Query("SELECT * from pizza_orders WHERE orderdate = ?0 and zoneid = ?1 ALLOW FILTERING")
  Order findOrderByDate(com.datastax.driver.core.LocalDate orderDate, String zoneId);

  /**
   * Streaming query.
   */
  Stream&lt;Order&gt; findAll();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Data type support is configurable by registering custom conversions.
For details on this, make sure you check out the examples <a href="https://github.com/spring-projects/spring-data-examples/tree/c523b8d468484075658a2b3c63a4a718c54bab16/cassandra/example/src/main/java/example/springdata/cassandra/convert">dedicated to this on GitHub</a>.</p>
</div>
<div class="paragraph">
<p>A last noteworthy feature is user-defined types (UDT).
With Ingalls, you can now either use mapped user-defined types embedded in your domain classes or just use the native <code>UDTValue</code> type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Table
public class Person {

  @Id int id;

  String firstname, lastname;
  Address current;
  List&lt;Address&gt; previous;

  @CassandraType(type = Name.UDT, userTypeName = "address")
  UDTValue alternative;
}

@UserDefinedType
public class Address {
  String street, zip, city;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explicitly mapped iser-defined types map structured values to <code>UDTValue</code> under the coverts so thatyyou can keep working with a domain class while the mapping is handled by Spring Data for Apache Cassandra.</p>
</div>
<div class="paragraph">
<p>UDT values are stored in a row which makes mapped UDTs embedded objects.
You can use UDTs as singular property or as part of a collection type.
If you are using schema creation, then user-defined types are created in the data store on application startup.
UDTs are value objects conceptually, which means that updates to UDT values (by saving a domain object) result in replacing the entire value.</p>
</div>
<div class="paragraph">
<p>For details on particular features please refer to the revised <a href="https://docs.spring.io/spring-data/cassandra/docs/1.5.0.RELEASE/reference/html/">reference documentation</a> or the <a href="https://github.com/spring-projects/spring-data-examples/tree/9a2e95a784cf449bdda372668ae78e8d5c06956d/cassandra/example/src/main/java/example/springdata/cassandra/udt">UDT example</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="support-for-javaslang"><a class="anchor" href="#support-for-javaslang"></a>Support for Javaslang</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data repositories now support <a href="http://www.javaslang.io/">Javaslang</a>'s <a href="https://static.javadoc.io/io.javaslang/javaslang/2.1.0-alpha/javaslang/control/Option.html"><code>Option</code></a> and collection types as return values for repository query methods. <code>Option</code> can be used as an alternative to JDK 8&#8217;s <code>Optional</code>, <a href="https://static.javadoc.io/io.javaslang/javaslang/2.1.0-alpha/javaslang/collection/Seq.html"><code>Seq</code></a> can be used as an alternative to JDK&#8217;s <code>List</code>. Javaslang&#8217;s <code>Set</code> and <code>Map</code> are supported, too, and transparently mapped from their JDK counterparts.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public interface PersonRepository extends Repository&lt;Person, Long&gt; {

    Option&lt;Person&gt; findById(Long id);

    Seq&lt;Person&gt; findByFirstnameContaining(String firstname);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information see the <a href="https://github.com/spring-projects/spring-data-examples/blob/a41f69127caba6f7b96c868336b93968c000f728/jpa/javaslang/src/test/java/example/PersonRepositoryIntegrationTests.java#L49-L73">JPA with Javaslang example</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-data-ldap"><a class="anchor" href="#spring-data-ldap"></a>Spring Data LDAP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring LDAP project has shipped support for Spring Data repositories itself for quite a while.
With Ingalls, we have extracted that support into a Spring Data module, so that changes that we make to our internal SPIs propagate to the LDAP based implementation more quickly.</p>
</div>
<div class="paragraph">
<p>If you are an existing Spring LDAP repositories user, you are affected by this change and need to adopt two changes to your project:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <a href="https://projects.spring.io/spring-data-ldap/#quick-start"><code>Spring Data LDAP</code></a> to your project dependencies.</p>
</li>
<li>
<p>Change the packages to the repository components from <code>org.springframework.ldap.repository</code> to <code>org.springframework.data.ldap.repository</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>That said, Spring LDAP 2.3.0 already removed its repository support and if you follow the steps above you can continue using LDAP repositories with Spring Data LDAP 1.0. Learn more about LDAP repositories by taking a look at our <a href="https://github.com/spring-projects/spring-data-examples/tree/9a2e95a784cf449bdda372668ae78e8d5c06956d/ldap/example">Spring Data LDAP example</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I hope I could give you a quick overview about the new features of the Ingalls release train. We&#8217;re looking forward to your feedback via our <a href="https://gitter.im/spring-projects/spring-data">Gitter channel</a>. Also, please go ahead and report any bugs you spot in our <a href="https://jira.spring.io">JIRA</a>. Happy coding!</p>
</div>
</div>
</div></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 2804;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>