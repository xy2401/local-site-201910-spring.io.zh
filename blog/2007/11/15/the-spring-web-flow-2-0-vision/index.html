<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring Web Flow 2.0愿景</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="The Spring Web Flow 2.0 Vision">
<meta name="twitter:description" href="http://www.springframework.org/node/556" content="<p>Spring Web Flow 2.0 M2 has just <a target=" _blan="="></head><body >released. I am particularly excited about this release because it sets the foundation we need to realize the bold vision we have for our community for the future. In this entry, I’ll explain what that vision is, and exactly what this foundation will enable. I’ll also go into detail about the architecture of Web Flow 2.0, and compare it to the 1.0 version.<br>
<h3>The Spring Web Flow 2.0 Vision</h3>
<br>
<p></p>
<p><em>* UPDATE: The vision above was updated on 1/11/08 after considering large amounts of feedback from the Spring community since The Spring Experience 2007. Based on that feedback, Spring Web Flow 2.0, scheduled to release in March 2008, will remain focused on the orchestration of controlled navigation and application transactions in a web application, usable as a complement to Spring MVC in an action-based MVC environment and JavaServerFaces in a component-based environment. When used with JSF, Spring Web Flow 2.0 can power an entire JSF-based web application as a “black box” or can be mixed with standard JSF navigation handlers that implement free-navigation requirements.</em> <em> 2.0, therefore, will be an<strong> </strong>evolutionary release adding first-class support for JSF and Ajax, supporting Java 1.4+, and providing full backwards compatibility with the SWF 1.0 flow definition language.</em></p>
">

<meta property="og:title" content="The Spring Web Flow 2.0 Vision">
<meta href="http://www.springframework.org/node/556" property="og:description" content="<p>Spring Web Flow 2.0 M2 has just <a target=" _blan="=">released. I am particularly excited about this release because it sets the foundation we need to realize the bold vision we have for our community for the future. In this entry, I’ll explain what that vision is, and exactly what this foundation will enable. I’ll also go into detail about the architecture of Web Flow 2.0, and compare it to the 1.0 version.<br>
<h3>The Spring Web Flow 2.0 Vision</h3>
<br>
<p></p>
<p><em>* UPDATE: The vision above was updated on 1/11/08 after considering large amounts of feedback from the Spring community since The Spring Experience 2007. Based on that feedback, Spring Web Flow 2.0, scheduled to release in March 2008, will remain focused on the orchestration of controlled navigation and application transactions in a web application, usable as a complement to Spring MVC in an action-based MVC environment and JavaServerFaces in a component-based environment. When used with JSF, Spring Web Flow 2.0 can power an entire JSF-based web application as a “black box” or can be mixed with standard JSF navigation handlers that implement free-navigation requirements.</em> <em> 2.0, therefore, will be an<strong> </strong>evolutionary release adding first-class support for JSF and Ajax, supporting Java 1.4+, and providing full backwards compatibility with the SWF 1.0 flow definition language.</em></p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2007-11-15 15:21:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
 <span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Web Flow 2.0愿景</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="null?s=20&d=mm"> <span class="author">基思·唐纳德</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2007-11-15 15:21:00.0">2007年11月15日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2007/11/15/the-spring-web-flow-2-0-vision#disqus_thread" data-disqus-identifier="116">
</a></div>
</div>
</header>
<div class="blog--post"><p>Spring Web Flow 2.0 M2刚刚<a href="http://www.springframework.org/node/556" target="_blank">发布</a> 。我对此发布感到特别兴奋，因为它为实现我们对社区未来的大胆愿景奠定了基础。在这篇文章中，我将解释该愿景是什么，以及该基础将实现什么。我还将详细介绍Web Flow 2.0的体系结构，并将其与1.0版本进行比较。<br></p><h3>Spring Web Flow 2.0愿景</h3><br>2.0的目标是将Spring Web Flow演变为一个受控的导航引擎，以提供对JavaServerFaces，流管理的持久性和本地异步事件处理（Ajax）的显着改进的支持。新的Spring Faces项目将基于Web Flow 2.0构建，以在Spring环境中为JSF视图提供一流的支持。此外，Web Flow将继续为基于Spring MVC的视图提供一流的支持，即使需要，即使在同一应用程序中，本机JSF和MVC视图也可用于全功能。<p></p><p><em>*更新：自从2007年春季体验以来，考虑了Spring社区的大量反馈之后，上述愿景已于1/11/08更新。根据这些反馈，计划于2008年3月发布的Spring Web Flow 2.0将继续专注于Web应用程序中受控导航和应用程序事务的编排，可在基于动作的MVC环境和JavaServerFaces中用作Spring MVC的补充。在基于组件的环境中。当与JSF一起使用时，Spring Web Flow 2.0可以作为“黑匣子”为整个基于JSF的Web应用程序提供动力，或者可以与实现自由导航要求的标准JSF导航处理程序混合使用。</em> <em> 因此，2.0将是<strong> </strong>演化版本增加了对JSF和Ajax的一流支持，支持Java 1.4+，并提供与SWF 1.0流定义语言的完全向后兼容性。</em></p><p>现在，我想进一步详细介绍Web Flow 2.0引擎体系结构，以及它与1.0版相比的情况。首先让我们从1.0的历史开始。<br></p><h3>1.0历史…</h3><br>在Spring Web Flow 1.0中，SWF控制器引擎负责Web请求生命周期的一半。一半与请求处理有关，通常称为<em>操作阶段</em> 。另一半（ <em>渲染阶段</em> ）已在调用者上推出：Spring MVC，Struts或JSF前端控制器。这可以在下面的SWF 1.0体系结构图中显示：<br><p align="center"><img border="0" alt="SWF 1.x架构" title="SWF 1.x架构" src="http://static.springframework.org/spring-webflow/images/webflow-1.x-arch.png"></p><br>这种架构的主要好处是自然地将Spring Web Flow引入到现有项目中。无论您使用的是Struts，Spring MVC还是JSF，都可以插入Web Flow来处理更复杂的用户交互，而其余部分则使用普通控制器。<p></p><p>这种方法的缺点是，在不导致前端控制器特定适配器的情况下，很难在请求生命周期的视图呈现阶段应用应用程序控制逻辑。例如，考虑对流管理持久性上下文的需求。当新流程执行开始时，应该分配这样的上下文；在新流程执行结束时，应该对其进行分配；在等待用户继续操作时，在中间视图渲染之后应断开连接。如果视图呈现不在流程的控制之下，那么如何在正确的时间发出断开回调？在异常处理，并发管理和安全性领域也存在类似的问题。</p><p>SWF 1.x方法的另一个缺点是，它需要重复工作才能使Web Flow“适应”某些环境，尤其是JSF FacesServlet。在JSF案例中，Web Flow和JSF实施都在争夺对URL的控制以及如何管理服务器端状态。<br></p><h3>进入Spring Web Flow 2.0</h3><br>从Web Flow 2.0 M2开始，整个Web请求生命周期现在都在Spring Web Flow的控制之下，包括视图渲染阶段。此外，Spring Web Flow现在可以使用任何视图技术呈现响应，并具有对Java Server Faces和基于Spring MVC的视图的一流支持。实际上，这意味着SWF 2.0是同类产品中为数不多的少数产品之一，它为所有类型的用户交互（无状态和有状态的）提供统一的控制器模型，并且还支持多视图技术。这也意味着现在可以使用本机Web Flow执行挂钩来观察整个Web请求生命周期，从而可以将安全性，异常处理，性能管理，并发管理和持久性上下文管理策略集中应用于请求生命周期的适当位置。<br>如下所示，新的SWF 2架构在Spring MVC DispatcherServlet内部运行：<br><p align="center"><img border="0" alt="SWF 2.x嵌入式体系结构" title="SWF 2.x嵌入式体系结构" src="http://static.springframework.org/spring-webflow/images/webflow-2.x-embedded-arch.png"></p><p></p>
<div align="left">细微但重要的区别。</div>
<div align="left"></div>
<div align="left">从Spring Web Flow 2.0 M2开始，已经证明了四种具体的Web Flow视图处理策略，并且可以在任何一个Web应用程序中使用这些策略中的一种或几种。这些策略中的每一个都在下面依次突出显示：</div>
<h4>Java Server Faces</h4><p>支持的第一个视图处理策略是Java Server Faces。通过Spring Faces项目，SWF引擎现在可以充当JSF的容器并完全驱动JSF UI组件生命周期，将SWF应用程序控制器模型的所有优势与JSF UI组件模型的所有优势相结合。因此，我们为社区介绍了以下内容：<br></p><ul><br> <li>一种以Spring为中心的方法，用于配置和部署使用JSF的Spring Web应用程序。为了启动并运行，您需要部署一个Spring Web Servlet并将其指向您的bean定义文件，这与今天配置Spring MVC Web应用程序的方式非常相似。不需要faces-config.xml或任何其他特殊的JSF工件。这使Spring用户非常容易利用JSF，而没有任何传统的缺点。如果需要，甚至可以在“嵌入式”模式下运行时，甚至可以在Spring MVC DispatcherServlet中使用JSF。</li><br></ul><br><ul><br> <li>自动支持POST + REDIRECT + GET模式，以防止使用浏览器导航按钮时重复提交和浏览器警告。出于相同的原因，这是可能的：Spring Web Flow本机支持此模式，并且我们已将JSF集成到我们的模型中。</li><br></ul><br><ul><br> <li>流管理的UI组件状态。这特别有趣，因为传统上使用JSF意味着要存储组件树的HTTP会话状态很多。现在，将JSF组件状态完全管理为SWF FlowExecution实例状态，这意味着该状态的存储方式取决于所使用的流执行存储库。这意味着可以实现没有会话存储的JSF应用程序。这也意味着会话存储永远不会分配给无状态或“ REST式”交互。这也意味着，当为状态流执行分配会话存储时，分配的存储量会更少，并且定义了该状态的范围（与传统的JSF Web应用程序相比，实际上通常更短）。</li><br></ul><br><h4>外部系统</h4><br>我们已经证明的第二种视图处理策略是SWF引擎能够通过HTTP与外部系统和对话上下文进行通信（尽管API与协议无关）。一个很好的例子是，一个电子购物网站可能会使用像paypal这样的第三方。可以说，您正在引导用户进行电子购物体验，作为这种体验的一部分，您需要暂停用户并将其重定向到Paypal，以完成付款授权过程。Paypal接管了授权付款的控制后，将回电给您，以便您可以从暂停的位置恢复用户的电子购物体验。通常，通过将外部服务传递给外部服务的回调URL（在完成时将重定向到该URL）来支持此功能。<p></p><p>现在，SWF引擎本身支持这种模式。为此，您只需向外部系统发出“外部重定向”。Spring Web Flow现在可以处理将正确的流执行回调URL嵌入到发送到外部系统的重定向中。<br></p><h4>资源资源</h4><br>我们已经证明的第三种视图处理策略是能够从资源包（例如.jar文件）中提供资源内容（图像，javascript文件，css文件等）的能力。当Spring Faces JSF组件渲染Ext和Dojo JavaScript小部件时，Spring Faces安装了一个预定义的“ REST-ful”流程，用于服务Ext和Dojo库所需的Javascript和CSS资源。<br><h4>Spring MVC视图</h4><br>最后，我们证明的第四种视图处理策略是能够提供基于Spring MVC的视图的功能。这使现有的Spring MVC视图模板可以像在Web Flow 2.0中一样一直使用，这对于我们现有的Spring MVC和Web Flow用户而言非常重要。<br><h3>结论</h3><br>这篇文章从总体上概述了Spring Web Flow 2.0发行版的目标以及最近的<a href="http://www.springframework.org/node/556" target="_blank">Spring Web Flow 2.0 M2发行版中</a>的架构基础。请留意突出显示M2中关键新功能的后续条目，以及我们现在正忙于为M3实现的新功能。Spring Faces项目负责人Jeremy Grelle尤其热衷于谈论有关新的JSF和Ajax支持！<p></p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 116;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>