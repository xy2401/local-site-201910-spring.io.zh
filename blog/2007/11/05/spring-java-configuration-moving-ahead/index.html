<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring Java配置向前发展</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Spring Java Configuration Moving Ahead">
<meta name="twitter:description" content="<p>Several users have asked whether we are committed to <a href=" http:="" ="" www.springframework.org="" javaconfi="="></head><body >Spring Java Configuration, and how it sits with the <a href="http://blog.interface21.com/main/2007/10/24/spring-25-rc1-is-here-introducing-new-configuration-approaches/">annotation configuration option</a> introduced in Spring 2.5. The answer is yes, we are committed to Java Config; and these two approaches are not mutually exclusive.
<p>These two configuration approaches are quite different: the @Autowired annotation in the Spring Framework configures components using annotations in business objects, while Spring Java Config takes a unique approach of externalizing the annotations in dedicated configuration classes. Neither of these approaches is uniquely right or wrong, and they are compelling for different circumstances. There is even no reason that both couldn’t be used in the same application.</p>
">

<meta property="og:title" content="Spring Java Configuration Moving Ahead">
<meta property="og:description" content="<p>Several users have asked whether we are committed to <a href=" http:="" ="" www.springframework.org="" javaconfi="=">Spring Java Configuration, and how it sits with the <a href="http://blog.interface21.com/main/2007/10/24/spring-25-rc1-is-here-introducing-new-configuration-approaches/">annotation configuration option</a> introduced in Spring 2.5. The answer is yes, we are committed to Java Config; and these two approaches are not mutually exclusive.
<p>These two configuration approaches are quite different: the @Autowired annotation in the Spring Framework configures components using annotations in business objects, while Spring Java Config takes a unique approach of externalizing the annotations in dedicated configuration classes. Neither of these approaches is uniquely right or wrong, and they are compelling for different circumstances. There is even no reason that both couldn’t be used in the same application.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2007-11-05 02:44:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Java配置向前发展</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="null?s=20&d=mm"> <span class="author">罗德·约翰逊</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2007-11-05 02:44:00.0">2007年11月5日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2007/11/05/spring-java-configuration-moving-ahead#disqus_thread" data-disqus-identifier="111">
</a></div>
</div>
</header>
<div class="blog--post"><p>一些用户询问我们是否致力于<a href="http://www.springframework.org/javaconfig">Spring Java Configuration</a>以及它在Spring 2.5中引入的<a href="http://blog.interface21.com/main/2007/10/24/spring-25-rc1-is-here-introducing-new-configuration-approaches/">注释配置选项的位置</a> 。答案是肯定的，我们致力于Java Config。并且这两种方法不是互相排斥的。</p><p>这两种配置方法完全不同：Spring Framework中的@Autowired批注使用业务对象中的批注来配置组件，而Spring Java Config采用了一种独特的方法来专用化专用配置类中的批注。这些方法都不是唯一正确或错误的方法，它们在不同情况下都具有吸引力。甚至没有理由不能在同一应用程序中同时使用它们。</p><p>如果您认为Spring = XML，那么该重新考虑了。（无论如何，这从来都不是绝对准确的，因为Spring核心容器一直使用自己的Java元数据，并且不了解XML或任何其他表示形式。）</p><p>这带给我们一个重要的哲学原理： <i>Spring的使命是为企业Java提供最佳的组件模型，</i>为满足复杂需求的灵活性设置标准，并为实际问题提供全面的解决方案。我们不相信任何一种尺寸都能适合所有配置模型，并且我们相信在我们强大而可扩展的模型中可以容纳各种选择。无论您选择定义Spring管理的对象，它们都可以使用相同的丰富企业服务集，无与伦比的第三方集成，真正的AOP，许多扩展点等。</p><p>因此，Spring 2.5的@Component和@Autowired批注可以使容器自动检测Spring管理的对象，它们可以与Java Configuration，XML和其他配置选项愉快地共存。</p><p>这使我想起：我将<a href="http://qcon.infoq.com/sanfrancisco/conference/">在</a>本周晚些时候<a href="http://qcon.infoq.com/sanfrancisco/conference/">在旧金山的QCon上</a>谈论配置Spring容器的方法，并且获得反馈应该很有趣。我将看看是否可以在此处或之后在SpringFramework.org上发布幻灯片。</p><p>由于Costin <a href="http://www.springframework.org/osgi">对OSGi的Spring Dynamic Modules</a>的承诺，Spring Java Configuration暂停了一段时间，但现在已经步入正轨。在过去的几天中，我已经做了很多工作：将其更新为Spring 2.5。删除未使用的代码；并添加了一个经常需要的新功能-配置值的外部化以及bean。</p><p>尽管M2在2.5RC1上运行良好（考虑到JavaConfig对Spring IoC的深入使用，它具有2.5向后兼容性的声明），但它包含了自己的注释扫描代码（Spring框架采用并提出了注释），因此转向后来的Spring版本有意义。</p><p>新的配置属性外部化功能在<a href="https://opensource.atlassian.com/projects/spring/browse/SJC-16">JIRA中</a>建议使用抽象方法（感谢Guillaume Duchesneau）。</p><p>这些方法使用新的@ExternalValue注释进行注释，如下所示：</p><p><code lang="java"><br>@Configuration<br>@ResourceBundles(“classpath:/com/yourcompany/yourpackage/basename”)<br>static abstract class ConfigurationExample {</code></p><code lang="java"><pre><code class="prettyprint">@Bean
public Person john() {
    Person john= new Person();
    john.setName(getName());
    john.setAge(methodWithArbitraryNameReturningAge());       
    john.setBusy(busy());
    return john;
}

    // Property name defaults to method name.
    // In the case of a getter method, it&#39;s the property name--
    // &quot;name&quot; in this case
@ExternalValue
public abstract String getName();


    // Property name is taken from annotation value
@ExternalValue(&quot;age&quot;)                  
public abstract int methodWithArbitraryNameReturningAge();

@ExternalValue
protected abstract boolean busy();
</code></pre></code><p><code lang="java">}<br></code></p><p>Spring Java Config的此类子类可实现那些方法以在运行时返回外部化的属性。（由于其他原因，它还是以子类的形式配置类，例如，缓存单例bean方法的返回值。）这些方法可以是公开的或受保护的。</p><p>配置类上的@ResourceBundles批注标识一个或多个用于解析值的资源束，可以通过方法名称或批注上的显式String值来标识它们。这些位置是Spring资源位置字符串。</p><p>用@ExternalBean注释的方法可以是具体的，在这种情况下，如果未找到外部值，则将使用实际的返回值，例如：<br><code lang="java"><br>@ExternalValue<br>public int otherNumber() {<br> return 25;<br>}<br></code><br>这种用法意味着该值是可外部化的，但对其进行外部化是可选的，例如具有可用默认值的bean属性。</p><p>如您所料，示例的属性文件如下所示：</p><p><code><br>name=John Doe<br>age=45<br>busy=false<br></code></p><p>基础机制被设计为可扩展的，因此属性文件不是唯一的选择，我们将在以后的版本中提供其他选项。抽象方法方法允许动态获取值：例如，从数据库或自定义，从另一个系统。</p><p>目前，该示例仅适用于SVN，但我们计划本月发布M3。展望未来，总部位于西雅图的新Interface21顾问<a href="http://www.interface21.com/people/cbeams.html">Chris Beams</a>将致力于该项目。在Interface21，我们相信我们所有的技术人员都应该做公司的一切工作：开发产品，咨询和培训。产品开发人员提供一些培训和咨询；服务提供人员负责项目。这样可以确保每个人都能为我们都关心的开源项目做出贡献，并确保每个人都立足于现实世界的业务需求，而不是光荣地孤立地开发基础架构（过去在J2EE中看到过这种危险）。克里斯主要从事咨询和培训工作，但是他将“与Spring Java Config保持一致”，使其成为主要的开发重点，因此，在Costin和我本人的帮助下，他应该在开发上花费大量时间。</p><p>将Spring Java Config最终升级到1.0所需的时间部分取决于您。我们需要有关愤怒使用情况的反馈；我们需要功能请求（尽管我们可能希望将范围保持在1.0的可管理范围内）；我们需要优先级方面的帮助。如果您想要这个，请告诉我们，我们会听的！</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 111;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>