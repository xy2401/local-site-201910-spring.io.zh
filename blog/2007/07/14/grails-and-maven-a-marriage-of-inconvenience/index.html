<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Grails and Maven: a Marriage of Inconvenience</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Grails and Maven: a Marriage of Inconvenience" />
<meta name="twitter:description" content="&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://grails.codehaus.org&quot;&gt;Grails&lt;/a&gt; seems to be going from strength to strength, and it looks like it definitely “has legs”, as they say. I am quite interested in stretching those legs a little outside the web application arena. If you are aware of my work on &lt;a href=&quot;http://www.springframework.org/spring-batch&quot;&gt;Spring Batch&lt;/a&gt;, you will probably be able to guess where that might take me. But for this article I wanted to just share some experiences I’ve had with the basic, low-level deployment and build of a Grails application.&lt;/p&gt;
&lt;p&gt;I have a love/hate relationship with Maven 2, and I am learning to love Grails, but sadly the two do not play particularly well together. It would be really nice to see tighter integration. Maven is not always everything we want it to be, but there are some things that really make it worthwhile. It is a standard of sorts (love it or hate it) so when I download a project from somewhere I already know how to build it, what its dependencies are and where the documentation is. Grails has some of the same features, and in fact includes its own quite sophisticated build tool based on Groovy scripting of Ant. Maybe there is a middle way, where we can have the best of both worlds?&lt;/p&gt;
" />
<meta name="twitter:creator" content="@david_syer" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/ae671230e3a1c2a0eefa7604990084f1?s=200" />

<meta property="og:title" content="Grails and Maven: a Marriage of Inconvenience" />
<meta property="og:image" content="https://gravatar.com/avatar/ae671230e3a1c2a0eefa7604990084f1?s=200" />
<meta property="og:description" content="&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://grails.codehaus.org&quot;&gt;Grails&lt;/a&gt; seems to be going from strength to strength, and it looks like it definitely “has legs”, as they say. I am quite interested in stretching those legs a little outside the web application arena. If you are aware of my work on &lt;a href=&quot;http://www.springframework.org/spring-batch&quot;&gt;Spring Batch&lt;/a&gt;, you will probably be able to guess where that might take me. But for this article I wanted to just share some experiences I’ve had with the basic, low-level deployment and build of a Grails application.&lt;/p&gt;
&lt;p&gt;I have a love/hate relationship with Maven 2, and I am learning to love Grails, but sadly the two do not play particularly well together. It would be really nice to see tighter integration. Maven is not always everything we want it to be, but there are some things that really make it worthwhile. It is a standard of sorts (love it or hate it) so when I download a project from somewhere I already know how to build it, what its dependencies are and where the documentation is. Grails has some of the same features, and in fact includes its own quite sophisticated build tool based on Groovy scripting of Ant. Maybe there is a middle way, where we can have the best of both worlds?&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2007-07-14 08:28:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Grails and Maven: a Marriage of Inconvenience</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/ae671230e3a1c2a0eefa7604990084f1?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/dsyer">Dave Syer</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2007-07-14 08:28:00.0">July 14, 2007</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="99" href="/blog/2007/07/14/grails-and-maven-a-marriage-of-inconvenience#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><h2>Introduction</h2><p><a href="http://grails.codehaus.org">Grails</a> seems to be going from strength to strength, and it looks like it definitely &ldquo;has legs&rdquo;, as they say. I am quite interested in stretching those legs a little outside the web application arena. If you are aware of my work on <a href="http://www.springframework.org/spring-batch">Spring Batch</a>, you will probably be able to guess where that might take me. But for this article I wanted to just share some experiences I&rsquo;ve had with the basic, low-level deployment and build of a Grails application.</p><p>I have a love/hate relationship with Maven 2, and I am learning to love Grails, but sadly the two do not play particularly well together. It would be really nice to see tighter integration. Maven is not always everything we want it to be, but there are some things that really make it worthwhile. It is a standard of sorts (love it or hate it) so when I download a project from somewhere I already know how to build it, what its dependencies are and where the documentation is. Grails has some of the same features, and in fact includes its own quite sophisticated build tool based on Groovy scripting of Ant. Maybe there is a middle way, where we can have the best of both worlds?</p><p>I am also aware of some other activities in this area, and I hope we can coalesce around something (maybe driven from the discussion in this forum and in the Grails JIRA). For instance see Frederick Verbist&rsquo;s <a href="http://blog.ithron.be/?p=5">blog</a> and Arnaud Heritier&rsquo;s maven <a href="http://forge.octo.com/confluence/display/MTG/Home">integration project</a> (only barely underway at this point). The Grails team is traditionally unimpressed with Maven (e.g. see <a href="[http://graemerocher.blogspot.com/2006/09/vote-to-stop-maven-infesting-spring.html">here</a>), but I had a chat with Graeme Rocher, and he is open to suggestion, so I hope we can make some progress here.</p>
<h2>Prototype Dependency Management for Grails using Maven</h2><p>In the spirit of taking some simple steps towards maven integration, I have attached a set of <a href="http://blog.interface21.com/main/wp-content/uploads/2007/07/grails-maven.zip">poms</a> that describe (roughly) the dependency structure of Grails as I am aware of it in Grails 0.5.6. Ignore or change the Spring version number if you have issues with it - Grails 0.5.6 uses Spring 2.0, but I needed 2.1 for a project I am working on. Graham says Grails might not work properly with later versions of Spring so your mileage may vary. That&rsquo;s the beauty of Maven right? You can see the project dependencies explicitly, and transitively, and you can tweak them in ways that you control to suit your own needs and appetite for risk.</p><p>Aside to Maveners: the dependency plugin is working much better than it used to, and you can get a print out of the dependency tree with &ldquo;mvn dependency:tree&rdquo;. This only works with a brand new plugin so make sure that the apache-snapshots repo is in your plugin repositories:</p>
<pre><code class="prettyprint xml"><br />&lt;pluginRepositories&gt;
	&lt;pluginRepository&gt;
		&lt;id&gt;apache-snapshots&lt;/id&gt;
		&lt;url&gt;http://people.apache.org/maven-snapshot-repository&lt;/url&gt;
	&lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;
</code></pre><p>Much more convenient than having to build the whole site and looking in the dependency report, which is what I used to do a lot of.</p>
<h3>A POM, a POM, my Kingdom for a POM...</h3><p>This is the cry of a demented Maven user when first faced with a Grails project and trying to understand how it all fits together. Hopefully we will show here how to calm down the poor demented individual. To do this we present some simple steps to create a Maven project for an existing Grails project.</p><p>In the enclosed sandbox archive, there are three poms, each in its own project:</p>
<ul>
<li>
base = base POM for dependencies not related to web application. I have been quite lenient with this (including Spring Weblfow for instance). You should be able to launch grails console with just these dependencies is the goal.
</li>
<li>
web = additional dependencies required to create a WAR file for a web application. This might be platform dependent to some extent, but the dependencies included here will work in a Servlet 2.4 container like Jetty 5.1 (which is what Grails uses traditionally).
</li>
<li>
launch = Jetty and JSP dependencies used just for launching the web application in a standalone or development environment
</li>
</ul><p>To install the Grails poms you should not need to add any artifacts manually to your local repositiry. There are also a couple of &ldquo;funnies&rdquo; (not available in any standard public repo that I could find), which I have included in the &ldquo;spring-ext&rdquo; repo (defined in the pom). It should work out of the box if you connected to the internet.</p>
<h3>Prerequisites for Running the Sample</h3><p>You will need <a href="">Maven</a> (2.0.*) and <a href="">Grails</a> (0.5.6) to run the sample application. I&rsquo;m using Maven 2.0.7. The &ldquo;grails&rdquo; and &ldquo;mvn&rdquo; launch scripts need to be on your path, and you need to define GRAIL_HOME env variable to run Grails (standard install procedure).</p>
<h3>Test Project</h3><p>There is also a test project which uses the above poms to manage a web application. I have decided to stick with the Grails directory layout. Graham tells me that nearly all of the &ldquo;variable&rdquo; content in web-app/WEB-INF is targeted for removal in Grails 1.0, so I think using the structure layed down by Grails is the best way forward (least likely to be fragile, easily understood by other Grails developers).</p><p>To launch from Grails command line</p>
<pre><code class="prettyprint code">$ cd test
$ mvn package
$ grails run-app
</code></pre><p>To add additional dependencies to the test project, just add them to the pom and repeat the exercise (or in Eclipse do nothing, see below). Isn&rsquo;t Maven wonderful?</p><p>Note that the Grails dependencies have scope=provided in the project pom. That should mean they are in the classpath for Maven and Eclipse, but do not get included in any Maven packaging (if it was implemented).</p>
<h3>Eclipse Users Only</h3><p>The test project also includes Eclipse project artifacts - use the Maven Eclipse extensions for best results (<a href="http://m2eclipse.codehaus.org/update-dev/)">http://m2eclipse.codehaus.org/update-dev/)</a>. Using this Eclipse extension you will be able to work on other projects in the workspace which are Maven artifacts, and if they are dependencies for the Grails project they will be automatically added to the classpath, and dynamically updated when you make changes.</p><p>If you don&rsquo;t use the Maven Eclipse extensions then you can probably work with the Eclipse Maven plugin (otherwise known as maven-eclipse-plugin). Use &ldquo;mvn eclipse:eclipse&rdquo; to update the .classpath and refresh and then you should be OK, but won&rsquo;t be able to synchronize automatically with changes in other Eclipse projects.</p><p>You will need to do &ldquo;grails package&rdquo; from the command line first (once only):</p>
<pre><code class="prettyprint code">$ cd test
$ grails package
</code></pre><p>This generates a web.xml for you, and copies and filters over some properties files from grails-app/conf. Apparently the likely long-term outlook is that web.xml will be the only generated file in web-app/WEB-INF (so only one svn:ignore in everyone&rsquo;s scource control system).</p><p>In Eclipse you can import the test project. Then you can do Run&hellip; and select the &ldquo;test&rdquo; launcher form Java Applications. You can debug, and you can change code dynamically, both in the Grails application and in dependent projects.</p>
<h2>What's Next</h2><p>There are some things that are missing / uncomfortable about the tools I attached. They are very much work in progress. If anyone tries them out they will undoubtedly have suggestions about how to do it better. Please post back here, or on the <a href="http://jira.codehaus.org/browse/GRAILS">Grails JIRA</a></p><p>Here are some known issues or irritations:</p>
<h3>Duplicate Jars with Grails Packaging</h3><p>Some Grails dependencies from the core might be different or just differently named than dependencies in the poms (Grails poms or project pom). When you do &ldquo;grails package&rdquo; it will copy jars from GRAILS_HOME/lib into web-app/WEB-INF/lib, and there is no way to prevent the duplication. For instance wherever Grails does not use the fully-qualified jar name, you will see duplicates in WEB-INF/lib.</p><p>The problem is compounded by the fact that the Maven dependency plugin doesn&rsquo;t allow us to exclude provided dependencies (at the moment anyway), so all the Grails dependencies end up in ./lib when you do &ldquo;mvn package&rdquo;. This would not be comfortable for a Grails developer because they are normally copied from GRAILS_HOME/lib. Ideally this kind of tussle will be resolved before we can say we really have Maven-Grails integration.</p>
<h3>Lack of Other Maven Lifecycle Phases</h3><p>The simple demo has a clean and a package lifecycle enhancement for Grails. We would linke to be able to use Maven to do more of the development and continuous integration work for us.</p><p>For instance we would like to build a WAR file from the Grails project layout. That wouldn&rsquo;t be too difficult to achieve with Ant and Maven. Ideally it would be implemented as a Maven plugin - this is Arnaud&rsquo;s project pretty much, so I hope he makes some progress, but also that he can learn from the experience here.</p><p>Other useful lifecycle phases are also missing. For example, tests cannot be driven from Maven in the sample.</p>
<h3>Grails Package Cycle</h3><p>Grails and Maven have their own respective &ldquo;package&rdquo; cycles. Generally the Grails one only has to happen once (between cleans), but it is still irritating to have to remember to do it.</p>
<h3>Groovy Plugin for Eclipse</h3><p>It&rsquo;s nice to have syntax highlighting in .groovy source, but otherwise it seems like the Groovy plugin just gets in the way. This is nothing to do with either Maven or Grails really, but it is known to cause problems for other Grails Eclipse users. For instance, you are likely to see a nasty warning message asking you if you want to terminate the application if you edit a controller or service. The Groovy plugin has detected the change and Eclipse can&rsquo;t deal with the change to teh classpath. But Grails can, so usually you can click the &ldquo;Continue&rdquo; button. But not always. It is safe to switch off Groovy compilation in the project properties, but then you lose the dynamic compilation for non-grails-app classes.</p>
<hr /><p>The attachment again: click <a href="http://blog.interface21.com/main/wp-content/uploads/2007/07/grails-maven.zip">here</a>.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 99;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>