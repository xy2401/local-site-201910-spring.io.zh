<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring Integration Samples</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring Integration Samples" />
<meta name="twitter:description" content="&lt;p&gt;In my &lt;a href=&quot;http://blog.interface21.com/main/2007/12/14/spring-integration-a-new-addition-to-the-spring-portfolio&quot;&gt;recent post&lt;/a&gt;, I had mentioned that the Subversion repository for Spring Integration would be publicly accessible soon, and I’m pleased to provide that link now. You can checkout the project with the following command:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;prettyprint code&quot;&gt;svn co https://anonsvn.springframework.org/svn/spring-integration/base/trunk spring-integration
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If the checkout is successful, you should see the following directory structure:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;prettyprint code&quot;&gt;spring-integration/
  +--build-spring-integration/
  +--spring-build/
  +--spring-integration-core/
  +--spring-integration-samples/
&lt;/code&gt;&lt;/pre&gt;
" />
<meta name="twitter:creator" content="@m_f_" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/443e6ec0242c3f54001dae34374780e2?s=200" />

<meta property="og:title" content="Spring Integration Samples" />
<meta property="og:image" content="https://gravatar.com/avatar/443e6ec0242c3f54001dae34374780e2?s=200" />
<meta property="og:description" content="&lt;p&gt;In my &lt;a href=&quot;http://blog.interface21.com/main/2007/12/14/spring-integration-a-new-addition-to-the-spring-portfolio&quot;&gt;recent post&lt;/a&gt;, I had mentioned that the Subversion repository for Spring Integration would be publicly accessible soon, and I’m pleased to provide that link now. You can checkout the project with the following command:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;prettyprint code&quot;&gt;svn co https://anonsvn.springframework.org/svn/spring-integration/base/trunk spring-integration
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If the checkout is successful, you should see the following directory structure:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;prettyprint code&quot;&gt;spring-integration/
  +--build-spring-integration/
  +--spring-build/
  +--spring-integration-core/
  +--spring-integration-samples/
&lt;/code&gt;&lt;/pre&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2007-12-21 22:46:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Integration Samples</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/443e6ec0242c3f54001dae34374780e2?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/mfisher">Mark Fisher</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2007-12-21 22:46:00.0">December 21, 2007</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="122" href="/blog/2007/12/21/spring-integration-samples#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>In my <a href="http://blog.interface21.com/main/2007/12/14/spring-integration-a-new-addition-to-the-spring-portfolio">recent post</a>, I had mentioned that the Subversion repository for Spring Integration would be publicly accessible soon, and I&rsquo;m pleased to provide that link now. You can checkout the project with the following command:</p>
<pre><code class="prettyprint code">svn co https://anonsvn.springframework.org/svn/spring-integration/base/trunk spring-integration
</code></pre><p>If the checkout is successful, you should see the following directory structure:</p>
<pre><code class="prettyprint code">spring-integration/
  +--build-spring-integration/
  +--spring-build/
  +--spring-integration-core/
  +--spring-integration-samples/
</code></pre><p>I would like to take this opportunity to walk through a couple of the samples that are in &lsquo;spring-integration-samples&rsquo;. Keep in mind this project is definitely a work-in-progress (currently a 0.5 SNAPSHOT), but the samples should give you an idea of how the programming model is taking shape, and I&rsquo;m very much looking forward to getting some feedback.</p>
<h2>Hello World</h2><p>The first sample is the obligatory &ldquo;Hello World&rdquo; demo. This one demonstrates the main components: Message Channel and Message Endpoint. This demo also reveals how the Spring Integration approach is non-invasive - providing a complete separation of concerns between business logic and messaging. In this case, the &ldquo;business logic&rdquo; is a simple <i>HelloService</i>:</p>
<pre><code class="prettyprint java"><br />public class HelloService {

    public String sayHello(String name) {
        return &quot;Hello &quot; + name;
    }
}
</code></pre><p>This example uses an XML-based configuration for the Message Endpoint (we&rsquo;ll see the annotation approach next):</p>
<pre><code class="prettyprint xml"><br />&lt;endpoint input-channel=&quot;inputChannel&quot;
               default-output-channel=&quot;outputChannel&quot;
               handler-ref=&quot;helloService&quot;
               handler-method=&quot;sayHello&quot;/&gt;
</code></pre><p>There you see that &lsquo;handler-ref&rsquo; simply points to a Spring-managed bean. If you have used Spring&rsquo;s <i>MessageListenerAdapter</i> for asynchronous JMS reception, then this should look familiar - especially if you are using Spring 2.5&rsquo;s new <i>jms</i> namespace and the &ldquo;jms:listener&rdquo; element. Finally, the <i>HelloWorldDemo</i> starts the application context and then interacts with the channels:</p>
<pre><code class="prettyprint java"><br />ChannelRegistry channelRegistry = (ChannelRegistry) context.getBean(MessageBusParser.MESSAGE_BUS_BEAN_NAME);
MessageChannel inputChannel = channelRegistry.lookupChannel(&quot;inputChannel&quot;);
MessageChannel outputChannel = channelRegistry.lookupChannel(&quot;outputChannel&quot;);
inputChannel.send(new StringMessage(1, &quot;World&quot;));
System.out.println(outputChannel.receive().getPayload());
</code></pre><p>That example involves lookup of the MessageBus bean - which implements the ChannelRegistry interface. However, in a non-demo &ldquo;real world&rdquo; scenario, any component that would access channels can have the registry provided via dependency injection. All it needs to do is implement <i>ChannelRegistryAware</i> (or use @Autowired). This is the same approach used elsewhere in Spring - such as <i>ApplicationEventPublisherAware</i>.</p>
<h2>Annotation-driven Endpoint and Subscriber</h2><p>The next example shows how to configure a Message Endpoint with annotations. In fact, this particular endpoint even provides the data that is translated (behind the scenes) into Message payload content with the @Polled method annotation. It could alternatively provide an input channel for receiving messages asynchronously.</p>
<pre><code class="prettyprint java"><br />@MessageEndpoint(defaultOutput=&quot;quotes&quot;)
public class QuotePublisher {

    @Polled(period=300)
    public Quote getQuote() {
        BigDecimal price = new BigDecimal(new Random().nextDouble() * 100);
        return new Quote(generateTicker(), price.setScale(2, RoundingMode.HALF_EVEN));
    }

    private String generateTicker() {
        // randomly generates 3-letter tickers
    }
}
</code></pre><p>On the receiving side, there is a @Subscriber annotation:</p>
<pre><code class="prettyprint java"><br />public class QuoteSubscriber {

    @Subscriber(channel=&quot;quotes&quot;)
    public void log(Object o) {
        System.out.println(o);
    }
}
</code></pre><p>Here is the XML which registers the annotation post-processor and the 2 Spring-managed beans (notice that this example is using the &lsquo;spring-integration&rsquo; schema as the primary namespace.</p>
<pre><code class="prettyprint xml"><br />&lt;beans:beans xmlns=&quot;http://www.springframework.org/schema/integration&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xmlns:beans=&quot;http://www.springframework.org/schema/beans&quot;
        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                http://www.springframework.org/schema/integration
                http://www.springframework.org/schema/integration/spring-integration-1.0.xsd&quot;&gt;

    &lt;message-bus/&gt;

    &lt;annotation-driven/&gt;

    &lt;channel id=&quot;quotes&quot;/&gt;

    &lt;beans:bean id=&quot;publisher&quot; class=&quot;org.springframework.integration.samples.quote.QuotePublisher&quot;/&gt;

    &lt;beans:bean id=&quot;subscriber&quot; class=&quot;org.springframework.integration.samples.quote.QuoteSubscriber&quot;/&gt;

&lt;/beans:beans&gt;
</code></pre><p>By the way, the &lsquo;annotation-driven&rsquo; element also enables the @Publisher annotation which triggers the creation of AOP advice for asynchronously sending the return value of any annotated method to a channel.</p>
<h2>Simple Routing</h2><p>The routing sample features a Message Endpoint that produces an incrementing integer every 3 seconds and a router that resolves the target channel name (note that a router method can also return more than one result and can return actual MessageChannel instances rather than names).</p>
<pre><code class="prettyprint java"><br />@MessageEndpoint
public class Counter {

    private AtomicInteger count = new AtomicInteger();

    @Polled(period=3000)
    public int getNumber() {
        return count.incrementAndGet();
    }

    @Router
    public String resolveChannel(int i) {
        if (i % 2 == 0) {
            return &quot;even&quot;;
        }
        return &quot;odd&quot;;
    }
}
</code></pre><p>On the receiving end of these channels, we have 2 different methods that simply log the message payload:</p>
<pre><code class="prettyprint java"><br />@Component
public class NumberLogger {

    @Subscriber(channel=&quot;even&quot;)
    public void even(int i) {
        System.out.println(&quot;even: &quot; + i);
    }

    @Subscriber(channel=&quot;odd&quot;)
    public void odd(int i) {
        System.out.println(&quot;odd:  &quot; + i);
    }
}
</code></pre><p>By the way, notice that the <i>NumberLogger</i> is annotated with Spring&rsquo;s @Component. The @MessageEndpoint annotation also contains @Component as a meta-annotation. Both are therefore &ldquo;stereotypes&rdquo; and eligible for autodetection with Spring 2.5&rsquo;s classpath-scanning. The XML for this example is extremely simple:</p>
<pre><code class="prettyprint xml"><br />&lt;context:component-scan base-package=&quot;org.springframework.integration.samples.oddeven&quot;/&gt;

&lt;message-bus auto-create-channels=&quot;true&quot;/&gt;

&lt;annotation-driven/&gt;
</code></pre>
<hr /><p>Hopefully this provides a decent introduction to the Spring Integration programming model. Feel free to checkout the code and try out these samples yourself. I am currently working on a &ldquo;Getting Started&rdquo; guide that I will make available after the holidays. If you do checkout the code, please be sure to update frequently. The code is constantly evolving, and in particular I am refactoring much of the core consumer/dispatcher code with the goal of providing the simplest possible extension points for adding either polling or event-driven message sources. In the next blog post, I plan to show some new additions to the &lsquo;spring-integration-samples&rsquo; featuring those extension points.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 122;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>