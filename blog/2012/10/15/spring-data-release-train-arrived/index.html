<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title> Spring Data 发布列车到达</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Spring Data release train arrived">
<meta name="twitter:description" >
<meta name="twitter:creator" content="@odrotbohm">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/977c74bb044a9d4fa90b305824eda390?s=200">

<meta property="og:title" content="Spring Data release train arrived">
<meta property="og:image" content="https://gravatar.com/avatar/977c74bb044a9d4fa90b305824eda390?s=200">
<meta property="og:description" >
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2012-10-15 21:03:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title"> Spring Data 发布列车到达</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/977c74bb044a9d4fa90b305824eda390?s=20&d=mm"> <a class="author" rel="author" href="/team/ogierke">奥利弗·德罗博姆</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2012-10-15 21:03:00.0">2012年10月15日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2012/10/15/spring-data-release-train-arrived#disqus_thread" data-disqus-identifier="490">
</a></div>
</div>
</header>
<div class="blog--post"><p>很高兴宣布我们已经<a href="http://www.springsource.org/node/3703">发布</a>了各种Spring Data模块的GA版本。在此版本中，我们继续体现SpringSource致力于为Java开发人员提供与最新的持久性技术一起使用的工具的承诺。在这篇博客文章中，我想向您详细介绍该版本包括的内容，为什么我们决定进行发布培训以及对Spring Data路线图的下一步工作有一个简短的展望。<br></p><h2 id="the-release-train">发布火车</h2><br>回顾Spring Data模块的开发方式，发布周期通常由各个模块负责人管理。由于模块的步调和成熟度不同，因此在尝试同时使用多个模块时会引起一些问题。尤其是依赖于Spring Data Commons的项目正遭受这个问题的困扰。<p></p><p>我们正在努力最大程度地减少这些问题，但最终得出的结论是，更多地协调发行版并同步模块的次要发行版是有意义的。现在，一般的Spring Data版本附带以下参与者：<br></p><ul><br> <li>Spring Data Commons 1.4</li><br> <li>Spring Data JPA 1.2</li><br> <li>Spring Data MongoDB 1.1版</li><br> <li>Spring Data Neo4j 2.1</li><br> <li>Spring Data Gemfire 1.2</li><br> <li>Spring Data REST导出器1.0</li><br></ul><br>展望未来，我们将继续同步即将发布的次要版本。模块仍然可以按照自己的进度自由地进行错误修复。<br><h2 id="whats-in-this-release">此版本中的内容</h2><br>如前所述，该版本的核心主题是跨项目兼容性。除了这种非功能性的功能之外，最重要的功能可能是Spring数据存储库的JavaConfig支持。我们改进了XML名称空间，并在Spring Data Commons中引入了注释支持，以允许为存储特定模块集成基于JavaConfig的存储库。<p></p><p>我们介绍<code>@Enable(Jpa|Mongo|Neo4j|Gemfire)Repositories</code>与XML的1：1等价<code>repositories</code>命名空间元素。因此，在以前的版本中必须如此配置（以JPA为例）。</p>
<pre><code class="prettyprint xml"><br />&lt;jpa:repositories base-package=&quot;com.acme.repositories&quot; /&gt;
</code></pre><p>现在可以在Spring JavaConfig配置类中使用<code>@EnableJpaRepositories</code>注解。</p>
<pre><code class="prettyprint java">@EnableJpaRepositories(base-package = &quot;com.acme.repositories&quot;)
class ApplicationConfig {

}
</code></pre><p>通过这种配置样式，我们可以在商店实现中实现完全无XML的应用程序配置。在Spring Data团队成员编写的<a href="http://shop.oreilly.com/product/0636920024767.do">最新发行的Spring Data书籍</a>的示例代码中，可以找到注释配置用法的更高级示例。该代码位于GitHub上，并使用最新的Spring Data版本以及最新的Spring 3.2里程碑的所有新功能。将此存储库视为针对Spring Data相关代码示例的规范样本仓库。</p><p>整合<code>@Enable…</code>存储库的注释要求我们将Spring依赖关系提高到3.1行。其余所有代码库仍然与Spring 3.0分支完全兼容。因此，默认情况下，该发行版附带的模块全部依赖于Spring 3.1.2。如果您确实需要使用3.0.7，请在项目的<code>pom.xml</code>强制使用旧版本。<br></p><h3 id="jpa">JPA</h3><br>除了对存储库的JavaConfig支持之外，JPA模块还附带了许多小而重要的改进，例如对持久性提供程序的最新版本（Hibernate 3.6.10，EclipseLink 2.4.0）进行了更新。我们积极确保与Hibernate 4分支的兼容性，但尚未升级我们的依赖项，以不强迫用户进行升级或手动配置其项目直至Hibernate 3。<br><h3 id="mongodb">MongoDB</h3><br>在已发布的模块中，MongoDB可能是具有大多数新的用户可见功能的产品。我们改进了对GridFS的支持，因此您现在可以使用以下命令轻松地将文件存储到MongoDB中或从中检索文件： <code>GridFsTemplate</code> （有关详细信息，请参见参考文档的本节）。<p></p>
<pre><code class="prettyprint java">class MongoConfig extends AbstractMongoConfiguration {

  // …

  @Bean
  public GridFsTemplate gridFsTemplate() {
    return new GridFsTemplate(mongoDbFactory(), mappingMongoConverter());
  }
}

class GridFsClient {

  public static void main(String… args) throws Exception {
    ApplicationContext context = new AnnotationConfigApplicationContext(MongoConfig.class);
    GridFsOperations operations = context.getBean(GridFsOperations.class);

    File file = new File(&quot;myfile.txt&quot;);
    operations.store(file.getInputStream(), &quot;myfile.txt&quot;);

    GridFsResource[] txtFiles = operations.getResources(&quot;*.txt&quot;);
   }
}
</code></pre><p>如果您想在JavaEE 6环境中使用Spring Data MongoDB，现在可以这样做，因为我们附带了一个CDI扩展，该扩展允许使用以下命令将基于MongoDB的Spring Data存储库注入CDI管理的bean中<code>@Inject</code> （ <a href="https://jira.springsource.org/browse/DATAMONGO-356">DATAMONGO-356</a> ）。</p><p>除此之外，我们还收到了Maciej Walkowiak和Patryk Wasik的两个社区贡献。Maciej通过利用我们触发的持久性事件（ <a href="https://jira.springsource.org/browse/DATAMONGO-36">DATAMONGO-36</a> ）实现了对JSR-303验证的支持。Patryk通过添加一个<code>@Version</code>批注以及对我们的持久性机制的必要调整，以防万一文档修改被修改后抛出异常（ <a href="https://jira.springsource.org/browse/DATAMONGO-279">DATAMONGO-279</a> ）。<br></p><h2 id="neo4j">Neo4j</h2><br>Spring Data Neo4j最明显地增加了对唯一实体创建的支持。您现在可以将实体字段注释为<code>@Indexed(unique=true)</code>这将允许Neo4j机制创建独特的节点和实体。<p></p><p>我们还投入了大量精力使关系更容易和更全面地工作，现在您可以以与节点实体相同的方式填充和保存关系实体。我们还允许对关系类型进行更细粒度的控制。现在也可以在<code>@RelationshipEntity(type=“REL_TYPE”)</code>注释或在带有注释的字段中<code>@RelationshipType</code>基于每个实例使用。由于需求旺盛，我们现在允许<code>@RelatedTo<a href="enforceTargetType=true">Via</a></code>带注释的字段，将受目标字段类型的约束。</p><p>在此版本中，对在图形中存储类型层次结构的支持得到了改进，因此您可以使用<code>@TypeAlias(“myType”)</code>用于节省属性和索引中的宝贵空间。现在，别名类型的多态读取也可以按预期工作。</p><p>新的生命周期事件是对审核，验证和其他跨领域问题的有用补充。像其他模块一样<code>ApplicationContextListener</code>现在可以听<code>(Before|After)SaveEvent</code> s。我们还重构了内部基础架构，以便您现在可以直接创建一个<code>Neo4jTemplate</code>周围<code>GraphDatabaseService</code>即使没有应用程序上下文设置。</p><p>我们付出了很多努力，改进了对用户定义的或查找程序派生的密码查询的处理。在这个领域中，Spring Data Neo4j模块的未来也将投入大量资金。Spring Data Neo4j的2.1版本支持最近发布的Neo4j 1.8版本，并且也可以与1.7一起使用。<br></p><h2 id="gemfire">宝石火</h2><br>Gemfire模块的发行版包含一个更高级的Spring命名空间，以更紧密地模仿Gemfire缓存配置选项，从而完善基于Spring的编程模型。它还附带了Spring Data存储库抽象的实现，以简化实体访问和查询执行，就像您习惯使用其他存储一样。<p></p><p>Spring Data Gemfire模块还将与即将推出的Gemfire 7.0版本一起提供，以继续执行任务，以简化使用数据网格开发Java应用程序的任务。<br></p><h2 id="rest-exporter">REST出口商</h2><br>REST导出器是Spring Data项目组合中另一个重要的新功能。它允许以超媒体驱动的方式通过HTTP公开由Spring Data存储库管理的实体，并允许触发定义的查询方法的执行。<p></p><p>它所要做的就是注册<code>RepositoryRestExporterServlet</code>在您的应用程序中，或者让您的Spring MVC DispatcherServlet配置包含<code>RepositoryRestMvcConfiguration</code> JavaConfig类。默认情况下，这将导致为应用程序上下文中的每个Spring Data存储库公开资源。可以通过跟踪核心资源中公开的链接来发现资源。</p><p>假设您有两个存储库接口<code>CustomerRepository</code>和<code>ProductRepository</code> 。现在，您可以继续并将以下设置代码添加到Servlet 3中<code>WebApplicationInitializer</code> ：</p>
<pre><code class="prettyprint java">DispatcherServlet servlet = new RepositoryRestExporterServlet();
Dynamic dispatcher = container.addServlet(&quot;dispatcher&quot;, servlet);
dispatcher.setLoadOnStartup(1);
dispatcher.addMapping(&quot;/&quot;);
</code></pre><p>在Jetty等内部运行应用程序将为您提供以下信息：</p>
<pre><code class="prettyprint source">$ curl -v http://localhost:8080

{ &quot;links&quot; : [ {
    &quot;rel&quot; : &quot;product&quot;,
    &quot;href&quot; : &quot;http://localhost:8080/product&quot;
  }, {
    &quot;rel&quot; : &quot;customer&quot;,
    &quot;href&quot; : &quot;http://localhost:8080/customer&quot;
}]}
</code></pre><p>客户现在可以通过这些链接访问产品和客户，探索他们与其他实体的关系（依次由超媒体驱动），并执行通过存储库界面中的查询方法声明的查询。当前，仅支持基于JPA的存储库，但我们将在即将发布的版本中增加对所有其他存储的支持。</p><p>有详细的选项可配置公开哪些资源和哪些HTTP方法，扩展点可使用自定义链接来操作返回的表示形式，从而使API超出普通CRUD操作的范围。要查找有关该项目的更多信息，请查看其<a href="https://github.com/SpringSource/spring-data-rest/wiki">参考文档</a>或我们与O'Reilly一起撰写的Spring Data书的相关章节（有关更多信息，请<a href="https://github.com/SpringSource/spring-data-rest/wiki">参见</a>下文）。<br></p><h2 id="roadmap">路线图</h2><br>当前版本完成了Spring Data Commons 1.x分支的开发，这是所有发布的存储实现都依赖的版本。展望未来，我们将专注于2.0版本的第一个里程碑，以实现更高级的功能，并稍稍更改一些核心内容，这可能需要更改API并适应编程模型。这包括通用的审核机制（当前仅在JPA模块中可用）以及基于接口的存储库抽象的更大灵活性。<p></p><p>除了由SpringSource员工领导的商店实施模块之外，我们最近还开始看到由社区领导的实施弹出。Neale Upstone刚刚发布了<a href="https://fuzzydb.blogspot.com/2012/10/fuzzydb-and-fuzzydb-spring-100-is-here.html">FuzzyDB模块的</a> 1.0版，由Christoph Strobl领导的<a href="https://jira.springsource.org/browse/DATASOLR">Spring Data Solr</a>模块已接近第一个里程碑。</p><p>如果您希望在Spring Data模块中看到任何功能，对现有功能的任何反馈，现在是时候在<a href="https://jira.springsource.org/secure/BrowseProjects.jspa#all">Spring JIRA中</a>提高您的声音了。<br></p><h2 id="miscellaneous">杂</h2><br>我要向您指出的最后一件事是3.0版本中引入的STS中的Spring Data支持。现在，在编辑Spring Data存储库时，您将立即获得查询方法验证，如下所示。<br><div class="figure"><p></p><p><img class="aligncenter size-full wp-image-11843" title="STS中的查询方法名称验证" src="http://blog.springsource.org/wp-content/uploads/2012/10/ide-finder-typos.png" alt="" width="713" height="298"><br></p><p class="caption">查询方法验证</p><p></p><p></p></div><br>除此之外，在编写查询方法时，您还将获得代码完成支持。<br><div class="figure"><p></p><p><img class="aligncenter size-full wp-image-11844" title="STS中查询方法的代码完成建议" src="http://blog.springsource.org/wp-content/uploads/2012/10/ide-property-proposal.png" alt="" width="688" height="227"><br></p><p class="caption">代码完成支持查询方法</p><p></p><p></p></div><br>如果此博客文章是您第一次接触Spring Data项目，或者您想总体上开始该项目，我强烈建议您阅读我们撰写的O'Reilly Spring Data书。这是对最新的Java持久性，Spring Data项目及其核心设计原则的实用介绍。它介绍了特定于商店的模块，并提供了示例以及书中随附的示例代码的详细说明。刚刚开始的SpringOne2GX会议的与会者将获得该书PDF版本的免费副本。<br><h2 id="summary">摘要</h2><br>经过8个月的开发，我们已经修复了<a href="https://jira.springsource.org/secure/IssueNavigator.jspa?mode=hide&requestId=13731">300张门票</a> 。特别感谢Neo Technologies的Michael Hunger和Lasse Westh-Nielssen推动了Neo4j模块的开发，David Turanski和Costin Leau在Spring Data Gemfire模块上的工作，Jon Brisbin领导了REST导出器模块，Mark Pollack了整体项目负责人以及所有其他Spring Data团队成员的支持。特别感谢Spring Data社区中的每个人通过JIRA和论坛提供的非常有价值的反馈，以及他们在GitHub上的拉取请求，这些请求实际上帮助在发行版中增加了更多功能。<p></p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 490;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>