<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring .NET 1.1 and container configuration</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring .NET 1.1 and container configuration" />
<meta name="twitter:description" content="&lt;p&gt;It has been quite a year for Spring.NET. We have gone through two milestone and two release candidates before the GA release in December. The first chunks of code for the 1.1 release were made way back in late 2004 by Aleks Seovic who started work on the ASP.NET framework. In short, it has been a long time in the making. Being the end of year, a natural time for reflection both past and present, I’d like to say thanks to the other members of the project and the Spring.NET community for all their contributions and support. I’m looking forward to a great 2008!&lt;/p&gt;
" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/5cffed9a3aad16d33d07f6e7ef2ebbb7?s=200" />

<meta property="og:title" content="Spring .NET 1.1 and container configuration" />
<meta property="og:image" content="https://gravatar.com/avatar/5cffed9a3aad16d33d07f6e7ef2ebbb7?s=200" />
<meta property="og:description" content="&lt;p&gt;It has been quite a year for Spring.NET. We have gone through two milestone and two release candidates before the GA release in December. The first chunks of code for the 1.1 release were made way back in late 2004 by Aleks Seovic who started work on the ASP.NET framework. In short, it has been a long time in the making. Being the end of year, a natural time for reflection both past and present, I’d like to say thanks to the other members of the project and the Spring.NET community for all their contributions and support. I’m looking forward to a great 2008!&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2008-01-04 22:01:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring .NET 1.1 and container configuration</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/5cffed9a3aad16d33d07f6e7ef2ebbb7?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/mpollack">Mark Pollack</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2008-01-04 22:01:00.0">January 04, 2008</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="125" href="/blog/2008/01/04/spring-net-1-1-and-container-configuration#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>It has been quite a year for Spring.NET. We have gone through two milestone and two release candidates before the GA release in December. The first chunks of code for the 1.1 release were made way back in late 2004 by Aleks Seovic who started work on the ASP.NET framework. In short, it has been a long time in the making. Being the end of year, a natural time for reflection both past and present, I&rsquo;d like to say thanks to the other members of the project and the Spring.NET community for all their contributions and support. I&rsquo;m looking forward to a great 2008!</p><p>The feature set of Spring.NET 1.1 is quite broad. An IoC container for Dependency Injection, AOP, ASP.NET framework, declarative transaction management and <a href="http://www.springframework.net/overview.html">more</a>. However, the biggest bang for the buck you can get to improve the structure and testability of your code is to add Dependency Injection and AOP into your proverbial developer tool chest. Dependency Injection is the more foundational technology of the two and I’d like to add some addition bits of info on the options you have to configure the Spring.NET container. </p><p>Clearly the most common way to configure the container is via XML. XML, while offering lots of flexibility, is verbose and everyone has a good time venting over beers about how much they hate XML configuration files (Spring or otherwise). Writing a custom can help greatly reduce the verbosity, removing much of the boilerplate XML and presenting attributes that focus on a particular domain. For example Spring.NET provides this for transaction management and AOP configuration. However, good news on the non-XML configuration front is that Spring.NET will be adding attribute based DI and auto detection of annotated classes in assemblies in its next release. As you might expect, the functionality offered will be quite similar to what is in Spring Java (see <a href="http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-annotation-config">here</a> and <a href="http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-classpath-scanning">here</a>) but will be adapted with a careful eye toward removing extraneous Java artifacts (such as JSR-250 attributes) and introducing new features (such as leveraging method parameter names for wire-by-name semantics) that make sense only on .NET. </p><p>One thing to keep in mind is that core container is not dependent on XML based object definitions. The container has its own internal object model for these definitions. As such, object definitions can come from a variety of formats. Particularly enticing, from what I’ve read so far, is to configure exception handling advice using the DSL toolkit. Other interesting approaches for configuration are to use a scripting language DSL (see this <a href="http://blog.interface21.com/main/2007/11/29/spring-dynamic-language-support-and-a-groovy-dsl/">post</a> for Spring Java + Groovy integration). At the end of the day, the goal is to let you pick among multiple configuration approaches for the task at hand.</p><p>In the current release, there are a few features relating to programmatic control and configuration of the container that do not seem to be widely known. Here is a brief overview of these features. I’ll put more complete descriptions in the reference docs soon.</p>
<h4>Configuring an existing object</h4><p>The main IoC container interface, <tt>IApplicationContext</tt>, contains the method<br /><code lang="C#">ConfigureObject(object objectToConfigure, string objectDefnitionName)</code></p><p>Based on the object definition associated with the name, the container will perform dependency injection on the passed in instance. This is particularly useful when you need to create an object at runtime in response to a user request. In this case you typically pass into the constructor some data that is unique to the situation and let the container configure the rest of the objects dependencies that are common to all user requests. </p>
<h4>Registering an existing object as a singleton</h4><p>This functionality is defined on a sub-interface of <tt>IApplicationContext</tt>, namely <tt>IConfigurableApplicationContext</tt>. The calling code looks like the following</p><p><code lang="C#">((IConfigurableApplicationContext) applicationContext).ObjectFactory.RegisterSingleton(&ldquo;ObjectB&rdquo;, myObjectBInstance);</code></p><p>The object registered will not be modified; it is simply stored as-is under the provided name. However, other objects may refer to this registered object as a dependency.</p>
<h4>Retrieving objects by name and type</h4><p>Retrieving objects by name is straightforward</p><p><code lang="c#">object o = applicationContext.GetObject(&ldquo;AccountManager&rdquo;)</code></p><p>and then casting to the appropriate type. You can also ask for object by type</p><p><code lang="c#">IDictionary dict = context.GetObjectsOfType(typeof (IAccountManager));</code></p><p>These API calls need some TLC by adding making them generic as well as providing a convenience method to get a single object of the specified type instead of a collection.</p>
<h4>Programmatic configuration of the container</h4><p>The class <tt>GenericApplicationContext</tt> is an IoC container that does not assume any specific object definition format. You can load it up with XML based object definitions from embedded resource like so</p><p><code lang="c#">GenericApplicationContext ctx = new GenericApplicationContext();</p><p>IObjectDefinitionReader objectDefinitionReader = new XmlObjectDefinitionReader(ctx);<br /> objectDefinitionReader.LoadObjectDefinitions(&quot;<a href="assembly://MovieFinder/AppContextContribution.xml" )">assembly://MovieFinder/AppContextContribution.xml")</a>;<br /></code></p><p>You can then add to the context other object definitions built using <tt>ObjectDefinitionBuilder</tt>. <tt>ObjectDefinitionBuilder</tt> offers a simple fluent interface to simplify the creation of object definitions. As such, <tt>ObjectDefinitionBuilder</tt> lets you chain together method calls to create an object definition that roughly correspond to the elements you are familiar with in Spring XML. </p><p><code lang="c#">IObjectDefinitionFactory objectDefinitionFactory = new DefaultObjectDefinitionFactory();</p><p>ObjectDefinitionBuilder builder =<br /> ObjectDefinitionBuilder.RootObjectDefinition(objectDefinitionFactory, typeof(ColonDelimitedMovieFinder));</p><p>builder.AddConstructorArg(&ldquo;movies.txt&rdquo;)<br /> .SetLazyInit(true);</p><p>ctx.RegisterObjectDefinition(&ldquo;AnotherMovieFinder&rdquo;, builder.ObjectDefinition);<br />// process object definitions…<br />ctx.Refresh()<br /></code></p><p>This code is lifted from an updated ‘MovieFinder’ example which you can download from the nightly builds. As a side note, the <tt>IObjectDefinitionFactory</tt> has another alternative implementation, <tt>WebObjectDefinitionFactory</tt>, for use with ASP.NET pages and user controls, though you are quite unlikely use it in this situation.</p><p>Here is an additional artificial example using the <tt>TestObject</tt> class that shows more of the <tt>ObjectDefinitionBuilder </tt> API.</p><p><code lang="c#">ObjectDefinitionBuilder builder = ObjectDefinitionBuilder.RootObjectDefinition(objectDefinitionFactory, typeof (TestObject));</p><p>builder.AddPropertyValue(&ldquo;Age&rdquo;, 22)<br /> .AddPropertyValue(&ldquo;Name&rdquo;, &ldquo;Joe&rdquo;)<br /> .AddPropertyReference(&ldquo;Spouse&rdquo;, &ldquo;Spouse&rdquo;)<br /> .SetSingleton(false);</p><p>ctx.RegisterObjectDefinition(&ldquo;TestObject&rdquo;, builder.ObjectDefinition);</p><p>builder = ObjectDefinitionBuilder.RootObjectDefinition(objectDefinitionFactory, typeof(TestObject));</p><p>IList friends = new ArrayList();<br />friends.Add(new TestObject(&ldquo;Dan&rdquo;, 34));<br />friends.Add(new TestObject(&ldquo;Mary&rdquo;, 33));</p><p>builder.AddPropertyValue(&ldquo;Friends&rdquo;, friends)<br /> .AddConstructorArg(&ldquo;Susan&rdquo;)<br /> .AddConstructorArg(23)<br /> .SetSingleton(false);</p><p>ctx.RegisterObjectDefinition(&ldquo;Spouse&rdquo;, builder.ObjectDefinition);<br /></code></p><p>If you already have an XML based application context, you can pass that in to the constructor of a <tt>GenericApplicationContext</tt>, which means it will acts at the latter’s parent application context in a simple root/child hierarchy. You can also register the context with the <tt>ContextRegistry</tt> under a name to provide service locator style lookup. </p><p>As is, the <tt>ObjectDefinitionBuilder</tt> API is rather ‘stringy’, meaning while it is possible to register objects for wiring ‘by-type’ it is more verbose than it needs to be. Improving the ‘fluentness’ of this API is another area for improvement in future releases.</p><p>Well, that’s all for now folks. Have a happy new year!</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 125;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>