<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>SpringSource应用程序平台部署选项</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="SpringSource Application Platform Deployment Options">
<meta name="twitter:description" content="<p>Since we released the SpringSource Application Platform last Wednesday, numerous developers have downloaded the 1.0.0 beta and started taking the Platform for a test drive. As a result, people have begun asking, “How can I deploy my apps on the Platform, and what kind of deployment and packaging options do I have?” Moreover, developers are eagerly requesting to see working samples. In response, the S2AP team will be releasing several sample applications over the coming weeks demonstrating these features and more, but before you get your hands on these samples, I’d like to give you a high-level overview of the deployment and packaging options available in the Platform. After reading this post you’ll be ready to hit the ground running with the samples as well as with your own applications.</p>
">
<meta name="twitter:creator" content="@sam_brannen">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/64310de9c07f30458f9baae33d91ccdc?s=200">

<meta property="og:title" content="SpringSource Application Platform Deployment Options">
<meta property="og:image" content="https://gravatar.com/avatar/64310de9c07f30458f9baae33d91ccdc?s=200">
<meta property="og:description" content="<p>Since we released the SpringSource Application Platform last Wednesday, numerous developers have downloaded the 1.0.0 beta and started taking the Platform for a test drive. As a result, people have begun asking, “How can I deploy my apps on the Platform, and what kind of deployment and packaging options do I have?” Moreover, developers are eagerly requesting to see working samples. In response, the S2AP team will be releasing several sample applications over the coming weeks demonstrating these features and more, but before you get your hands on these samples, I’d like to give you a high-level overview of the deployment and packaging options available in the Platform. After reading this post you’ll be ready to hit the ground running with the samples as well as with your own applications.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2008-05-06 23:40:00.0">
</head>
<body >

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">SpringSource应用程序平台部署选项</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/64310de9c07f30458f9baae33d91ccdc?s=20&d=mm"> <a class="author" rel="author" href="/team/sbrannen">山姆·布兰嫩</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2008-05-06 23:40:00.0">2008年5月6日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2008/05/06/springsource-application-platform-deployment-options#disqus_thread" data-disqus-identifier="157">
</a></div>
</div>
</header>
<div class="blog--post"><p>自从上周三发布SpringSource应用程序平台以来，许多开发人员已经下载了1.0.0 Beta，并开始将该平台进行测试。结果，人们开始问：“我如何在平台上部署我的应用程序，我有什么样的部署和打包选项？”此外，开发人员迫切要求查看工作样本。作为响应，S2AP团队将在未来几周内发布几个示例应用程序，以演示这些功能以及更多功能，但是在您获得这些示例之前，我想向您提供有关部署和打包选项的高级概述。在平台上可用。阅读这篇文章后，您将可以使用示例以及您自己的应用程序开始工作。</p>
<h2>总览</h2><p>正如Rob上周<a href="http://blog.springsource.com/main/2008/04/30/introducing-the-springsource-application-platform/">在“ SpringSource Application Platform简介”</a>一文中提到的那样，该平台支持打包为以下形式的应用程序：</p>
<ol>
<li>原始OSGi捆绑包</li>
<li>Java EE战争</li>
<li>网络模块</li>
<li>平台存档（PAR）</li>
</ol><p>当您将应用程序部署到平台时，每个部署工件（例如，单个捆绑包，WAR或PAR）都会通过部署管道。此部署管道支持个性特定的部署者的概念，这些角色负责处理具有特定<em>个性</em> （即应用程序类型）的应用程序。该平台的1.0.0版本本身支持特定于个性的部署者，类似于上述每个打包选项。此外，可以通过其他个性部署者来扩展部署管道，并且平台的未来版本将为诸如批处理，Web服务等个性提供支持。</p><p>现在，让我们仔细看一下每种受支持的部署和打包选项，以探索最适合您的应用程序的选项。</p>
<h2>原始OSGi捆绑包</h2><p>SpringSource Application Platform的核心是一个OSGi容器。因此，任何与OSGi兼容的捆绑软件都可以直接部署在未经修改的平台上。如果要通过OSGi服务注册表在容器内全局发布或使用服务，通常将应用程序部署为单个捆绑包或一组独立捆绑包。但是请注意，由于PAR格式的范围性质，独立捆绑包将无法跨应用程序边界使用服务。换句话说，独立捆绑包不能引用PAR中部署的模块的服务。</p>
<h2>WAR部署选项</h2><p>对于Web应用程序档案（WAR），SpringSource应用程序平台提供对以下三种格式的支持。</p>
<ol>
<li>标准Java EE WAR</li>
<li>共享库WAR</li>
<li>共享服务战争</li>
</ol><p>在从标准Java EE WAR到OSGi标准化的Web应用程序的增量迁移路径中，每种格式都扮演着不同的角色。</p>
<h3>标准战争</h3><p>正如Rob指出的那样： <em>“平台直接支持标准WAR文件。在部署时，WAR文件将转换为OSGi捆绑软件并安装到Tomcat中。所有标准的WAR合同均已兑现，您现有的WAR文件应直接放入并部署，无需进行任何更改。”</em> 对标准的，未修改的WAR文件的支持使您可以在现有Web应用程序上试用SpringSource Application Platform，然后逐渐向<em>Shared Libraries WAR</em> ， <em>Shared Services WAR</em>和<em>Web Module</em>格式迁移。</p>
<h3>共享库WAR</h3><p>如果您有使用标准WAR格式开发和打包Web应用程序的经验，那么您一定对<em>Library bloat</em>的痛苦很熟悉。因此，除非您在Servlet容器的公共库文件夹中安装共享库，否则必须将Web应用程序所需的所有JAR打包在<span style="font-family:courier">/ WEB-INF / lib中</span> 。在平台发布之前，此类库膨胀实际上已成为Web应用程序的<em>规范</em> ，但现在有了更好的解决方案！<em>共享库WAR</em>格式允许您通过标准OSGi清单标题（例如<span style="font-family:courier">Import-Package</span>和<span style="font-family:courier">Require-Bundle）</span>声明对库的依赖关系，从而减少了应用程序的部署占用空间并消除了库膨胀。该平台通过<span style="font-family:courier">Import-Library</span>和<span style="font-family:courier">Import-Bundle</span>清单标头提供了额外的支持，以简化依赖关系管理，这些标头本质上是被扩展为与OSGi兼容的<span style="font-family:courier">Import-Package</span>语句的宏。</p><p>有关您已经可以使用的哪种库的详细信息，请查看<a href="http://www.springsource.com/repository/app/">SpringSource Enterprise Bundle Repository</a> 。另外，安迪·威尔金森（Andy Wilkinson）将于本周晚些时候发布一个博客，解释如何在您的应用程序和SpringSource应用程序平台内充分利用Bundle信息库。因此，请继续关注。</p>
<h3>共享服务战争</h3><p>一旦开始通过共享库WAR利用声明式依赖性管理，您可能会发现自己想要迈出下一步，以获取OSGi容器的更多好处：在与OSGi兼容的捆绑包和Web应用程序之间共享服务。通过利用<a href="http://www.springframework.org/osgi">Spring-DM</a>的强大功能和简便性， <em>共享服务WAR</em>格式使OSGi Service Registry唾手可得。作为最佳实践，通常会通过以下方式发布您的域，服务和基础架构捆绑包中的服务： <span style="font-family:courier"><osgi:service …=""></osgi:service></span>然后通过Web应用程序的<span style="font-family:courier">ApplicationContext</span>使用它们<span style="font-family:courier"><osgi:reference …=""></osgi:reference></span> 。这样做可以促进对接口的编程，并允许您将特定于Web的部署工件与域模型，服务层等完全分离，这无疑是朝正确方向迈出的一步。在三种受支持的WAR部署格式中，就模块化和Web应用程序的总体占用空间而言，共享服务WAR迄今为止是最有吸引力的。</p>
<h2>网络模块</h2><p>除了基于WAR的部署格式之外，SpringSource应用程序平台还为符合OSGi的Web应用程序（ <em>Web模块</em>格式）引入了部署和打包选项。Web模块的结构类似于共享服务WAR，因此可以充分利用所有三种WAR部署格式。此外，Web模块还可以通过新的OSGi清单标头（例如<span style="font-family:courier">Web-DispatcherServletUrlPatterns</span>和<span style="font-family:courier">Web-FilterMappings）</span>来减少基于Spring MVC的应用程序的配置，从而受益。有关这些和其他<span style="font-family:courier">Web- *</span>清单标头的更多详细信息，请查阅《平台<a href="http://static.springsource.com/projects/applicationplatform/1.0.x/programmer-guide/html/">程序员指南》</a> 。即将发布的平台版本还将支持<span style="font-family:courier">web.xml</span> <em>片段</em>以及上述清单标头。</p><p>如果您将基于Spring MVC的Web应用程序构建为Web模块，则无需担心为<span style="font-family:courier">DispatcherServlet</span>配置<em>根</em> <span style="font-family:courier">WebApplicationContext</span>或<span style="font-family:courier">ApplicationContext</span> 。基于Web模块的<span style="font-family:courier">/META-INF/MANIFEST.MF中的</span>元数据，该平台将为您即时动态生成适当配置的<span style="font-family:courier">web.xml</span> ，并且您的应用程序将使用Spring之前为您的Web模块创建的ApplicationContext -DM。未来的发行版还将添加更多支持，以简化基于<a href="http://www.springframework.org/webflow">Spring Web Flow</a>的Web应用程序的配置。</p>
<h2>从WAR到Web模块的迁移路径</h2><p>下图以图形方式描述了从标准WAR到Web模块的迁移路径。如您所见，这些库从部署工件内移动到Bundle Repository。同样，服务从WAR内部移动到外部捆绑包，并可以通过OSGi服务注册表进行访问。另外，当您向Web模块迈进时，部署工件的总体占用空间会减少。</p><p><img id="image330" src="http://blog.springsource.com/main/wp-content/uploads/2008/05/migration-path-war-to-web-module.png" alt="从WAR到Web模块的迁移路径"></p>
<h2>平台档案</h2><p>难题的最后一部分是PAR（平台存档）部署格式。PAR是标准JAR，它在单个部署单元中包含应用程序的所有模块（例如，服务，域和基础结构捆绑包，以及用于Web应用程序的WAR或Web模块）。这使您可以将整个应用程序作为单个实体进行部署，刷新和取消部署。对于熟悉Java EE的人来说，在OSGi容器的上下文中，可以将PAR视为EAR（企业归档）的替代。另外，可以例如通过<a href="http://www.springsource.com/beta/applicationplatform/">SpringSource Application Platform Tool Suite</a> （注册Beta程序并查看Eclipse工具支持）独立且即时地刷新PAR中的模块。</p><p>此外，PAR可以在平台内确定应用程序模块的<em>范围</em> 。范围界定提供了物理和逻辑应用程序边界，使您的应用程序内部不受平台内部署的任何其他应用程序的影响。这意味着您的应用程序不必担心与其他正在运行的应用程序发生冲突（例如，在OSGi Service Registry中）。您将获得对加载时编织，类路径扫描，上下文类加载等的支持，并且该平台为您提供了繁重的工作，以使其在OSGi环境中无缝运行。如果您想充分利用SpringSource Application Platform和OSGi必须提供的所有功能，那么将应用程序打包和部署为PAR绝对是推荐的选择。</p>
<h2>从这往哪儿走</h2><p>如果您还没有这样做，我鼓励您加入<a href="http://www.springsource.com/beta/s2ap">Beta计划，</a>并亲自使用SpringSource Application Platform进行测试。</p><p>您可以在《 <a href="http://static.springsource.com/projects/s2ap/1.0.x/user-guide/html/">用户指南》</a>和《 <a href="http://static.springsource.com/projects/s2ap/1.0.x/programmer-guide/html/">程序员指南》中</a>找到最新的文档，如果碰巧在部署应用程序时遇到任何问题，或者对如何改进平台有任何建议，请随时<a href="http://issuetracker.springsource.com/browse/PLATFORM">创建JIRA问题</a> 。</p><p>最后但并非最不重要的一点是，一定要查看<a href="http://blog.springsource.com">SpringSource团队博客</a>上即将发布的帖子，以了解有关平台的最新消息，并查看工作示例，包括OSGi标准化的Spring PetClinic示例应用程序，该示例应用程序已模块化并打包为PAR。</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 157;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
 <a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>