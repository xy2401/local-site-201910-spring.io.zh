<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>使用Spring BlazeDS集成1.0.0。M1</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Using Spring BlazeDS Integration 1.0.0.M1">
<meta name="twitter:description" >
<meta name="twitter:creator" content="@jeremyg484">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/d3c6942bd89bc4d9c89f87e638ad0fc9?s=200">

<meta property="og:title" content="Using Spring BlazeDS Integration 1.0.0.M1">
<meta property="og:image" content="https://gravatar.com/avatar/d3c6942bd89bc4d9c89f87e638ad0fc9?s=200">
<meta property="og:description" >
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2008-12-17 07:22:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">使用Spring BlazeDS集成1.0.0。M1</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/d3c6942bd89bc4d9c89f87e638ad0fc9?s=20&d=mm"> <span class="author">杰里米·格莱尔</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2008-12-17 07:22:00.0">2008年12月17日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2008/12/17/using-spring-blazeds-integration-1-0-0-m1#disqus_thread" data-disqus-identifier="196">
</a></div>
</div>
</header>
<div class="blog--post"><p><strong>更新：下面显示的大多数代码示例已过时，并已由最新的<a href="http://blog.springsource.com/2009/06/10/using-spring-blazeds-integration-10/">“使用Spring BlazeDS集成1.0”</a>帖子中显示的示例取代。</strong></p><p>今天，我们宣布了开源Spring项目组合的最新成员<a href="http://www.springsource.org/spring-flex">Spring BlazeDS Integration</a>的第一个里程碑版本的公开发布。该项目的目的是使使用Adobe Flex作为前端客户端的构建基于Spring的Rich Internet Application更加容易。它旨在通过为使用开源Adobe BlazeDS项目及其强大的远程处理和消息传递功能以及熟悉的Spring编程模型提供一流的支持来实现此目的。</p><p>这个第一个里程碑是一个非常基础的发行版，重点支持将BlazeDS MessageBroker（处理来自Flex客户端的传入消息的中央组件）配置和引导为Spring管理的对象，并通过Spring DispatcherServlet基础结构将HTTP消息路由到该对象。 ，并轻松导出Spring bean作为直接进行Flex远程处理的目的地。最终版本1.0的未来里程碑将在此基础上构建，以提供更深层的功能，例如Spring Security集成，使用Spring的JMS支持的消息传递集成，与Spring 3.0的REST支持一起使用的AMFView，并希望进一步解决我们尚未想到的社区需求。这个里程碑也是我们通过<a href="http://www.springsource.com/download/community?project=Spring BlazeDS Integration">尝试发布</a>并在<a href="http://jira.springframework.org/browse/FLEX">项目Jira</a>和<a href="http://forum.springframework.org/forumdisplay.php?f=61">新社区论坛中</a>提供反馈来邀请社区参与的第一个机会。</p>
<h2>以Spring BlazeDS集成进行测试</h2><p>BlazeDS项目带有许多出色的“测试驱动”示例应用程序，以帮助您了解如何构建利用BlazeDS远程处理和消息传递功能的Flex应用程序。这些示例使用BlazeDS MessageBrokerServlet将消息路由到使用BlazeDS特定的XML配置连接在一起的BlazeDS管理的Java对象。听起来不错，但是您现有的基于Spring的基础架构又如何呢？如果您可以利用MessageBroker的功能而不必配置单独的servlet并使用熟悉的Spring编程模型，这会很好吗？这就是Spring BlazeDS集成适合的图片。</p><p>我创建了使用Spring BlazeDS集成的BlazeDS测试驱动器示例应用程序的修改版。修改后的样本的完整资源<a href="http://jira.springframework.org/secure/attachment/14963/flex-sample.zip">可在此处获得</a> 。您应该能够将样本导入Eclipse并使用WTP运行它。成功部署应用程序后，您可以在以下位置访问各个测试驱动器示例<a href="http://localhost:8080/samples/testdrive.htm"></a> <a href="http://localhost:8080/samples/testdrive.htm">http：// localhost：8080 / samples / testdrive.htm</a> 。 （请注意，在启动应用程序之前，必须在/ sampledb中启动随附的HSQL演示数据库。）在这里，我将逐步浏览该示例中的一些更有趣的部分，以说明开始构建基于Spring的Flex应用程序所需要的内容。</p><p>在项目中值得一看的第一件事是/samples/WEB-INF/web.xml。在这里，您将看到Spring <strong>DispatcherServlet</strong>的相当典型的设置：</p>
<pre><code class="prettyprint xml"><br />&lt;!-- The front controller of this Spring Web application --&gt;
&lt;servlet&gt;
    &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;/WEB-INF/config/web-application-config.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
        
&lt;!-- Map all /spring requests to the DispatcherServlet for handling --&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/spring/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre><p>这取代了标准BlazeDS示例中的MessageBrokerServlet配置。该特定应用程序设置有映射策略，该策略将允许同时提供来自同一应用程序的Flex直接远程内容和RESTful内容。如果要构建仅针对Flex客户端的应用程序，则可以使用参考手册中讨论的更简单的映射策略。</p><p>下一个要看的东西是/samples/WEB-INF/config/web-application-config.xml中的Spring配置。首先，请注意<strong>MessageBrokerFactoryBean</strong>定义：</p>
<pre><code class="prettyprint xml"><br />&lt;!-- Bootstraps and exposes the BlazeDS MessageBroker --&gt;
&lt;bean id=&quot;mySpringManagedMessageBroker&quot;
    class=&quot;org.springframework.flex.messaging.MessageBrokerFactoryBean&quot; /&gt;
</code></pre><p>这会将BlazeDS <strong>MessageBroker</strong>引导为Spring托管的bean，并使用/samples/WEB-INF/flex/services-config.xml的默认位置进行BlazeDS配置。Spring BlazeDS集成的一般方法是继续将标准BlazeDS XML配置用于相当静态且涉及基础架构的部分，例如通道定义，但允许在应用程序开发期间更频繁地更改的部分，例如远程目标，将使用熟悉的Spring配置模型进行配置。这样，暴露一个Spring管理的bean以便从Flex客户端直接进行远程处理是连接远程处理输出bean的简单问题。从样本中进一步检查Spring配置，您将看到以下操作：</p>
<pre><code class="prettyprint xml"><br />&lt;!-- Implementation of ProductService using Spring&#39;s SimpleJdbcTemplate --&gt;
&lt;bean id=&quot;productService&quot; class=&quot;flex.samples.product.JdbcProductService&quot; &gt;
    &lt;constructor-arg ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
    
&lt;!-- Expose the productService bean for BlazeDS remoting --&gt;
&lt;bean id=&quot;product&quot; 
    class=&quot;org.springframework.flex.messaging.remoting.FlexRemotingServiceExporter&quot;&gt;
    &lt;property name=&quot;messageBroker&quot; ref=&quot;mySpringManagedMessageBroker&quot;/&gt;
    &lt;property name=&quot;service&quot; ref=&quot;productService&quot;/&gt;
&lt;/bean&gt;
</code></pre><p>在这里，您可以看到一个简单的Spring bean <strong>productService</strong> ，它已作为远程目标导出到Spring管理的<strong>MessageBroker</strong> 。默认情况下，目标的serviceId将与Bean名称相同。可以从Flex客户端代码访问此服务，例如在以下/samples/WEB-INF/flex-src/testdrive-remoteobject/src/main.mxml中的MXML示例中：</p>
<pre><code class="prettyprint xml"><br />&lt;mx:RemoteObject id=&quot;srv&quot; destination=&quot;product&quot;/&gt;
	
&lt;mx:DataGrid dataProvider=&quot;{srv.getProducts.lastResult}&quot; width=&quot;100%&quot; height=&quot;100%&quot;/&gt; 

&lt;mx:Button label=&quot;Get Data&quot; click=&quot;srv.getProducts()&quot;/&gt;
</code></pre><p>由Spring管理的<strong>MessageBroker</strong>处理在<strong>productService</strong> bean上调用<strong>getProducts</strong>方法以及在Flex的本机AMF数据格式和Java之间来回序列化的细节。</p><p>这个难题的最后一部分是配置，用于将进入<strong>DispatcherServlet</strong>的Flex AMF消息请求实际路由到<strong>MessageBroker</strong> 。这是通过简单的<strong>HandlerMapping</strong>以及Spring配置中的<strong>MessageBrokerHandlerAdapter</strong>定义完成的：</p>
<pre><code class="prettyprint xml"><br />&lt;!-- Maps request paths at /messagebroker to the BlazeDS MessageBroker --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
    &lt;property name=&quot;mappings&quot;&gt;
        &lt;value&gt;
            /messagebroker/*=mySpringManagedMessageBroker
        &lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;!-- Dispatches requests mapped to a MessageBroker --&gt;
&lt;bean class=&quot;org.springframework.flex.messaging.servlet.MessageBrokerHandlerAdapter&quot;/&gt;
</code></pre><p>结合<strong>DispatcherServlet</strong>的映射的最终结果是，路径<strong>/ spring / messagebroker / *</strong>上的请求将被路由到Spring管理的<strong>MessageBroker</strong> 。请注意，/ WEB-INF / flex / services-config.xml中的BlazeDS通道定义与此映射相对应，例如：</p>
<pre><code class="prettyprint xml"><br />&lt;channel-definition id=&quot;my-amf&quot; class=&quot;mx.messaging.channels.AMFChannel&quot;&gt;
    &lt;endpoint url=&quot;http://{server.name}:{server.port}/{context.root}/spring/messagebroker/amf&quot; 
        class=&quot;flex.messaging.endpoints.AMFEndpoint&quot;/&gt;
    &lt;properties&gt;
        &lt;polling-enabled&gt;false&lt;/polling-enabled&gt;
    &lt;/properties&gt;
&lt;/channel-definition&gt;
</code></pre><p>当然，如果愿意，您可以在Flex客户端中分别设置这些通道（这样就不必使用services-config.xml编译Flex源代码），甚至甚至可以<a href="http://www.herrodius.com/blog/158">使用Spring ActionScript社区扩展</a> 。</p>
<h2>希望获得社区反馈</h2><p>有了这个基础，我们希望看到Spring BlazeDS集成发展成为使用Flex构建基于Spring的RIA的基本组件。该项目是为响应Spring社区对降低使用Flex with Spring构建应用程序的复杂性的一流解决方案的持续需求而启动的，并且应通过满足社区的需求继续发展。我们确保如此的方法是再次邀请您<a href="http://www.springsource.com/download/community?project=Spring BlazeDS Integration">自己尝试一下，</a>并通过<a href="http://forum.springframework.org/forumdisplay.php?f=61">论坛</a>和<a href="http://jira.springframework.org/browse/flex">Jira</a>参与。我们欢迎您的反馈，并期待着共同努力以最终发布1.0版。</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 196;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">球队</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>