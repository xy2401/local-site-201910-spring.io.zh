<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>绿豆：企业消息传递和Spring入门</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Green Beans: Getting Started with Enterprise Messaging and Spring">
<meta name="twitter:description" content="<p></p>
<p>In this post, we will introduce the core concepts of messaging, as well as the rich support for various types of messaging that the Spring framework and its sister projects provide.</p>
<p>What is Messaging? To best explain this, I’ll paraphrase the example offered by the groundbreaking <em>Enterprise Integration Patterns</em> book by Gregor Hohpe and Bobby Woolf (Addison Wesley, 2004). When you make a telephone call, you attempt to relay information to another party. This only works if the second party is available when you place the phone call. Because it is not always possible to answer phone calls, we use a voice-mail boxes to queue the messages. Callers leave messages in the voice-mail box and the callee is then free to retrieve the message (or, indeed, many messages) at a later point, asynchronously. </p>
">
<meta name="twitter:creator" content="@starbuxman">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200">

<meta property="og:title" content="Green Beans: Getting Started with Enterprise Messaging and Spring">
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200">
<meta property="og:description" content="<p></p>
<p>In this post, we will introduce the core concepts of messaging, as well as the rich support for various types of messaging that the Spring framework and its sister projects provide.</p>
<p>What is Messaging? To best explain this, I’ll paraphrase the example offered by the groundbreaking <em>Enterprise Integration Patterns</em> book by Gregor Hohpe and Bobby Woolf (Addison Wesley, 2004). When you make a telephone call, you attempt to relay information to another party. This only works if the second party is available when you place the phone call. Because it is not always possible to answer phone calls, we use a voice-mail boxes to queue the messages. Callers leave messages in the voice-mail box and the callee is then free to retrieve the message (or, indeed, many messages) at a later point, asynchronously. </p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2011-01-26 01:18:00.0">
</head>
<body dir="ltr">

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
 </div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">绿豆：企业消息传递和Spring入门</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&d=mm"> <a class="author" rel="author" href="/team/jlong">乔什·朗（Josh Long）</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2011-01-26 01:18:00.0">2011年1月26日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2011/01/26/green-beans-getting-started-with-enterprise-messaging-and-spring#disqus_thread" data-disqus-identifier="389">
</a></div>
</div>
</header>
<div class="blog--post"><p></p><p>在本文中，我们将介绍消息传递的核心概念，以及Spring框架及其姊妹项目提供的对各种消息传递的丰富支持。</p><p>什么是消息传递？为了最好地解释这一点，我将解释由Gregor Hohpe和Bobby Woolf（Addison Wesley，2004）开创性的<em>Enterprise Integration Patterns</em>书提供的示例。当您拨打电话时，您尝试将信息中继给另一方。仅当您拨打电话时第二方可用时，此方法才有效。由于并非总是可以接听电话，因此我们使用语音邮箱将消息排队。呼叫者将消息留在语音信箱中，然后被呼叫者可以自由地在以后的某个时间异步地检索该消息（或实际上很多消息）。</p><p>在该示例中，语音信箱位于两方的中间。它存储消息，然后在被叫方（接收方）检索到消息时将其传递。在企业消息传递的世界中，事情的工作原理几乎相同：一方将消息发送到消息传递代理（也称为面向消息的中间件– MOM），而另一方（在该方可以的情况下）–传递或明确查询来自消息代理的任何消息。</p><p>这就是类比不再有用的地方。与语音信箱相比，消息代理有很多选择。消息代理的理想位置是提供诸如路由之类的额外服务，并保证有关消息的传递。可以针对不同用例优化消息代理，例如，您可以为持久性而牺牲速度。消息代理可以将消息持久保存到外部存储以确保持久性，尽管通常这是可以以速度为名进行切换的配置。</p><p></p>
<p>在语音信箱示例中，消息是由一方发送的，然后传递给另一方–通信是<em>点对点的</em> 。消息代理支持此消息，以及另一种称为<em>publish-subscribe</em>的通信，在该通信中，消息将传递到多个客户端。</p>
<p>消息代理的一种常见用法是解决两个不同系统之间的集成问题。发送到消息代理的数据通常具有消息的发送者和接收者共同的格式。使用消息代理，两个系统唯一需要达成协议的是数据合同。消息通常具有消息正文和消息标头，消息正文存储消息本身的内容，消息标头是键/值对，键/值对提供有关消息正文的元数据，可用于帮助消息的使用者。处理消息。邮件头可以是您喜欢的任何内容，但它们通常与邮件本身或邮件的处理器有关。</p>
<h2>Java消息服务</h2>
<p>Java消息服务（JMS）API指定用于与消息代理进行交互的客户端接口。每个消息代理都提供自己的API实现，非常类似于JDBC驱动程序对JDBC API所做的工作。这意味着JMS客户端通常应使用与服务器相同版本的客户端。有许多很好的JMS代理实现可供选择。原因之一是消息传递一直是应用程序开发的重要组成部分，并且今天一直如此。从1.1版开始，JMS就成为J2EE（现在为Java EE）规范的一部分。在过去十年的大部分时间里，JMS规范的版本均为1.1。</p>
<p>在JMS中，客户端使用<code>javax.jms.ConnectionFactory</code>中创建一个<code>javax.jms.Connection</code> 。然后可以使用<code>Connection</code>创建一个<code>javax.jms.Session</code> 。<code>Session</code>表示客户端与代理的交互，并允许发送和接收消息以及其他不太明显的操作。</p><p></p><p>接口上最有用的方法涉及创建消息生产者，以及与<code>javax.jms.Destination</code></p><code>javax.jms.Destination</code></div><code>javax.jms.Destination</code></div><code>javax.jms.Destination</code></article><code>javax.jms.Destination</code></div><code>javax.jms.Destination</code></div><code>javax.jms.Destination</code></div><code>javax.jms.Destination</code></div><code>javax.jms.Destination</code></body></html>