<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Cloud Foundry for Spring Developers</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Cloud Foundry for Spring Developers" />
<meta name="twitter:description" content="&lt;p&gt;By now, many of you have probably seen the Cloud Foundry &lt;a target=&quot;_blank&quot; href=&quot;http://live-webcast.com/events/vmware/publicevent/webcast-flv-od.htm&quot;&gt;webinar&lt;/a&gt; and Rod’s &lt;a target=&quot;_blank&quot; href=&quot;http://blog.springsource.com/2011/04/12/launching-cloud-foundry/&quot;&gt;blog&lt;/a&gt; from earlier today. I’d like to provide a quick follow-up that features a “hello-spring” sample application deployed in the cloud. Thanks to Cloud Foundry, there’s practically no learning curve at all.&lt;/p&gt;
&lt;p&gt;Before we get started, let’s consider three goals that have driven Spring from day one:&lt;br&gt;&lt;/p&gt;
&lt;ol&gt;
 &lt;br&gt; 
 &lt;li&gt;focus on simplicity and productivity to make developers lives easier&lt;/li&gt;
 &lt;br&gt; 
 &lt;li&gt;support innovative technologies in a consistent way&lt;/li&gt;
 &lt;br&gt; 
 &lt;li&gt;ensure portability of applications across deployment environments&lt;/li&gt;
 &lt;br&gt;
&lt;/ol&gt;
" />
<meta name="twitter:creator" content="@m_f_" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/443e6ec0242c3f54001dae34374780e2?s=200" />

<meta property="og:title" content="Cloud Foundry for Spring Developers" />
<meta property="og:image" content="https://gravatar.com/avatar/443e6ec0242c3f54001dae34374780e2?s=200" />
<meta property="og:description" content="&lt;p&gt;By now, many of you have probably seen the Cloud Foundry &lt;a target=&quot;_blank&quot; href=&quot;http://live-webcast.com/events/vmware/publicevent/webcast-flv-od.htm&quot;&gt;webinar&lt;/a&gt; and Rod’s &lt;a target=&quot;_blank&quot; href=&quot;http://blog.springsource.com/2011/04/12/launching-cloud-foundry/&quot;&gt;blog&lt;/a&gt; from earlier today. I’d like to provide a quick follow-up that features a “hello-spring” sample application deployed in the cloud. Thanks to Cloud Foundry, there’s practically no learning curve at all.&lt;/p&gt;
&lt;p&gt;Before we get started, let’s consider three goals that have driven Spring from day one:&lt;br&gt;&lt;/p&gt;
&lt;ol&gt;
 &lt;br&gt; 
 &lt;li&gt;focus on simplicity and productivity to make developers lives easier&lt;/li&gt;
 &lt;br&gt; 
 &lt;li&gt;support innovative technologies in a consistent way&lt;/li&gt;
 &lt;br&gt; 
 &lt;li&gt;ensure portability of applications across deployment environments&lt;/li&gt;
 &lt;br&gt;
&lt;/ol&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2011-04-12 18:23:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Cloud Foundry for Spring Developers</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/443e6ec0242c3f54001dae34374780e2?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/mfisher">Mark Fisher</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2011-04-12 18:23:00.0">April 12, 2011</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="406" href="/blog/2011/04/12/cloud-foundry-for-spring-developers#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>By now, many of you have probably seen the Cloud Foundry <a target="_blank" href="http://live-webcast.com/events/vmware/publicevent/webcast-flv-od.htm">webinar</a> and Rod&rsquo;s <a target="_blank" href="http://blog.springsource.com/2011/04/12/launching-cloud-foundry/">blog</a> from earlier today. I&rsquo;d like to provide a quick follow-up that features a &ldquo;hello-spring&rdquo; sample application deployed in the cloud. Thanks to Cloud Foundry, there&rsquo;s practically no learning curve at all.</p><p>Before we get started, let&rsquo;s consider three goals that have driven Spring from day one:<br /><ol><br /> <li>focus on simplicity and productivity to make developers lives easier</li><br /> <li>support innovative technologies in a consistent way</li><br /> <li>ensure portability of applications across deployment environments</li><br /></ol></p><p>Then, consider those same three goals in relation to Cloud Foundry:<br /><ol><br /> <li><em>Simplicity and Productivity</em>: Deploying a Spring application to the cloud is as simple as dragging and dropping within SpringSource Tool Suite, and even when building an application to run in the cloud, developers can take advantage of the productivity gains enabled by Roo and Grails exactly as they normally would.</li><br /> <li><em>Consistent Innovation</em>: Projects like Spring Social and Spring Data embrace innovative technologies such as Twitter and non-relational data stores that are increasingly popular for cloud-based applications, and they do so in ways that are consistent with the existing Spring platform. Cloud Foundry provides services to support such applications. RabbitMQ will be available as a cloud service soon, so the same applies to applications that rely on RabbitMQ for messaging via Spring AMQP and Spring Integration.</li><br /> <li><em>Portability</em>: The cloud is first and foremost a new deployment environment, and yet it&rsquo;s easy to create an application that can run in and out of the cloud without even swapping configuration files.</li><br /></ol></p><p>With those goals in mind, we&rsquo;ve designed a sample application that provides an introduction to Cloud Foundry for Spring developers. This is the first of many sample applications that will be featured on this blog over the following days and weeks. It demonstrates how a single configuration can support both local testing and cloud deployment. It also demonstrates services available in Cloud Foundry: MySQL, Redis, and MongoDB. Let&rsquo;s quickly walk through the actual deployment and then work backwards to the configuration.</p><p>With a Cloud Foundry account, you can deploy (or “push”) applications to the cloud. Those applications can use services by binding to them. When you use the vmc command line tool or the STS plugin, you can either bind to an existing service or create a new one. Let&rsquo;s look at how to do this with the command line tool, vmc. Here&rsquo;s the output of the &lsquo;vmc push&rsquo; command:</p><p><code><br /><pre><br />Would you like to deploy from the current directory? [Yn]: y<br />Application Deployed URL: &lsquo;hello-spring.cloudfoundry.com&rsquo;?<br />Detected a Java SpringSource Spring Application, is this correct? [Yn]: y<br />Memory Reservation [Default:512M] (64M, 128M, 256M, 512M, 1G or 2G) 256<br />Creating Application: OK<br />Would you like to bind any services to &lsquo;hello-spring&rsquo;? [yN]: y<br />Would you like to use an existing provisioned service [yN]? n<br />The following system services are available::<br />1. redis<br />2. mongodb<br />3. mysql<br />Please select one you wish to provision: 3<br />Specify the name of the service [mysql-63854]: hello-db<br />Creating Service: OK<br />Binding Service: OK<br />Uploading Application:<br /> Checking for available resources: OK<br /> Processing resources: OK<br /> Packing application: OK<br /> Uploading (42K): OK<br />Push Status: OK<br /></pre><br /></code></p><p>The vmc output shows the individual steps, but the same task can be accomplished by dragging and dropping to a Cloud Foundry Server instance within SpringSource Tool Suite as shown here:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2011/04/sts-cloudfoundry.png"><img src="http://blog.springsource.com/wp-content/uploads/2011/04/sts-cloudfoundry.png" alt="Cloud Foundry Server in STS" title="sts-cloudfoundry" width="945" height="585" class="alignnone size-full wp-image-8417" /></a></p><p>Now that we&rsquo;ve seen the deployment, let&rsquo;s take a look at the configuration. It&rsquo;s surprisingly simple, since you don&rsquo;t even need to configure explicit credentials and connection strings. Instead, you can retrieve a reference to this DataSource from the cloud itself using the CloudFoundry “cloud” namespace. Let&rsquo;s look at how we might configure a bean, DataSourceCustomerService, to reference the CloudFoundry provisioned database service:</p>
<pre><code class="prettyprint xml"><br />&lt;cloud:data-source id=&quot;db&quot;/&gt;

&lt;bean class=&quot;example.AccountRepository&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;db&quot;/&gt;
&lt;/bean&gt;
</code></pre><p>The first element will create a bean of type java.sql.DataSource, and the second will be injected with its that reference to satisfy its dependency.<br />That&rsquo;s pretty much all you need to know in order to deploy a new application into the cloud and provision services. However, we also want to test the application locally. Thankfully, the forthcoming Spring 3.1 release offers some assistance here via Spring profiles. The “profiles” feature in Spring 3.1 – explained very clearly in this <a target="_blank" href="http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/">recent blog</a> by Chris Beams - enables you to &ldquo;switch on&rdquo; certain beans at runtime.</p><p>This can be quite useful when you want to associate beans with particular environments. Similar functionality is possible using Spring&rsquo;s property placeholder resolution mechanism to vary the definition of objects based on external properties. But this is different: suppose for example that you want to use the &lt;cloud:data-source/&gt; element in the cloud, a regular DriverManagerDataSource defined as a &lt;bean&gt; on localhost and a DataSource retrieved through JNDI in integration testing via &lt;jee:jndi-lookup/&gt;. Spring profiles makes it easy to associate each of these beans with a profile, so that – while all three are defined in the configuration – only one is active at any time based on the environment.</p><p>Spring provides a few pre-packaged strategies for enabling profiles. One is to use command line system properties. However, if you need to dynamically set the active profiles based on information that is known only at runtime, then consider using an ApplicationContextInitializer implementation, as described in this <a target="_blank" href="http://blog.springsource.com/2011/02/15/spring-3-1-m1-unified-property-management/">other post</a> by Chris Beams.</p><p>Let&rsquo;s look at the hello-spring application&rsquo;s configuration and how it takes profiles into account:</p>
<pre><code class="prettyprint xml"><br />&lt;beans&gt;
    &lt;beans profile=&quot;default&quot;&gt;
        &lt;jdbc:embedded-database id=&quot;dataSource&quot;/&gt;
    &lt;/beans&gt;

    &lt;beans profile=&quot;cloud&quot;&gt;
        &lt;cloud:data-source id=&quot;dataSource&quot;/&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre><p>The nested &lt;beans&gt; elements and their &ldquo;profile&rdquo; attributes are the only new Spring 3.1 features in use here. The nested beans element lets us specify that any beans contained therein should be enabled only if the designated profile is active.</p><p>With those simple steps, we can now build and test our logic locally and then deploy the exact same application to the cloud without changing anything. The cloud namespace has support for other services, as well. If we add MongoDB and Redis support, the configuration would look like this:</p>
<pre><code class="prettyprint xml"><br />&lt;beans profile=&quot;default&quot;&gt;
    &lt;jdbc:embedded-database id=&quot;dataSource&quot;/&gt;
    &lt;bean id=&quot;mongo&quot; class=&quot;com.mongodb.Mongo&quot;/&gt;
    &lt;bean id=&quot;redis&quot; class=&quot;org.springframework.data.keyvalue.redis.connection.jedis.JedisConnectionFactory&quot;/&gt;
&lt;/beans&gt;

&lt;beans profile=&quot;cloud&quot;&gt;
    &lt;cloud:data-source id=&quot;dataSource&quot;/&gt;
    &lt;cloud:mongo id=&quot;mongo&quot;/&gt;
    &lt;cloud:redis-connection-factory id=&quot;redis&quot;/&gt;
&lt;/beans&gt;
</code></pre><p>The hello-spring example shows all of this and more, and it can be cloned from this <a target="_blank" href="https://github.com/SpringSource/cloudfoundry-samples/tree/master/hello-spring">repository</a>. The most important characteristic of the application is that it can be dropped onto either a local server, such as the tc Server instance available within STS, or to the new Cloud Foundry server.</p><p>Here&rsquo;s a screenshot of the hello-spring application deployed locally:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2011/04/hello-spring-local.png"><img src="http://blog.springsource.com/wp-content/uploads/2011/04/hello-spring-local.png" alt="Hello Spring deployed locally" title="hello-spring-local" width="684" height="315" class="alignnone size-full wp-image-8428" /></a></p><p>And here&rsquo;s the exact same application running in the cloud. Notice how the URLs and connection strings are different:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2011/04/hello-spring-cloud.png"><img src="http://blog.springsource.com/wp-content/uploads/2011/04/hello-spring-cloud.png" alt="Hello Spring deployed in the cloud" title="hello-spring-cloud" width="685" height="311" class="alignnone size-full wp-image-8421" /></a></p><p>That&rsquo;s all for now, but watch this space. We have many more sample applications (watch <a target="_blank" href="https://github.com/SpringSource/cloudfoundry-samples">this repo</a>) and blogs planned in the days and weeks ahead!</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 406;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>