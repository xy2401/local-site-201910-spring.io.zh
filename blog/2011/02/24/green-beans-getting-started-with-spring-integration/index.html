<html dir="ltr" data-code-prettify="" data-mobile-support="" data-search=""><head></head><body dir="ltr">﻿
<title>绿豆：Spring集成入门</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>System.config({baseURL: "/b92013b"});</script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>System.import('app/main.js')</script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="Green Beans: Getting Started with Spring Integration">
<meta name="twitter:description" content="<p>Applications don’t exist in a vacuum. They need to communicate with their customers and with other applications. Application Integration is all about enabling this communication. Integration lets applications share services and data with each other, and, just as often, integration helps applications connect with their users.</p>
<p>Spring Integration provides a framework to build integration solutions, to facilitate these kinds of solutions. Spring Integration solutions describe the flow of data through a pipeline. Data enters the processing pipeline as a message. The message is moved forward through named pipes (called channels) that route the data to different components (called endpoints). You can string as many endpoints and channels together as you like.</p>
">
<meta name="twitter:creator" content="@starbuxman">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200">

<meta property="og:title" content="Green Beans: Getting Started with Spring Integration">
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200">
<meta property="og:description" content="<p>Applications don’t exist in a vacuum. They need to communicate with their customers and with other applications. Application Integration is all about enabling this communication. Integration lets applications share services and data with each other, and, just as often, integration helps applications connect with their users.</p>
<p>Spring Integration provides a framework to build integration solutions, to facilitate these kinds of solutions. Spring Integration solutions describe the flow of data through a pipeline. Data enters the processing pipeline as a message. The message is moved forward through named pipes (called channels) that route the data to different components (called endpoints). You can string as many endpoints and channels together as you like.</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2011-02-24 01:33:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">// Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }</script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">绿豆：Spring集成入门</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&d=mm"> <a class="author" rel="author" href="/team/jlong">乔什·朗（Josh Long）</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2011-02-24 01:33:00.0">2011年2月24日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2011/02/24/green-beans-getting-started-with-spring-integration#disqus_thread" data-disqus-identifier="399">
</a></div>
</div>
</header>
<div class="blog--post"><p>应用程序不是凭空存在的。他们需要与客户和其他应用程序进行通信。应用程序集成与启用此通信有关。集成使应用程序可以彼此共享服务和数据，并且集成可以像通常那样帮助应用程序与其用户连接。</p><p>Spring Integration提供了一个框架来构建集成解决方案，以简化此类解决方案。Spring Integration解决方案描述了通过管道的数据流。数据作为消息进入处理管道。消息通过命名管道（称为通道）向前移动，这些管道将数据路由到不同的组件（称为端点）。您可以根据需要将任意数量的端点和通道串在一起。</p><p>此模型的简单性与Unix命令行非常相似。以以下Unix咒语为例：</p>
<pre><code class="prettyprint shell">cat spring.txt |grep spring |cut -f1 -d, | sort | uniq > spring_cleaning.txt
</code></pre><p>在此命令中，来自外部资源（名为<code>spring.txt</code>的文件）的数据被传递到<code>grep</code>命令行中。 <code>grep</code>筛选结果，找到与单词“ spring”匹配的所有行并将其作为输出发送。<code>grep</code>命令的输出作为<code>cut</code>命令的输入发送，该命令将解析结果并以逗号分隔每个行（“，”），并且仅保留第一列数据（丢弃第一个“，”之后的所有其他内容） ）。该中继继续进行到最后，最后将输出写回到另一个名为<code>spring_cleaning.txt.</code>外部资源<code>spring_cleaning.txt.</code> 在此命令中，我们使用Unix“管道”（“ |”）将一个命令的输出连接到另一个命令的输入。我们通过专门编写来读取，清理，过滤，转换和写入数据。将单独关注的命令放入管道中。这种方法称为管道和过滤器模型，使用Spring Integration，您可以使用同一简单模型思考更大的问题。在Spring Integration中，通道是管道，端点是过滤器。<br></p><h2>Spring Integration随附电池</h2><br>Spring Integration支持许多不同的用例。这是一些常见的：<br><ul><br> <li><strong>转换数据</strong> ：转换器端点可能将有效负载的类型从一类更改为另一类，或者删除，添加或更改消息头。</li><br> <li> <strong>路由数据</strong> ：路由器端点提供自定义路由逻辑–也许应该将来自输入通道的数据传递到多个输出通道？</li><br> <li> <strong>过滤数据</strong> ：也许输入数据不适合继续进行，应该清除掉。您可以使用过滤器端点有条件地停止处理数据。</li><br> <li> <strong>使不同的系统适应Spring Integration</strong> ：适配器使数据能够进入和退出Spring Integration解决方案。</li><br> <li> <strong>拆分数据</strong> ：有效负载过大或打算将其分割为较小的数据时。一个示例可能是应该拆分为行的单个文件。</li><br> <li> <strong>聚合数据</strong> ：这是拆分功能的逆向：聚合器逐个等待消息到达，然后收集消息直到满足某种条件为止。然后，它将所有聚合消息作为一条消息发送。</li><br></ul><br>这些是Spring Integration开发人员工具箱中的工具。Spring Integration的核心只是一个具有通用抽象和接口的Maven依赖项。<p></p>
<pre><code class="prettyprint xml"><br><dependency>
    <groupId>org.springframework.integration</groupId>
    <artifactId>spring-integration-core</artifactId>
    <version>2.0.3.RELEASE</version>
</dependency>
</code></pre><p>Spring Integration提供了许多现成的模块，每个模块都具有适合特定类型需求的支持（例如：XML处理或Web服务集成）。例如，文件名称空间提供了入站适配器和出站适配器，以分别从文件系统读取文件和将文件写入文件系统。该<code>file:inbound-channel-adapter</code>相适应的文件系统-它可以监控您的规格的目录和，每当一个新的文件出现，有型的paylod所产生的消息<code>java.io.File</code>的有效载荷为新文件。一个常见的用例是从<code>java.io.File</code>到文件内容的表示形式<code>String</code>或<code>byte</code>数组（ <code>byte[]</code> ）。由于这是很常见的，文件命名空间提供既<code>file:file-to-string-transformer</code>端点以及一个<code>file:file-to-bytes-transformer</code> 。最后，一个常见的场景是人们想要将<code>String</code>或<code>byte</code>数组数据写入文件系统。为此， <code>file</code>名称空间提供了<code>file:outbound-channel-adapter</code>适配器。这些都是之前描述的基本端点的简单的面向文件IO的实现，例如，适配器和转换器。</p><p>Spring Integration附带了许多预包装的模块，这些模块在这些非常相同的终结点类型上支持广泛的功能。Spring Integration 2.0附带的一些模块包括文件IO，JDBC，RSS / ATOM，FTP / FTPS，SFTP，TCP / IP，RMI，HTTP，JMX，电子邮件，IO流，Twitter，XMPP，Web服务，HTTP / REST，XML和JMS。尽管此列表很广泛，但并不完整。即将提供或作为其他其他Spring产品组合项目的一部分提供的支持，包括Gemfire支持，AMQP支持，基于Activiti BPMN 2业务流程管理项目完成的工作流系统集成，基于Ajax / Comet的支持， Flex BlazeDS基于消息传递的支持等等。<br></p><h3>一个简单的例子</h3><br>让我们看一个简单的示例-假设的在线零售商的示例（“电子零售商”！）负责处理网站上的交易，并招募多家第三方公司来帮助完成订单。特别是，我们将研究从网站上的购买点到运输公司的数据流。集成由从服务发送的JMS消息触发。货运公司与电子零售商无关，并且希望所有订单都通过其Web服务端点提交，因此必须使用触发器JMS消息来调用Web服务端点。最后，所有提交给第三方（在本例中为运输公司）的工作都需要进行审核，因此信息应记录在我们数据库中面向报告的审核表中。<p></p>
<div align="center">
<a href="http://blog.springsource.com/wp-content/uploads/2011/02/SpringIntegration600x233.png"><img title="SpringIntegration600x233" src="http://blog.springsource.com/wp-content/uploads/2011/02/SpringIntegration600x233.png" alt="Spring集成示例过程" width="600" height="233"></a> <em>示例集成解决方案的图表-该图表是由SpringSource Tool Suite生成的</em>
</div><p><strong>处理JMS消息</strong> ：第一步是从JMS代理接收消息。我们将使用Spring Integration入站适配器（一个从JMS代理接收消息的端点），以一种简单的声明性方式将JMS代理连接到我们的应用程序代码。</p><p>Spring Integration使您可以处理包装在<code>org.springframework.integration.core.Message</code></p><code>org.springframework.integration.core.Message</code></div><code>org.springframework.integration.core.Message</code></div><code>org.springframework.integration.core.Message</code></article><code>org.springframework.integration.core.Message</code></div><code>org.springframework.integration.core.Message</code></div><code>org.springframework.integration.core.Message</code></div><code>org.springframework.integration.core.Message</code></div><code>org.springframework.integration.core.Message</code></body></html>