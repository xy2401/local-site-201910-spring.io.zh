<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring at China Scale: Alibaba Group (Alipay, TaoBao, and TMall) </title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring at China Scale: Alibaba Group (Alipay, TaoBao, and TMall) " />
<meta name="twitter:description" content="&lt;h3&gt;So What Does It Take to Operate at China Scale? &lt;/h3&gt;
&lt;p&gt;&lt;img style=&quot;float: left; margin-right:10px;&quot; src=&quot;http://blog.springsource.org/wp-content/uploads/2013/03/alibaba0.jpg&quot; alt=&quot;Some of the companies of the Alibaba group&quot;&gt;&lt;/p&gt;
&lt;p&gt;The challenges inherent to building enterprise applications that meet China-scale demand are unparalleled. One exemplary Chinese organization using Spring heavily to solve very unique challenges is the Alibaba group. &lt;a href=&quot;http://alibaba.com&quot;&gt;Alibaba&lt;/a&gt; is itself an online auction site, like eBay in the west. The Alibaba group in turn owns a few other online service companies, like &lt;a href=&quot;http://www.alipay.com&quot;&gt;Alipay&lt;/a&gt; (a secure transaction processor, like PayPal in the west), &lt;a href=&quot;http://www.taobao.com&quot;&gt;TaoBao&lt;/a&gt; (a comparison shopping engine, like Shopzilla in the west), and &lt;a href=&quot;http://www.tmall.com&quot;&gt;TMall&lt;/a&gt; (an e-tailer, exposing the catalogues of merchants, like Amazon in the west). &lt;/p&gt;
" />
<meta name="twitter:creator" content="@starbuxman" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />

<meta property="og:title" content="Spring at China Scale: Alibaba Group (Alipay, TaoBao, and TMall) " />
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />
<meta property="og:description" content="&lt;h3&gt;So What Does It Take to Operate at China Scale? &lt;/h3&gt;
&lt;p&gt;&lt;img style=&quot;float: left; margin-right:10px;&quot; src=&quot;http://blog.springsource.org/wp-content/uploads/2013/03/alibaba0.jpg&quot; alt=&quot;Some of the companies of the Alibaba group&quot;&gt;&lt;/p&gt;
&lt;p&gt;The challenges inherent to building enterprise applications that meet China-scale demand are unparalleled. One exemplary Chinese organization using Spring heavily to solve very unique challenges is the Alibaba group. &lt;a href=&quot;http://alibaba.com&quot;&gt;Alibaba&lt;/a&gt; is itself an online auction site, like eBay in the west. The Alibaba group in turn owns a few other online service companies, like &lt;a href=&quot;http://www.alipay.com&quot;&gt;Alipay&lt;/a&gt; (a secure transaction processor, like PayPal in the west), &lt;a href=&quot;http://www.taobao.com&quot;&gt;TaoBao&lt;/a&gt; (a comparison shopping engine, like Shopzilla in the west), and &lt;a href=&quot;http://www.tmall.com&quot;&gt;TMall&lt;/a&gt; (an e-tailer, exposing the catalogues of merchants, like Amazon in the west). &lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2013-03-04 23:46:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring at China Scale: Alibaba Group (Alipay, TaoBao, and TMall) </h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/jlong">Josh Long</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2013-03-04 23:46:00.0">March 04, 2013</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="509" href="/blog/2013/03/04/spring-at-china-scale-alibaba-group-alipay-taobao-and-tmall#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><h3>So What Does It Take to Operate at China Scale? </h3><p><img style="float: left; margin-right:10px;" src="http://blog.springsource.org/wp-content/uploads/2013/03/alibaba0.jpg" alt="Some of the companies of the Alibaba group" /></p><p>The challenges inherent to building enterprise applications that meet China-scale demand are unparalleled. One exemplary Chinese organization using Spring heavily to solve very unique challenges is the Alibaba group. <a href="https://alibaba.com">Alibaba</a> is itself an online auction site, like eBay in the west. The Alibaba group in turn owns a few other online service companies, like <a href="https://www.alipay.com">Alipay</a> (a secure transaction processor, like PayPal in the west), <a href="https://www.taobao.com">TaoBao</a> (a comparison shopping engine, like Shopzilla in the west), and <a href="https://www.tmall.com">TMall</a> (an e-tailer, exposing the catalogues of merchants, like Amazon in the west). </p><p>From the <A href="http://www.infoq.com/news/2012/12/interview-taobao-tmall">InfoQ article</a>, &ldquo;on 11 November, 2012 (the Double Sticks promotion day), Tmall and Taobao witnessed 147 million user visits, purchases of 30 million people and nearly 100 million paid orders. At 0:00, more than 10 million users were concurrently online.&rdquo; The &ldquo;double sticks promotion day&rdquo; is celebrated as a sort of day to honor the single people out there. People make blind-dates, attend speed-dating events, and - somewhat like cyber monday shopping in the US - look for good deals from merchants. <A href="http://venturebeat.com/2012/11/13/chinese-online-mall-taobao-reports-3b-yes-billion-in-sales-in-one-day-infographic-in-chinese/">TaoBao reported USD $3 billion dollars for a single 24 hour period</a>. That&rsquo;s almost triple the entire 2011 Black Friday sales of two of the largest e-commerce sites (combined) in the United States! Now that&rsquo;s awesome scale! </p><p>The Alibaba group has never been shy about talking about what they&rsquo;re doing and how they&rsquo;re doing it. They were kind enough to come to <A href="http://springonechina.cloudfoundry.com/">the SpringOne Beijing event in December, 2012</a>, where they explained at great length how they&rsquo;re using Spring to meet their unique challenges. </p><p>So, what&rsquo;s it take to handle <em>China scale</em>? Unsurprisingly, quite a bit! Each company had its own specific needs and use cases, and developed quite a bit of custom infrastructure and middleware to meet those demands. The architectures in a lot of ways mirror the architectures described by architects at Twitter, Facebook and Google over the years. The difference is that, by building on the Spring framework, they didn&rsquo;t have to go it alone, and could get to production quicker. The Spring framework underpinned all of these organizations, providing a common POJO-centric framework and idiom, while making software testing orders of magnitude simpler. Talented architects, in many cases, built their own custom, use-case specific frameworks and middleware on top of Spring&rsquo;s component model and runtime. </p><p>There are lots of pieces that are common across these organizations. Each organization deals with massive amounts of data and needs a scalable services and cross-service communication. Generally, these engines support the concept of a registry, which knows about which services are up in network topologies, which are available, as well as the RPC contracts supported by type. A registry like this knows how to configure each instance with an eye towards the whole network topology. Each organization uses messaging to connect systems in a reliable, fast way. Each organization has achieved optimum scale by decomposing their services and scaling each service independently. This decomposition implies that services aren&rsquo;t collocated, and must now incur the cost of network communication. To keep network communication to a minimum, efficiently conveyed binary representations of data with known contracts are used. Finally, to expose these services to their users, they build highly optimized, almost stateless web applications. </p><p>Alibaba group is using a variety of Pivotal technology in many different places. Above and beyond using core Spring, they&rsquo;re also using Spring MVC, Spring Security, and Groovy in varying configurations and uses. </p><p>They&rsquo;ve also taken advantage of the deep flexibility that Spring provides and built their own frameworks on top of Spring. It&rsquo;s worth noting that a lot <a href="http://code.alibabatech.com/wiki/dashboard.action">of this code is available online as open-source</a>.</p><p><img src="http://blog.springsource.org/wp-content/uploads/2013/03/alibaba1.jpg" alt="The topology of a Dubbo cluster" /></p><p>There are actually a couple of different approaches to services in play at the Alibaba group, for different reasons. One approach is called <em>Dubbo</em>. <A href="https://github.com/alibaba/dubbo">Dubbo</a> is a high performance services framework. It makes it easy to export and consume services through various modes of RPC. It also makes it easy to cluster these services. The whole system is <A href="http://code.alibabatech.com/wiki/display/dubbo/Home">open source</a>. You may get the code <A href="https://github.com/alibaba/dubbo">at GitHub</a>. </p><p>Dubbo builds on top of many existing open-source components, including <A href="https://zookeeper.apache.org">Apache Zookeeper</a>, <A href="http://redis.io">Redis</a>, and, of course, <A href="http://www.springsource.org">Spring</a>. It&rsquo;s easy to see why Dubbo has become such a key part of the stack, serving more than 2,000 services with more than 3 billion invocations everyday. Dubbo has become a key part of Alibaba&rsquo;s service-based solutions, and has been deployed to the whole Alibaba.com family. </p><p>You can easily setup and export services using Dubbo with the Spring namespace, which works like this: </p>
<pre><code class="prettyprint xml"><br />  &lt;!-- Application name --&gt;
  &lt;dubbo:application name=&quot;hello-world-app&quot;  /&gt;

  &lt;!-- registry address, used for service to register itself --&gt;
  &lt;dubbo:registry address=&quot;multicast://224.5.6.7:1234&quot; /&gt;

  &lt;!-- expose this service through dubbo protocol, through port 20880 --&gt;
  &lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20880&quot; /&gt;

  &lt;!-- which service interface do we expose? --&gt;
  &lt;dubbo:service interface=&quot;com.alibaba.dubbo.demo.DemoService&quot; ref=&quot;demoService&quot; /&gt;

  &lt;!-- designate implementation --&gt;
  &lt;bean id=&quot;demoService&quot; class=&quot;com.alibaba.dubbo.demo.provider.DemoServiceImpl&quot; /&gt;
</code></pre><p>Consuming a service is just as easy. On the client, you use the &lt;dubbo:reference&gt; element in the Dubbo namespace to bind a proxy by interface. Then, you may inject a reference to that proxy to any service that needs it, like this: </p>
<pre><code class="prettyprint xml"><br />    &lt;!-- consumer application name --&gt;
    &lt;dubbo:application name=&quot;consumer-of-helloworld-app&quot;  /&gt;

    &lt;!-- registry address, used for consumer to discover services --&gt;
    &lt;dubbo:registry address=&quot;multicast://224.5.6.7:1234&quot; /&gt;

    &lt;!-- which service to consume? --&gt;
    &lt;dubbo:reference id=&quot;demoService&quot; interface=&quot;com.alibaba.dubbo.demo.DemoService&quot; /&gt;
</code></pre><p><img src="http://blog.springsource.org/wp-content/uploads/2013/03/alibaba2.jpg" alt="SOFA architecture" /> </p><p>Another approach to services that&rsquo;s used specifically at Alipay is a project they call SOFA, which also supports the easy export and consumption of services in a distributed (and, importantly, collocated environment). SOFA offers many different styles of RPC, with multiple bindings available. It is similarly easy to export services using SOFA, like this: </p>
<pre><code class="prettyprint xml"><br />&lt;sofa:service ref=&quot;beanId&quot; interface=&quot;MyInterface&quot;&gt;
 &lt;sofa:binding.ws/&gt;
&lt;/sofa:service&gt;

&lt;sofa:reference id=&quot;refId&quot; interface=&quot;MyInterface&quot;&gt;
 &lt;sofa:binding.ws/&gt;
&lt;sofa:reference/&gt;
</code></pre><p>You can configure lots of different types of bindings, beyond <CODE>&lt;sofa:service.ws /&gt;</CODE>, for example: <COde>&lt;sofa:binding.tr&gt;</code>, <CODE>&lt;sofa:binding.msg&gt;</code>, and <CODE>&lt;sofa:binding.http&gt;</code> SOFA components </p><p><img src="http://blog.springsource.org/wp-content/uploads/2013/03/alibaba3.jpg" alt="SOFAMVC architecture" /></p><p>While SOFA is itself very interesting, what I really like is that they&rsquo;ve built a SOFA-architecture aware version of Spring MVC called SOFA MVC. SOFA MVC provides extensions to Spring MVC, including certain optimizations to Velocity template rendering, data mocking support, A/B test support, specific protection against certain security exploits (XSS, CSRF, upload filtration, and cookies) based on Spring Security. Additionally, they&rsquo;ve built their own deployment and runtime, offering features like Spring application context isolation and Servlet 3-style Java configuration. </p><p>This integrated runtime approach has proven very powerful, and the next step for their very unique requirements is to migrate away from heavier runtimes like JBoss and move to a home-grown, tailor-made, lighter weight and customized container like Eclipse Virgo. They believe that OSGi is a powerful and effective microkernel, and provides for an extensible architecture. They enjoy the isolation it provides multiple deployments on the same machine (at that scale, they try to collocate and re-use as much of an application server as possible!), and they like that service specification that OSGi requires. </p><p>I would advise anyone who has the chance to take a look at the open source projects at Alibaba group. My visit to their organization was really valuable. I learned a lot about how they&rsquo;re changing the world. They had some feedback to give me, as well, and that has all gone back into engineering at SpringSource so that you, the community, can benefit from the advances and Alibaba has made, one transaction at a time. I personally want to thank <a href="https://weibo.com/whisperxd">JingYu Wang</a>, XinSheng Wang, Ding Li, and LeWei Zhang at TaoBao; <a href="https://weibo.com/yannantian">Zhuoran Zhuang</a>, <a href="https://weibo.com/liuchangding"> ChangDing Liu</a>, <a href="https://weibo.com/liangfei0201"> Fei Liang</a>, <a href="https://weibo.com/fujohnwang"> FuQiang Wang </a> at TMall; <a href="https://weibo.com/unique5945"> Bing Yang </a>, <a href="https://weibo.com/u/1879507010"> Lei Wang </a> at Alipay; and - particularly - <a href="https://weibo.com/digitalsonic"> XueFeng Ding </a> (also from Alipay) who helped organize the whole, amazing in-depth look at the way the Alibaba group is using Spring.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 509;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>