<html  data-code-prettify="" data-mobile-support="" data-search=""><head>
<title>Spring Tool Suite中的JavaConfig支持</title>
<meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="asset?aid=0" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css">
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@springcentral">
<meta name="twitter:title" content="JavaConfig support in the Spring Tool Suite">
<meta name="twitter:description" >
<meta name="twitter:creator" content="@martinlippert">
<meta name="twitter:image:src" content="https://gravatar.com/avatar/8491f7d4276bddcfdcefaf5ae860b9f6?s=200">

<meta property="og:title" content="JavaConfig support in the Spring Tool Suite">
<meta property="og:image" content="https://gravatar.com/avatar/8491f7d4276bddcfdcefaf5ae860b9f6?s=200">
<meta class="anchor" name="project-configuration" property="og:description" content="<p>Spring applications that use JavaConfig instead of XML become more and more popular. Today we would like to show you the new features in the latest Spring Tool Suite 3.3.0 release that makes it easier for you to program Spring applications using annotations and JavaConfig instead of XML.</p>
<h3><a href=" #project-configuratio="=">Project configuration
<p>Let’s assume you implement a web application based on Spring and JavaConfig. A common practice would be to have a base @Configuration class where you define the common base Spring configuration in your application. That might look like this:</p>
">
<meta content="article" property="og:type">
<meta property="og:article:published_time" content="2013-07-18 14:39:00.0">



<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" width="0" style="display:none"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">专案</a>
</li>
<li class="navbar-link">
<a href="/guides">导游</a>
</li>
<li class="navbar-link active">
<a href="/blog">博客</a>
</li>
<li class="navbar-link">
<a href="/services">培训与认证</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form class="form-inline form-search" action="/search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索文档，指南和帖子..." type="text" value="">
<button class="search-form--submit" type="submit"></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form class="form-inline form-search" action="/search" method="get">
<button class="search-form--submit" type="submit"></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="搜索..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">家<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">专案<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">导游<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">博客<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">培训与认证<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>工程</div>
</div>
<div class="blog-category content--title">
<div>发布</div>
</div>
<div class="blog-category content--title">
<div>新闻与活动</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Tool Suite中的JavaConfig支持</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">工程</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/8491f7d4276bddcfdcefaf5ae860b9f6?s=20&d=mm"> <a class="author" rel="author" href="/team/mlippert">马丁·利珀特</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2013-07-18 14:39:00.0">2013年7月18日</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" href="/blog/2013/07/18/javaconfig-support-in-the-spring-tool-suite#disqus_thread" data-disqus-identifier="530">
</a></div>
</div>
</header>
<div class="blog--post"><p>使用JavaConfig代替XML的Spring应用程序变得越来越流行。今天，我们想向您展示最新的Spring Tool Suite 3.3.0版本中的新功能，这些功能使您可以更轻松地使用批注和JavaConfig而不是XML对Spring应用程序进行编程。</p><h3><a href="#project-configuration" class="anchor" name="project-configuration"></a>项目配置</h3><p>假设您实现基于Spring和JavaConfig的Web应用程序。一种常见的做法是拥有一个@Configuration基类，您可以在其中定义应用程序中的通用基本Spring配置。可能看起来像这样：</p>
<pre><code class="prettyprint java">@Configuration
@ComponentScan 
class ApplicationConfig {
	@Autowired	private Environment env;
	...
</code></pre><p>除此之外，您可能还具有针对Web应用程序的Web初始化程序实现，该实现将您的通用基本配置类定义为root config，并将另一个定义（可能是此Web初始化程序的内部类）定义为针对Web应用程序的配置：</p>
<pre><code class="prettyprint java"><br />@Configuration
@Import(RepositoryRestMvcConfiguration.class)
@ComponentScan 
public static class WebConfiguration extends WebMvcConfigurationSupport {

		@Autowired Repositories repositories;
	
		@Bean public DomainClassConverter domainClassConverter() {
			return new DomainClassConverter&lt;&gt;(mvcConversionService()); 
		} 
		...		
</code></pre><p>Spring Tool Suite现在提供了配置这些选项的选项<code>@Configuration</code>在项目的首选项中直接将类作为Spring配置：</p>
<p style="text-align:center"><a href="http://blog.springsource.org/wp-content/uploads/2013/07/javaconfig-project-configuration.png"><img class="aligncenter size-full wp-image-13943" title="javaconfig-project-configuration" src="http://blog.springsource.org/wp-content/uploads/2013/07/javaconfig-project-configuration.png" alt="" width="556" height="493" style="margin:5px"></a></p><p>这与基于XML的Spring配置文件完全相同。您甚至都可以为一个项目进行配置，但这似乎不是一个好的设计选择。如果您有使用XML文件作为Spring应用程序入口点的XML文件， <code>context:component-scan</code>要采取的要素<code>@Configuration</code>考虑到类别，您也不需要在项目设置中配置这些类别。工具会自动识别它们。</p><p>有<code>@Configuration</code>在项目设置中配置的类之后，您可以在Spring资源管理器或Project Explorer中浏览Spring模型。</p><h3><a href="#bean-config-sets" class="anchor" name="bean-config-sets"></a> Bean配置集</h3><p>用与将XML配置安排到工具中的Bean配置集相同的方式（将它们配置到有意义的上下文中进行验证），您也可以选择将JavaConfig类添加到这些配置集中。</p>
<p style="text-align:center"><a href="http://blog.springsource.org/wp-content/uploads/2013/07/javaconfig-configsets.png"><img class="aligncenter size-full wp-image-13945" title="javaconfig-configsets" src="http://blog.springsource.org/wp-content/uploads/2013/07/javaconfig-configsets.png" alt="" width="561" height="464" style="margin:5px"></a></p><p>如果您使用多个bean配置文件，则这特别有用。在这种情况下，您可以为每个配置文件配置一个配置集，以获取每个配置文件的验证。</p><h3><a href="#spring-project-settings-made-easy" class="anchor" name="spring-project-settings-made-easy"></a>春季项目设置变得容易</h3><p>从3.3.0版本开始，Spring Tool Suite提供了一种更简单的方法来配置Spring项目以获得工具支持。有一些新的上下文菜单操作可以在项目设置中定义@Configuration类，再次将其删除，然后将它们安排到bean配置集中：</p><p></p><p style="text-align:center"><a href="http://blog.springsource.org/wp-content/uploads/2013/07/add-as-bean-config.png"><img class="aligncenter size-full wp-image-13946" title="添加为 bean 配置" src="http://blog.springsource.org/wp-content/uploads/2013/07/add-as-bean-config.png" alt="" width="542" height="219" style="margin:5px"></a></p><p style="text-align:center"><a href="http://blog.springsource.org/wp-content/uploads/2013/07/remove-as-bean-config.png"><img class="aligncenter size-full wp-image-13947" title="删除为 bean 配置" src="http://blog.springsource.org/wp-content/uploads/2013/07/remove-as-bean-config.png" alt="" width="548" height="357" style="margin:5px"></a></p> <p></p>
<p style="text-align:center"><a href="http://blog.springsource.org/wp-content/uploads/2013/07/add-to-config-set.png"><img class="aligncenter size-full wp-image-13948" title="添加到配置集" src="http://blog.springsource.org/wp-content/uploads/2013/07/add-to-config-set.png" alt="" width="692" height="358" style="margin:5px"></a></p><h3><a href="#validations" class="anchor" name="validations"></a>验证方式</h3><p>作为项目构建的一部分，Spring工具在后台对您的Spring代码和Spring配置文件进行了大量验证。如果您在项目设置中定义了@Configuration类，则这些验证也将针对这些配置运行。例如，这为您提供了针对@Autowired批注的验证。只要在项目中没有定义的匹配bean就会在运行时注入，该工具就会将其标记为警告。</p><p><a href="http://blog.springsource.org/wp-content/uploads/2013/07/autowire-validation-1.png"><img class="aligncenter size-full wp-image-13949" title="autowire-validation-1" src="http://blog.springsource.org/wp-content/uploads/2013/07/autowire-validation-1.png" alt="" width="669" height="76"></a> </p><p><a href="http://blog.springsource.org/wp-content/uploads/2013/07/autowire-validation-21.png"><br><img class="aligncenter size-full wp-image-13952" title="autowire-validation-2" src="http://blog.springsource.org/wp-content/uploads/2013/07/autowire-validation-21.png" alt="" width="813" height="77"></a> </p><h3><a href="#content-assist-for-spring-annotations" class="anchor" name="content-assist-for-spring-annotations"></a> Spring注释的内容辅助</h3><p>尽管Eclipse已经在许多情况下提供了良好的内容帮助，但它不知道您用于配置Spring的批注的细节。但是我们做到了。因此，我们开始通过改进的内容支持来支持特定于Spring 的注释。从现在开始，在定义基本包和/或基础组件时，您可以在@ComponentScan批注中获得有关类型名称和包名称的内容帮助<code>basePackageType</code>属性。</p><p><a href="http://blog.springsource.org/wp-content/uploads/2013/07/class-content-assist.png"><img class="aligncenter size-full wp-image-13953" title="班级内容协助" src="http://blog.springsource.org/wp-content/uploads/2013/07/class-content-assist.png" alt="" width="706" height="152"></a><a href="http://blog.springsource.org/wp-content/uploads/2013/07/package-content-assist.png"><img class="aligncenter size-full wp-image-13954" title="包装内容协助" src="http://blog.springsource.org/wp-content/uploads/2013/07/package-content-assist.png" alt="" width="703" height="145"></a></p><p>我们将继续这项工作，并增加更多此类支持。如果您希望在此领域看到一些具体的实施，请告诉我们。欢迎您提供反馈。</p><h3><a href="#navigation-for-code-autowired-code" class="anchor" name="navigation-for-code-autowired-code"></a>导航到<code>@Autowired</code></h3><p>Eclipse提供了一个很好的功能，称为超链接。如果按住Command键并将鼠标悬停在该元素上，它将把类名和Java代码的各种元素转换为超链接。我们增强了此快速导航，以提供直接访问注入的bean的权限， <code>@Autowired</code>字段和参数。这样，您可以直接跳转到注入该对象的bean的bean定义。 <code>@Autowired</code>目标。</p><p><a href="http://blog.springsource.org/wp-content/uploads/2013/07/autowire_field.png"><img class="aligncenter size-full wp-image-13955" title="autowire_field" src="http://blog.springsource.org/wp-content/uploads/2013/07/autowire_field.png" alt="" width="246" height="125"></a> </p><h3><a href="#what-s-next" class="anchor" name="what-s-next"></a>下一步是什么</h3><p>目前，您必须定义<code>@Configuration</code>类在您的项目设置中手动设置。这将在将来的版本中更改。我们正在致力于这一领域的自动化。除此之外，我们还研究了对<code>@Enable*</code>注释。目的是提供有关由于这些注释而创建哪些bean的更详细的信息。</p><h3><a href="#wrapping-up" class="anchor" name="wrapping-up"></a>包起来</h3><p>Spring Tool Suite 3.3.0作为一流的公民支持基于JavaConfig的Spring项目，我们希望您喜欢它。如果您有任何反馈意见，请<a href="http://forum.springsource.org/forumdisplay.php?32-SpringSource-Tool-Suite">随时在论坛</a>上与我们联系或在我们的<a href="https://issuetracker.springsource.com/browse/STS">JIRA for STS中</a>提交票证（不仅是针对bug的请求，而且还针对增强功能的请求）。您的反馈总是非常欢迎和高度赞赏。享受新版本的Spring Tool Suite。</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 530;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>请启用JavaScript以查看<a href="http://disqus.com/?ref_noscript">由Disqus提供</a>的<a href="http://disqus.com/?ref_noscript">评论。</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">由<span class="logo-disqus">Disqus</span>提供动力的评论</a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>背部</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">所有帖子</a> <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">工程</a> <a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">发布</a> <a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">新闻与活动</a> <a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>将The Spring Team的更新发送到您的收件箱</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">工具类</a></li>
<li><a href="https://store.pivotal.io/">商店</a></li>
<li><a href="/blog">通讯</a></li>
</ul>
</div>
</div>© <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a> ，Inc.保留所有权利。
<a href="https://pivotal.io/terms-of-use">使用条款</a> • <a href="https://pivotal.io/privacy-policy">隐私</a> • <a href="/trademarks">商标准则</a>
<div id="teconsent" style="display:inline-block"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>