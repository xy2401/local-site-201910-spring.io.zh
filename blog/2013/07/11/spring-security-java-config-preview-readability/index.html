<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring Security Java Config Preview: Readability</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring Security Java Config Preview: Readability" />
<meta name="twitter:description" content="&lt;p&gt;In this post, I will discuss how to make your Spring Security Java configuration more readable. The post is intended to elaborate on a point from &lt;a href=&quot;http://blog.springsource.org/2013/07/03/spring-security-java-config-preview-web-security/&quot;&gt;Spring Security Java Config Preview: Web Security&lt;/a&gt; where I stated:&lt;/p&gt;
&lt;blockquote&gt;
 &lt;p&gt;By formatting our Java configuration code it is much easier to read. It can be read similar to the XML namespace equivalent where “and()” represents optionally closing an XML element. &lt;/p&gt; 
&lt;/blockquote&gt;
&lt;h3&gt;&lt;a href=&quot;#indentation&quot; class=&quot;anchor&quot; name=&quot;indentation&quot;&gt;&lt;/a&gt;Indentation&lt;/h3&gt;
&lt;p&gt;The indentation of Spring Security’s Java configuration really impacts its readability. In general, indentation like a bullet list should be preferred. &lt;/p&gt;
" />
<meta name="twitter:creator" content="@rob_winch" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/30ed046efb35c67d4c055dab109b8933?s=200" />

<meta property="og:title" content="Spring Security Java Config Preview: Readability" />
<meta property="og:image" content="https://gravatar.com/avatar/30ed046efb35c67d4c055dab109b8933?s=200" />
<meta property="og:description" content="&lt;p&gt;In this post, I will discuss how to make your Spring Security Java configuration more readable. The post is intended to elaborate on a point from &lt;a href=&quot;http://blog.springsource.org/2013/07/03/spring-security-java-config-preview-web-security/&quot;&gt;Spring Security Java Config Preview: Web Security&lt;/a&gt; where I stated:&lt;/p&gt;
&lt;blockquote&gt;
 &lt;p&gt;By formatting our Java configuration code it is much easier to read. It can be read similar to the XML namespace equivalent where “and()” represents optionally closing an XML element. &lt;/p&gt; 
&lt;/blockquote&gt;
&lt;h3&gt;&lt;a href=&quot;#indentation&quot; class=&quot;anchor&quot; name=&quot;indentation&quot;&gt;&lt;/a&gt;Indentation&lt;/h3&gt;
&lt;p&gt;The indentation of Spring Security’s Java configuration really impacts its readability. In general, indentation like a bullet list should be preferred. &lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2013-07-11 22:01:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Security Java Config Preview: Readability</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/30ed046efb35c67d4c055dab109b8933?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/rwinch">Rob Winch</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2013-07-11 22:01:00.0">July 11, 2013</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="529" href="/blog/2013/07/11/spring-security-java-config-preview-readability#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>In this post, I will discuss how to make your Spring Security Java configuration more readable. The post is intended to elaborate on a point from <a href="http://blog.springsource.org/2013/07/03/spring-security-java-config-preview-web-security/">Spring Security Java Config Preview: Web Security</a> where I stated:</p>
<blockquote><p>By formatting our Java configuration code it is much easier to read. It can be read similar to the XML namespace equivalent where &ldquo;and()&rdquo; represents optionally closing an XML element. </p>
</blockquote><h3><a href="#indentation" class="anchor" name="indentation"></a>Indentation</h3><p>The indentation of Spring Security&rsquo;s Java configuration really impacts its readability. In general, indentation like a bullet list should be preferred. </p><p>For a more concrete example, take a look at the following code:</p>
<pre><code class="prettyprint java"><br />http
    // #1
    .formLogin()
        // #2
        .loginPage(&quot;/login&quot;)
        .failureUrl(&quot;/login?error&quot;)
        // #3
        .and()
    // #4
    .authorizeRequests()
        // #5
        .antMatchers(&quot;/signup&quot;,&quot;/about&quot;).permitAll()
        .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)
        .anyRequest().authenticated();
</code></pre>
<ul>
<li><b>#1</b> <code>formLogin</code> updates the <code>http</code> object itself. The indentation of <code>formLogin</code> is incremented from that of <code>http</code> (much like they way the <code>&lt;form-login&gt;</code> is indented from <code>&lt;http&gt;</code>)</li>
<li><b>#2</b> <code>loginPage</code> and <code>failureUrl</code> update the <code>formLogin</code> configuration. For example, <code>loginPage</code> determines where Spring Security will redirect if log in is required. For this reason, each is a child of <code>formLogin</code>.</li>
<li><b>#3</b> <code>and</code> means we are done configuring the parent (in this case <code>formLogin</code>). This also implies that the next line will decrease indentation by one. When looking at the configuration you can read it as <code>http</code> is configured with <code>formLogin</code> <b>and</b> <code>authorizeRequests</code>. If we had nothing else to configure, the <code>and</code> is not necessary.</li>
<li><b>#4</b> We decrease the indentation with <code>authorizeRequests</code> since it is not related to form based log in. Instead, its intent is to restrict access to various URLs.</li>
<li><b>#5</b> each <code>antMatchers</code> and <code>anyRequest</code> modifies the authorization requirements for <code>authorizeRequests</code>. This is why each is a child of <code>authorizeRequests</code></li>
</ul><h4><a href="#ide-formatters" class="anchor" name="ide-formatters"></a>IDE Formatters</h4><p>The indentation may cause problems with code formatters. Many IDE&rsquo;s will allow you to disable formatting for select blocks of code with comments. For example, in STS/Eclipse you can use the comments of <b>@formatter:off</b> and <b>@formatter:on</b> to turn off and on code formatting. An example is shown below:</p>
<pre><code class="prettyprint java"><br />// @formatter:off
http
    .formLogin()
        .loginPage(&quot;/login&quot;)
        .failureUrl(&quot;/login?error&quot;)
        .and()
    .authorizeRequests()
        .antMatchers(&quot;/signup&quot;,&quot;/about&quot;).permitAll()
        .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)
        .anyRequest().authenticated();
// @formatter:on
</code></pre><p>For <a href="http://archive.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/eclipse-news-part2.html#JavaFormatter">this feature</a> to work, make sure you have it enabled:</p>
<ul>
<li>Navigate to <b>Preferences -&gt; Java -&gt; Code Style -&gt; Formatter</b></li>
<li>Click the <b>Edit</b> button</li>
<li>Select the <b>Off/On Tags</b> tab</li>
<li>Ensure <b>Enable Off/On tags</b> is selected</li>
<li>You can optionally change the strings used for disabling and enabling formatting here too.</li>
<li>Click <b>OK</b></li>
</ul><h3><a href="#comparison-to-xml-namespace" class="anchor" name="comparison-to-xml-namespace"></a>Comparison to XML Namespace</h3><p>Our indentation also helps us relate the Java Configuration to the XML namespace configuration. This is not always true, but it does help. Let&rsquo;s compare our configuration to the relevant XML configuration below.</p>
<pre><code class="prettyprint java"><br />http
    .formLogin()
        .loginPage(&quot;/login&quot;)
        .failureUrl(&quot;/login?error&quot;)
        .and()
    .authorizeRequests()
        .antMatchers(&quot;/signup&quot;,&quot;/about&quot;).permitAll()
        .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)
        .anyRequest().authenticated();
</code></pre><p>The relevant, but not equivalent, XML configuration can be seen below. Note that the differences between how Spring Security will behave between these configurations is due to the different default values between Java Configuration and XML configuration.</p>
<pre><code class="prettyprint xml"><br />&lt;http use-expressions=&quot;true&quot;&gt;
  &lt;form-login
      login-page=&quot;/login&quot;
      authentication-failure-url=&quot;/login?error&quot;
  /&gt; &lt;!-- similar to and() --&gt;
  &lt;intercept-url pattern=&quot;/signup&quot; access=&quot;permitAll&quot;/&gt;
  &lt;intercept-url pattern=&quot;/about&quot; access=&quot;permitAll&quot;/&gt;
  &lt;intercept-url pattern=&quot;/**&quot; access=&quot;hasRole(&#39;ROLE_USER&#39;)&quot;/&gt;
&lt;/http&gt;
</code></pre>
<ul>
<li>The first thing to notice is that the <code>http</code> and <code>&lt;http&gt;</code> are quite similar. One difference is that Java Configuration uses <code>authorizeRequests</code> to specify <code>use-expressions=&quot;true&quot;</code></li>
<li><code>formLogin</code> and <code>&lt;form-login&gt;</code> are quite similar. Each child of <code>formLogin</code> is an XML attribute of <code>&lt;form-login&gt;</code>. Based upon our explanation of indentation, the similarities are logical since XML attributes modify XML elements.</li>
<li>The <code>and()</code> under <code>formLogin</code> is very similar to ending an XML element.</li>
<li>Each child of <code>authorizeRequests</code> is similar to each <code>&lt;intercept-urls&gt;</code>, except that Java Configuration <a href="https://github.com/SpringSource/spring-security-javaconfig/blob/1e1415bda46a798e8242697787a43921d7645d3f/spring-security-javaconfig/src/test/groovy/org/springframework/security/config/annotation/web/configurers/NamespaceHttpInterceptUrlTests.groovy#L136">specifies requires-channel differently</a> which helps reduce configuration in many circumstances.</li>
</ul><h3><a href="#summary" class="anchor" name="summary"></a>Summary</h3><p>You should now know how to consistently indent your Spring Security Java Configuration. By doing so your code will be more readable and be easier to translate to and from the XML configuration equivalents.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 529;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>