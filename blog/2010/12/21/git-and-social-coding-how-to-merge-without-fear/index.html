<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Git and Social Coding: How to Merge Without Fear</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Git and Social Coding: How to Merge Without Fear" />
<meta name="twitter:description" content="&lt;p&gt;Git is great for social coding and community contributions to open source projects: contributors can try out the code easily, and there can be hordes of people all forking and experimenting with it but without endangering existing users. This article presents some examples with the Git command line that might help build your confidence with this process: how to fetch, pull and merge, and how to back out of mistakes. If you are interested in the social coding process itself, and how to contribute to Spring projects, check out another &lt;a href=&quot;http://blog.springsource.com/2010/12/21/social-coding-in-spring-projects/&quot;&gt;blog on this site by Keith Donald&lt;/a&gt;.&lt;/p&gt;
" />
<meta name="twitter:creator" content="@david_syer" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/ae671230e3a1c2a0eefa7604990084f1?s=200" />

<meta property="og:title" content="Git and Social Coding: How to Merge Without Fear" />
<meta property="og:image" content="https://gravatar.com/avatar/ae671230e3a1c2a0eefa7604990084f1?s=200" />
<meta property="og:description" content="&lt;p&gt;Git is great for social coding and community contributions to open source projects: contributors can try out the code easily, and there can be hordes of people all forking and experimenting with it but without endangering existing users. This article presents some examples with the Git command line that might help build your confidence with this process: how to fetch, pull and merge, and how to back out of mistakes. If you are interested in the social coding process itself, and how to contribute to Spring projects, check out another &lt;a href=&quot;http://blog.springsource.com/2010/12/21/social-coding-in-spring-projects/&quot;&gt;blog on this site by Keith Donald&lt;/a&gt;.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2010-12-21 10:29:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Git and Social Coding: How to Merge Without Fear</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/ae671230e3a1c2a0eefa7604990084f1?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/dsyer">Dave Syer</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2010-12-21 10:29:00.0">December 21, 2010</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="384" href="/blog/2010/12/21/git-and-social-coding-how-to-merge-without-fear#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>Git is great for social coding and community contributions to open source projects: contributors can try out the code easily, and there can be hordes of people all forking and experimenting with it but without endangering existing users. This article presents some examples with the Git command line that might help build your confidence with this process: how to fetch, pull and merge, and how to back out of mistakes. If you are interested in the social coding process itself, and how to contribute to Spring projects, check out another <a href="http://blog.springsource.com/2010/12/21/social-coding-in-spring-projects/">blog on this site by Keith Donald</a>.</p><p><a href="https://github.com/grails">Grails</a> has been on Github for a while and had a great experience with community contributions, so some other projects from SpringSource are starting to migrate over there as well. Some of the migrating projects are new (e.g. <a href="https://github.com/SpringSource/spring-amqp">Spring AMQP</a>) and some are already established and have migrated from SVN (e.g. <a href="https://github.com/SpringSource/spring-batch">Spring Batch</a>). There are also some Spring projects on a SpringSource hosted Gitorious instance, for example <a href="http://git.springsource.org/spring-integration">Spring Integration</a>. The social coding process is slightly different on Github and Gitorious, but the underlying Git manipulations are the same, and that is what we present here. Hopefully, after reading this article and maybe working through the examples, you will be inspired to try the new model and to make contributions to Spring projects. Git is fun and has some great features for this kind of development.</p><p>If you have never used Git this is probably not the place to start learning. If you are migrating from SVN to Git and are not as confident when things go wrong as you feel you need to be, or if you want to rid your history of those irritating &ldquo;<code>Merged branch &lsquo;master&rsquo;&hellip;</code>&rdquo; log messages and keep it nice and linear, this is the place to be. If you are signed up on a social coding site and want to get crunching your changes into your favourite open source project, this article will help you feel more confident about it but you should still read the documentation from your coding host about forking and merging. Hopefully then it will all make sense. </p><p>This article takes you through a few simple but common scenarios with Git and multiple users. We start with two users sharing a single repository, and show some pitfalls they can encounter and some tricks for rescuing themselves. Then we move on to a social coding example where there are still two users, but now there are also two remote repositories. This is quite common in open source projects and has a some benefits from a change management perspective, as we will see.</p>
<h2>Origins</h2><p>We are going to start by setting up a simple repository to use for some examples. Here are some Git command line operations you can do yourself from any UN*X shell, and then a sketch of the Git index to show how the commits and branches are laid out:</p>
<pre>$ mkdir test; cd test; touch foo.txt bar.txt
$ git init .
$ git add .
$ git status
To be added
$ git commit -m "Initial"
[master (root-commit) 5f1191e] initial
 2 files changed, 2 insertions(+), 0 deletions(-)
 create mode 100644 bar.txt
 create mode 100644 foo.txt
$ git checkout -b feature
$ echo bar > bar.txt
$ git commit -am "change bar"
$ git checkout master
$ echo foo > foo.txt
$ git commit -am "change foo
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master)
  \
    C (feature)
</pre>
</div><p>A simple layout, but complex enough to be interesting. There are 3 commits (we ommitted the commit messages in the diagram), and two independent branches. The branches were deliberately engineered to have no conflicts - they contain changes to different files. If you are working through the command line examples and want to see the index tree as well, use a Git UI tool (I used <code>gitk &ndash;all</code> which is available on all platforms I believe).</p><p>The last thing to do is prepare this repository for cloning:</p>
<pre>$ git checkout HEAD~1 
</pre><p>We deliberately used a reference <code>HEAD~1</code> instead of a branch name so that the origin is left with a detached HEAD. If you are used to a remote repository workflow, this will make sense because we are faking a remote repository locally, and remote repositories are usually &ldquo;bare&rdquo; (there is no checked out branch). The <code>HEAD~1</code> reference means &ldquo;go back a step, but don&rsquo;t assign the new HEAD to any branch&rdquo;, and this makes it possible to push changes to the repository from clones later.</p>
<h2>Bob Makes a Clone and Tracks the Branch</h2><p>Bob is our first user of the repository. Here is his terminal and the index layout in his local repository:</p>
<pre>$ git clone test bob
$ cd bob
$ git checkout --track origin/feature
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master)
  \
    C (feature,origin/feature)
</pre>
</div><p>Bob knows that the feature branch was experimental, but has now been tested so he wants to move it onto the master for inclusion in the next release. But if he merges from here, he gets a non-linear mess (despite the fact that there are no conflicts):</p>
<pre>$ git merge master
Merge made by recursive.
 foo.txt |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (feature) "Merge branch 'master' into feature"
  \                           /
    C (origin/feature) ------
</pre>
</div><p>Bob hates this. The history is non-linear so it&rsquo;s much harder to see where all the changes came from, and it also leaves him with the dreaded auto-generated commit message &ldquo;Merge branch &lsquo;master&rsquo;&hellip;&rdquo;. (It doesn&rsquo;t matter if he merges feature onto master or master onto feature, the result is the same structure with the same ancestors and the same child commits, but with a slightly different auto-generated message.) A push is legal from here but he ends up with the ugly history visible to everyone and also the less than useful auto-generated comments.</p><p>Bob doesn&rsquo;t panic! He can still revert to the original index because he hasn&rsquo;t pushed anything yet:</p>
<pre>$ git reset --hard origin/feature
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master)
  \
    C (feature,origin/feature)
</pre>
</div><p>From there he can sit back and wait for someone else to solve the problem. Along comes Jane&hellip;</p><p>(Note that not everyone shares this view of Bob&rsquo;s, that unnecessary non-linear history and auto-generated commit logs with no new changes are a bad thing. Some people actually find it &ldquo;re-assuring&rdquo; that there are signs of parallel development. They generally don&rsquo;t use rebase and prefer the simple pull and merge approach to collaboration with Git.)</p>
<h2>Jane Clones Another Copy and Does a Local Rebase</h2><p>Jane is also a developer with write access to the test repository. She is bolder than Bob and decides that what is needed is a rebase to keep the history linear:</p>
<pre>$ git clone test jane
$ cd jane
$ git checkout --track origin/feature
$ git rebase master
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (feature)
  \
    C (origin/feature)
</pre>
</div><p>(Note that Jane could have achieved the same result by starting down the same route as Bob - a merge of master, followed by a rebase has the same endpoint because rebase is smart enough to realize that it can save some duplication and not show intermediate states that contain no new changes.)</p><p>Now everything looks OK(ish), but git will not allow a push back to origin because the feature has diverged:</p>
<pre>$ git push
To file:///path/to/test
 ! [rejected]        feature -> feature (non-fast-forward)
error: failed to push some refs to 'file:///path/to/test'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details.
</pre><p>If Jane takes the hint and merges from here and she really will regret it. The result of the rebase is only really OK*ish* - it has duplicate commits (<code>C</code> and <code>D</code> with the same log message and the same changes when you quint at them), so the merge will not be pretty. Git is only going to do what she told it, and the merge is legal, but the effect will be<br />* a non-linear history<br />* an auto-generated commit message<br />* duplicate commit messages (one on each ancestor branch)<br />Here&rsquo;s the result:</p>
<pre>$ git merge origin/feature 
Merge made by recursive.
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D "change bar" - E (feature) "Merge branch 'master' into feature"
  \                                            /
    C (origin/feature) "change bar" ----------
</pre>
</div><p>She only made two changes to the source code but the result is 5 commits in the index. That sucks. To revert she can use the same trick as before, except that now there is no named branch at the commit she wants to reset to (D). Either she can add one, or use a UI tool <code>gitk</code> is good at this), or use a relative reference:</p>
<pre>$ git reset --hard HEAD~1
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (feature)
  \
    C (origin/feature)
</pre>
</div><p>The unfriendly thing to do, and the one that all the Git manuals warn you about, is to force a push. Jane gives it a try:</p>
<pre>$ git push --force
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (feature,origin/feature)
</pre>
</div><p>Now that&rsquo;s more like it! Two changes and three commits (one on either side of the changes), and a nice linear history with no unpleasant commit messages. So why is it such a bad thing to do? Let&rsquo;s look at our hapless friend Bob again.</p>
<h2>Bob is Now Potentially in a Mess</h2><p>He will be fine if he hasn&rsquo;t modified the &ldquo;feature&rdquo; branch:</p>
<pre>$ git checkout master
$ git pull
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From file:///path/to/test
 + 4b223e2...4db65c2 feature       -> origin/feature  (forced update)
Already up-to-date.
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (origin/feature)
  \
    C (feature)
</pre>
</div><p>It looks a little ugly here, but Git has held everything together. Bob can see that Jane (or someone) has forced an update to the remote branch he was tracking, so his local branch has diverged through no fault of his. He might be a little peeved about that, but in this case it is harmless because he hasn&rsquo;t made any changes to his local branch so he can just reset his branch:</p>
<pre>$ git checkout feature
Switched to branch 'feature'
Your branch and 'origin/feature' have diverged,
and have 1 and 2 different commit(s) each, respectively.
$ git reset --hard origin/feature
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (feature,origin/feature)
</pre>
</div><p>Everyone is happy! So a forced push is OK in some circumstances. In particular, it can be acceptable for someone working on a fork of a &ldquo;main&rdquo; project, as often arises with social coding (like at Github). Let&rsquo;s look at that use case in more detail.</p>
<h2>Forks and Social Coding</h2><p>One of the intended useful features of Git is that it can be used as a distributed repository - you don&rsquo;t have to take the single-origin approach common with SVN and older systems. The distributed feature is used heavily, but not extensively, when you fork from a public open-source project and then ask the project&rsquo;s owner to merge in some of your changes to the main repository.</p><p>So let&rsquo;s suppose that there is a cool open-source project called <code>main</code>, owned by Mary, and Bob goes and forks it from the project home page. He gets a new repository with a precise copy of the Git index of the <code>main</code> repository, and he can call it whatever he likes (he chooses <code>bob-main</code> to help us keep it straight). The Git part of this is trivial - effectively he is just cloning <code>main</code>, moving the origin reference to the new location in his own space on the server, and then pushing the changes back up. The social coding application handles all this behind the scenes and helpfully suggests to Bob that he clone his new remote fork.</p><p>So now we have a <code>main</code> repository (which is the origin for Mary, but not for Bob), and a <code>bob-main</code> repository which are identical. Let&rsquo;s make it start with just one commit to keep it simple (so take the origin creation recipe from the first example and stop after the first commit):</p>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A (master)
</pre>
</div><p>Mary&rsquo;s local copy starts identical Bob&rsquo;s, and they both look like this:</p>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A (master,origin/master)
</pre>
</div><p>But their origin references are different. For Mary:</p>
<pre>$ git remote -v
origin	<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2f48465b6f47405c5b">[email&#160;protected]</a>:/mary/main (fetch)
origin	<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="63040a17230b0c1017">[email&#160;protected]</a>:/mary/main (push)
</pre><p>and for Bob:</p>
<pre>$ git remote -v
origin	<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2f48465b6f47405c5b">[email&#160;protected]</a>:/bob/bob-main (fetch)
origin	<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f0979984b0989f8384">[email&#160;protected]</a>:/bob/bob-main (push)
</pre><p>Typically Mary will not have permission to push to Bob&rsquo;s repository nor vice versa.</p>
<h3>Bob Adds a Feature</h3><p>Bob has a great idea for the main project so he creates his feature branch and starts coding, ending up here:</p>
<pre>$ git checkout -b feature
$ echo foo >> foo.txt
$ git commit -am "change foo"
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A(master,origin/master) - C (feature)
</pre>
</div><p>He is pleased with this, so he pushes it back to his own origin</p>
<pre>$ git push origin feature
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A(master,origin/master) - C (feature,origin/feature)
</pre>
</div><p>Notice how Bob keeps all his changes on a branch. This isn&rsquo;t compulsory, but as we&rsquo;ll see later, it makes it a lot easier to keep track of differences with the <code>main</code> repository (even though so far Bob has no explicit connection to there). The user documentation at Github actually doesn&rsquo;t recommend this approach, but you might find it helpful.</p>
<h3>Mary Makes Some Changes</h3><p>Mary is the project owner, and she can push to her master branch any time she likes. So she does this:</p>
<pre>$ echo bar >> bar.txt
$ git commit -am "change bar"
$ git push
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master)
</pre>
</div>
<h3>Bob Sends a Pull Request</h3><p>Now Bob asks Mary to merge his changes. Mary follows the friendly instructions on the social coding site and pulls down Bob&rsquo;s changes to take a look</p>
<pre>$ git checkout -b bob master
$ git pull https://host/bob/bob-main feature
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - D (bob) "Merge branch 'feature' of '...bob-main' into bob"
  \                           /
    C  ----------------------
</pre>
</div><p>Mary sees immediately that Bob has diverged from her master. What should she do?</p>
<h3>Alternative 1: No Forced Push</h3><p>In this case it might be quite straightforward if there are no conflicts. She decides to spend some time cleaning up the history, just in case it is easy. This is the same process that Bob used in the previous, single origin example.</p>
<pre>$ git reset --hard HEAD~1
$ git rebase master
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master) - C (bob)
</pre>
</div><p>No problems there, and the history is linear again. Mary just needs to wrap up the change with her main project:</p>
<pre>$ git checkout master
$ git merge bob
$ git push
$ git branch -D bob
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B - C (master,origin/master)
</pre>
</div><p>She deleted the local branch <code>bob</code> at the end there because it is no longer marking anything significant, and it isn&rsquo;t tracking a remote branch so she doesn&rsquo;t have to deal with that reference as well.</p>
<h3>Alternative 2: Forced Push in Fork</h3><p>If the rebase failed above, or Mary simply takes the view that if it is Bob that wants his change to be merged then the onus is on him to make the history linear, she can ask him to rebase onto her master. She sends him a message via the nifty social coding site, and then resets her local copy:</p>
<pre>$ git checkout master
$ git branch -D bob
$ git prune
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master)
</pre>
</div><p>Now Bob gets to work. He is still on his feature branch, so </p>
<pre>$ git remote add main https://host/mary/main
$ git fetch main
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A (master,origin/master) - B (main/master)
 \
  C (feature,origin/feature)
</pre>
</div><p>So now he has a read-only reference to the main repository and an alias for it so he can bring himself up to data quickly with Mary&rsquo;s work. (The alias is optional, but it will help him to stay up to date and see at a glance where his master is relative to Mary&rsquo;s.) First he brings his master in line with the main one</p>
<pre>$ git checkout master
$ git merge main/master
$ git push
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master,main/master)
 \
  C (feature,origin/feature)
</pre>
</div><p>It is here that we see the benefit of working on a feature branch: it is always trivial to merge the master with the main repository if it is kept free of local changes (master is never ahead of main/master). Now he tries the rebase that Mary asked for:</p>
<pre>$ git checkout feature
$ git rebase master
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master,main/master) - D (feature)
 \
  C (origin/feature)
</pre>
</div><p>Bob sees that the history is as he wants it, so he pushes it up to his remote repository:</p>
<pre>$ git push --force
</pre>
<div style="border-width:1px;border-style:solid;background:#eeeeee">
<pre>A - B (master,origin/master,main/master) - D (feature,origin/feature)
</pre>
</div><p>Bob has played the same trick here that Jane did in the previous example - he forced a push of a local branch to maintain a linear history.</p><p>Bob and Mary are consenting adults and the only reason the feature branch exists in Bob&rsquo;s repository is to anchor the pull request, so it is unlikely that anyone else is tracking that branch. If someone was tracking that branch they might be inconvenienced, even severely inconvenienced if they tagged a public release on that branch. It&rsquo;s a risk that Bob decides to take - it&rsquo;s no risk at all in fact in this example because Bob is the only person with write access to his repository and he&rsquo;s pretty confident that no-one is using his branch for making releases.</p>
<h2>Conclusion</h2><p>The process of merging the contribution is not simple unless the changes are trivial, but Git does take a lot of the pain out of it, and it&rsquo;s easy enough once you get the hang of it. The key point in the example is that Git is being used in a particular style, and there are some constraints and conventions that make it easier: Bob and Mary&rsquo;s repositories are read-only to each other, and Bob is actually the only person with write permission to his fork so he doesn&rsquo;t mind at all that Mary wants him to force a push there. This is by far not the only feature of Git that makes it interesting for open-source developers, but it goes a long way to explain why some of us are moving to sites like <a href="https://github.com/">Github</a>.</p></div>
</div>
<section id="disqus_thread"></section>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 384;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>