<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Green Beans: Putting the Spring in Your Step (and Application)</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Green Beans: Putting the Spring in Your Step (and Application)" />
<meta name="twitter:description" content="&lt;p&gt;The Spring framework emerged as a de-facto standard in 2003 and has been helping people build bigger, better applications with cleaner code ever since. In this post, we will discuss the options available to you for configuring an application using the Spring component model. We will grow a simple application from the simplest form and rework it to take advantage of some of the many simplifying features in the Spring framework that have made it, and continue to make it, the de-facto standard for applications today.&lt;/p&gt;
" />
<meta name="twitter:creator" content="@starbuxman" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />

<meta property="og:title" content="Green Beans: Putting the Spring in Your Step (and Application)" />
<meta property="og:image" content="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=200" />
<meta property="og:description" content="&lt;p&gt;The Spring framework emerged as a de-facto standard in 2003 and has been helping people build bigger, better applications with cleaner code ever since. In this post, we will discuss the options available to you for configuring an application using the Spring component model. We will grow a simple application from the simplest form and rework it to take advantage of some of the many simplifying features in the Spring framework that have made it, and continue to make it, the de-facto standard for applications today.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2010-11-09 21:31:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Green Beans: Putting the Spring in Your Step (and Application)</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/fb22593caf24e4bb4c98d467cdd247e6?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/jlong">Josh Long</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2010-11-09 21:31:00.0">November 09, 2010</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="373" href="/blog/2010/11/09/green-beans-putting-the-spring-in-your-step-and-application#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>The Spring framework emerged as a de-facto standard in 2003 and has been helping people build bigger, better applications with cleaner code ever since. In this post, we will discuss the options available to you for configuring an application using the Spring component model. We will grow a simple application from the simplest form and rework it to take advantage of some of the many simplifying features in the Spring framework that have made it, and continue to make it, the de-facto standard for applications today.</p><p>The modern day enterprise Java application has many collaborating objects that work together in unison to further a goal, usually something of intrinsic business value. This object graph is deep, even in the simple cases. Take, for example, the simple case of a service (perhaps a service that supports working with customer data?) that wants to talk to a database. Such a service needs a datasource and optionally some sort of convenience library to facilitate that database access, be it through JDBC, JPA, JDO, NoSQL options, etc. In such a graph, it is tempting to simply create objects as they are needed, at the site of their use. In such a system, the knowledge of object construction or acquisition is strewn throughout the beans that use them. If - as is the case with a database <code>javax.sql.DataSource</code> - that object is needed in more than one place then it&rsquo;s cleaner to setup all the objects in one place and to then share the freshly created instance. This has the advantage of keeping error prone and volatile configuration information in one place where it can be easily changed (such as when database credentials are varied among development and production environments).</p><p>This is one of the main reasons people use Spring - because Spring empowers people to centrally describe these collaborating objects. From the earliest versions of Spring, there was an XML file that was used to describe the object graph. In the early days (circa 2003) this file used a DTD, but today uses XML schema. Here&rsquo;s our example service described in Spring&rsquo;s XML format. We&rsquo;ll remove more and more of this XML configuration as we progress. Each <code>bean</code> element describes an object that will be created and given an <code>id</code>. Each <code>property</code> element describes a setter method on the object and the value that should be given to it. These setters are called for you by the Spring application container. </p>
<pre><code class="prettyprint xml"><br />&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot; id=&quot;ds&quot;&gt;
        &lt;property name=&quot;driverClassName&quot; value=&quot;org.h2.Driver&quot;/&gt;
        &lt;property name=&quot;url&quot; value=&quot;jdbc:h2:~/cs&quot;/&gt;
        &lt;property name=&quot;username&quot; value=&quot;sa&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;
    &lt;/bean&gt;

    &lt;bean class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot; id=&quot;jdbcTemplate&quot;&gt;
      &lt;constructor-arg ref=&quot;ds&quot;/&gt;
    &lt;/bean&gt;

    &lt;bean class=&quot;org.springframework.samples.DatabaseCustomerService&quot; id=&quot;databaseCustomerService&quot;&gt;
        &lt;property name=&quot;jdbcTemplate&quot; ref=&quot;jdbcTemplate&quot;/&gt;
    &lt;/bean&gt;

    &lt;bean class=&quot;org.springframework.samples.CustomerClient&quot; id=&quot;client&quot;&gt;
        &lt;property name=&quot;customerService&quot; ref=&quot;databaseCustomerService&quot;/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre><p>Simple, right? The nice part is that we can write code against interfaces with no specific implementation knowledge. In the example above we instantiate a <code>DriverManagerDataSource</code> and pass it to the constructor of the <code>JdbcTemplate</code> instance by using the <code>ref</code> attribute. <code>ref</code> tells the Spring framework that you want to pass a reference to another bean configured in the same container. Similarly, in our example we pass a reference to the <code>CustomerClient</code> instance, but in the consuming Java code we code against the <code>CustomerService</code> interface, not the specific type <code>DatabaseCustomerService</code>.</p><p>This simple setup affords us a lot of indirection and flexibility. Now that the object creation and construction&rsquo;s been moved to the Spring configuration, we can hide really complex setup in the Spring configuration and keep our code none the wiser. One common way of hiding complex construction logic is through the factory pattern. The factory pattern is particularly useful if you are constructing a lot of objects that need to work together, or if you want to take lots of different factors into consideration when creating an object. Essentially, what you&rsquo;re doing is providing a more powerful way to describe object creation than any one class&rsquo; constructor can naturally do. Spring supports this pattern explicitly. If a bean is configured that implements the <code>org.springframework.beans.factory.FactoryBean<T></code> interface, the <code>getObject()</code> method on the interface will be called and the result will be the object that&rsquo;s available in the Spring context. This practice is used extensively in the Spring framework itself to provide convenient ways to construct complex object graphs in a reusable way.</p><p>In our example, we are using an embedded database called H2, which is a powerful in-memory Java database. Often, embedded databases are used in a development environment. A common practice is to use an embedded database in development to rapidly test and reset a dataset. Usually, this also entails loading data from a SQL script to bootstrap the embedded database. The Spring framework provides explicit support for configuring an embedded datasource and then evaluating scripts against the <code>javax.sql.DataSource</code>.</p>
<div style="border: 1px solid black; padding: 10px;"><strong>Environment Specific Beans in Spring 3.1 - </strong>In the next iteration of the Spring framework, we'll introduce support for <em>environment specific</em> beans. Environment specific beans provide a more direct way of switching beans "on" based on whether some environmental switch is true. This is useful in a few well-defined scenarios where bean configuration varies drastically in different environments. The example here - of using an embedded database in testing but another <code>javax.sql.DataSource</code> in production is just such a scenario. There are, of course, other ways of acheiving the same flexibiltiy using Spring 3.0 or earlier, including <code>FactoryBean</code>s and <code>PropertyPlaceHolderConfigurer</code>s.</div><p>Revisiting our earlier example, we might declare our <code>javax.sql.DataSource</code> called <code>ds</code> like this, instead:</p>
<pre><code class="prettyprint xml">    &lt;bean id=&quot;ds&quot; class=&quot;org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactoryBean&quot;&gt;
        &lt;property name=&quot;databaseType&quot; value=&quot;H2&quot;/&gt;
        &lt;property name=&quot;databasePopulator&quot;&gt;
            &lt;bean class=&quot;org.springframework.jdbc.datasource.init.ResourceDatabasePopulator&quot;&gt;
                &lt;property name=&quot;scripts&quot; value=&quot;setup.sql&quot;/&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt; 
</code></pre><p>This <code>FactoryBean</code> takes care of reading any SQL scripts (I only specified one file called <code>setup.sql</code> here, though you can specify as many as you like, comma separated) and loading them into the database, and then returning a <code>javax.sql.DataSource</code> instance in a simple, convenient way.</p><p>We&rsquo;ve seen the powerful punch a <code>FactoryBean</code> can pack. A well designed <code>FactoryBean</code> will surface the options that are most likely going to be useful in setting up an object, and at runtime it will also provide feedback on invalid configurations of the various options. However, XML can provide even more guidance at design time through the validation provided by XML schemas. This is why the Spring framework has long supported the use of XML schema-based namespaces that describe enable even more feedback and simplification. Let&rsquo;s revisit the embedded database example. The Spring framework provides a namespace for configuring an embedded datasource. To use a namespace in Spring, you simply qualify the namespace and add a reference to the <code>schemaLocation</code> element. The previous Spring configuration file, when revised to support the JDBC XML namespace, looks like this:</p>
<pre><code class="prettyprint xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd&quot;&gt;
  &lt;!-- ...  same as before ... --&gt;
&lt;/beans&gt;
</code></pre><p>This declaration will enable qualified elements in the namespace to be proposed in any modern IDE&rsquo;s XML autocompletion feature. With this installed, we can now replace our previous declaration with something even more succinct.</p>
<pre><code class="prettyprint xml">   &lt;jdbc:embedded-database id=&quot;ds&quot; type=&quot;H2&quot;&gt;
        &lt;jdbc:script location=&quot;classpath:setup.sql&quot;/&gt;
   &lt;/jdbc:embedded-database&gt;
</code></pre><p>This is functionally equivalent to the previous example: it creates an embedded database and it evaluates the contents of the script when the embedded database is started. It creates an object of type <code>javax.sql.DataSource</code>, just as before. We&rsquo;ve handily reduced that embedded database to its essence. It would seem our job is done, and that we can move on, right? Well, not quite. There&rsquo;s still much we can do to remove the configuration even more. Some of the code shown here is custom code that we&rsquo;ve written. If we&rsquo;re willing to annotate the code, then we can let Spring just figure out the right thing to do for us, instead of having to spell it out explicitly. To do this, we need to add the context namespace to our file and enable component scanning. Component scanning scans for beans with certain annotations on them and automatically registers them. Similarly, annotations discovered on the class itself will be processed. Here&rsquo;s the revised XML file with the appropriate XML namespace included.</p>
<pre><code class="prettyprint xml"><br />&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
 	  xsi:schemaLocation=&quot;... http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;org.springframework.samples&quot;/&gt;
    &lt;!-- ...  same as before ... --&gt;
&lt;/beans&gt;
</code></pre><p>All beans that we annotate in the <code>org.springframework.samples</code> package with the Spring framework&rsquo;s <code>@Component</code> annotation will be picked up and registered as beans with the context, exactly as if we had configured them using <code>bean</code> elements in XML. We&rsquo;ve annotated the <code>DatabaseCustomerService</code> and <code>CustomerClient</code> classes with <code>@Component</code>, which lets us remove the equivalent <code>bean</code> elements for those beans from the XML configuration. Component scanning is very convenient because Spring does much of the heavy lifting, though it decentralizes configuration. </p><p>We know that this bean has a dependency on a <code>JdbcTemplate</code>. The <code>JdbcTemplate</code> is configured in the context already. As there is only one configured, we can simply annotate the setter on the class with <code>@Autowired,</code> which tells Spring to resolve the dependency by type and inject it. If there are multiple instances configured in the context then an error would be thrown in this case. </p>
<div style="border: 1px solid black; padding: 10px;"><strong>Annotations for Dependency Resolution - </strong> There are many ways to tell Spring which bean to inject above and beyond <code>@Autowired</code>. You may use JSR 330-supported annotations like <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-autowired-annotation" target="_blank"><code>@javax.inject.Inject</code></a>, or JSR 250's <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-resource-annotation" target="_blank"><code>@javax.annotation.Resource</code></a>, or Spring's <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#new-feature-java-config" target="_blank"><code>@Value</code></a> annotation.</div>
<pre><code class="prettyprint java">package org.springframework.samples;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Component;

import java.sql.ResultSet;
import java.sql.SQLException;

@Component
public class DatabaseCustomerService implements CustomerService {
    private JdbcTemplate jdbcTemplate;
    private RowMapper&lt;Customer&gt; customerRowMapper = new CustomerRowMapper();

    public Customer getCustomerById(long id) {
        return jdbcTemplate.queryForObject(
            &quot;select * from CUSTOMERS where ID = ?&quot;, this.customerRowMapper, id);
    }

    @Autowired
    public void setJdbcTemplate( JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    class CustomerRowMapper implements RowMapper&lt;Customer&gt; {
        public Customer mapRow(ResultSet resultSet, int i)  throws SQLException {
            String fn = resultSet.getString(&quot;FIRST_NAME&quot;);
            String ln = resultSet.getString(&quot;LAST_NAME&quot;);
            String email = resultSet.getString(&quot;EMAIL&quot;);
            long id = resultSet.getInt(&quot;ID&quot;);
            return new Customer(id, fn, ln, email);
        }
    }
}
</code></pre><p>The last class is the client that makes use of the <code>CustomerService</code> instance. We register it just as before, using the <code>@Component</code> annotation. It needs a reference to the <code>CustomerService</code> instance just as the <code>DatabaseCustomerService</code> instance needed a reference to the <code>JdbcTemplate</code>. So, we use our old friend <code>@Autowired</code>.</p>
<pre><code class="prettyprint java">package org.springframework.samples;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.support.GenericXmlApplicationContext;
import org.springframework.stereotype.Component;

@Component
public class CustomerClient {
	private CustomerService customerService ;

	@Autowired
	public void setCustomerService(CustomerService customerService) {
		this.customerService = customerService;
	}

	public void printCustomerInformation ( long customerId ) {
		Customer customer = this.customerService.getCustomerById( customerId );
		System.out.println( customer ) ;
	}
}
</code></pre><p>Our revised XML file is much svelter for our troubles:</p>
<pre><code class="prettyprint xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;org.springframework.samples&quot;/&gt;

    &lt;jdbc:embedded-database id=&quot;ds&quot; type=&quot;H2&quot;&gt;
        &lt;jdbc:script location=&quot;classpath:setup.sql&quot;/&gt;
    &lt;/jdbc:embedded-database&gt;

    &lt;bean class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot; id=&quot;jdbcTemplate&quot;&gt;
        &lt;constructor-arg ref=&quot;ds&quot;/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre><p>We&rsquo;ve used namespace support to make short work of configuring an embedded <code>javax.sql.DataSource</code> instance. We&rsquo;ve used component scanning to let Spring automatically register the <code>DatabaseCustomerService</code> and <code>CustomerClient</code> beans for us. Things are looking pretty good, but we&rsquo;re still using XML to describe the configuration of the <code>JdbcTemplate</code> that we could more readily describe in Java. In this case, XML isn&rsquo;t a more compelling solution than regular Java; it only offers parity. It would be nice if we could use component scanning for the <code>JdbcTemplate</code> instance as well. However, component scanning only works for beans annotated with <code>@Component</code>. As we can&rsquo;t add the <code>@Component</code> annotation to third party classes for which we may not have the source code, component scanning is not an option for the <code>JdbcTemplate</code> instance.</p><p>Spring offers the Java configuration support to let you describe and configure beans using Java directly. The Java configuration option offers the best of both worlds: it lets you configure any class, even classes you don&rsquo;t have the source code for (as with the XML Configuration option) and it&rsquo;s still Java-centric, so benefits from all type safety of the Java language (and the refactoring tools available in the Java IDEs). </p><p>Java Configuration processes a bean registered with the context and it looks for methods annotated with <code>@Bean</code> and invokes them. The result of method invocation is registered with the application context as a bean, exactly as if you had configured the object using XML. The type of the bean is the type of the returned object, and the <code>id</code> is taken from the method name. Because the configuration is provided by the Java code in the method, you can do any manner of setup, much like a <code>FactoryBean</code> lets you do. People often choose the Java configuration option because it lets you keep your bean configuration in one or two well known, central classes. XML configuration and Java configuration both provide a way to centrally describe your application.</p><p>A configuration class is a Spring bean, just like any other. All the rules that apply to regular Spring beans apply to a configuration bean, with the exception of methods annotated with <code>@Bean</code>. Spring will pick up your configuration class with component scanning. If you want to use other beans in your configuration class (for example, the <code>javax.sql.DataSource</code> instance that we previously configured using the XML namespace) then you have all the normal options available to you to get them, including <code>@Autowired.</code>. Let&rsquo;s look at a configuration class for our example.</p>
<pre><code class="prettyprint java"><br />package org.springframework.samples;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Component;
import org.springframework.jdbc.core.JdbcTemplate;

import javax.sql.DataSource;

@Configuration
public class CustomerConfiguration {

	@Autowired private DataSource dataSource;

	@Bean
	public JdbcTemplate jdbcTemplate() {
		return new JdbcTemplate(this.dataSource);
	}
}
</code></pre><p>This class uses <code>@Autowired</code> to obtain a reference to the embedded datasource. This is similar to the way it&rsquo;s used in previous examples, except that here we&rsquo;re using the annotation on a private field variable, not a setter method. The Spring framework will work with annotations on the constructors of a class, on field variables, or on setter methods. Finally, we have a method annotated with <code>@Bean.</code> This method provides the definition of the <code>JdbcTemplate</code> instance and means we can remove the XML configuration from our file. We aren&rsquo;t doing so here, but you can define multiple <code>@Bean</code> definition methods in a class and they can reference each other by simply invoking each other. If one method annotated with <code>@Bean</code> invokes another, the return value will either be a newly created object or - if the bean&rsquo;s been created already - the bean that&rsquo;s already registered with the context. In the class above, we also have an <code>@Configuration</code> annotation on the class. This annotation tells Spring to treat this class as a special type of component specifically for configuration. In essence, this bean benefits from all the same services as any bean registered in a Spring context, <em>and</em> it has extra services applied to it to enable Java configuration. To use Java Configuration, ensure that you have the CGLIB library on your classpath.</p><p>The final revised XML file looks like this:</p>
<pre><code class="prettyprint xml"><br />&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;org.springframework.samples&quot;/&gt;

    &lt;jdbc:embedded-database id=&quot;ds&quot; type=&quot;H2&quot;&gt;
        &lt;jdbc:script location=&quot;classpath:setup.sql&quot;/&gt;
    &lt;/jdbc:embedded-database&gt;   

&lt;/beans&gt;
</code></pre><p>In this post, we have traced the steps that you too can follow to a cleaner, friendlier codebase through Spring&rsquo;s dependency injection capabilities. Though we talked about fantastic technologies that provide more flexibility and more features than anything else out there, it&rsquo;s important to remember that this incredible support has been around for at least 4 years. Most of it for many years more. People have been using these pieces as the bedrock of their applications for just as long. Dependency Injection and Inversion of Control are just the beginning. The Spring framework provides numerous simplifying libraries for a large, growing number of use cases building on top of the component model established here.</p><p>When you build your application on top of Spring, you insulate yourself from the lock-in of the web servers, application servers and cloud environments to which your application is deployed while maximizing your return on investment in the underlying platform.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 373;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>