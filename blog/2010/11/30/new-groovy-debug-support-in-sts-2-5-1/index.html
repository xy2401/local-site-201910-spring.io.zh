<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>New Groovy Debug Support in STS 2.5.1</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="New Groovy Debug Support in STS 2.5.1" />
<meta name="twitter:description" content="&lt;p&gt;We have included some big improvements to Groovy Debugging in the recent release of the SpringSource Tool Suite 2.5.1. It has always been possible to debug your Groovy applications using Eclipse’s vanilla debug support for Java, but due to Groovy’s language differences from Java and its &lt;a href=&quot;http://groovy.codehaus.org/Dynamic+Groovy&quot;&gt;metaprogramming&lt;/a&gt;, many debug features have not been working as well as they could. &lt;/p&gt;
&lt;p&gt;All of the screenshots in this post were taken from a simple &lt;a href=&quot;http://grails.org&quot;&gt;Grails&lt;/a&gt; app and so the debug features here are implicitly making use of dynamically added Groovy methods and properties.&lt;/p&gt;
" />
<meta name="twitter:creator" content="@werdnagreb" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/0a618b43738457becc18ec0348cea9f7?s=200" />

<meta property="og:title" content="New Groovy Debug Support in STS 2.5.1" />
<meta property="og:image" content="https://gravatar.com/avatar/0a618b43738457becc18ec0348cea9f7?s=200" />
<meta property="og:description" content="&lt;p&gt;We have included some big improvements to Groovy Debugging in the recent release of the SpringSource Tool Suite 2.5.1. It has always been possible to debug your Groovy applications using Eclipse’s vanilla debug support for Java, but due to Groovy’s language differences from Java and its &lt;a href=&quot;http://groovy.codehaus.org/Dynamic+Groovy&quot;&gt;metaprogramming&lt;/a&gt;, many debug features have not been working as well as they could. &lt;/p&gt;
&lt;p&gt;All of the screenshots in this post were taken from a simple &lt;a href=&quot;http://grails.org&quot;&gt;Grails&lt;/a&gt; app and so the debug features here are implicitly making use of dynamically added Groovy methods and properties.&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2010-11-30 18:55:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">New Groovy Debug Support in STS 2.5.1</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/0a618b43738457becc18ec0348cea9f7?s=20&amp;d=mm" />
<span class="author">Andrew Eisenberg</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2010-11-30 18:55:00.0">November 30, 2010</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="380" href="/blog/2010/11/30/new-groovy-debug-support-in-sts-2-5-1#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>We have included some big improvements to Groovy Debugging in the recent release of the SpringSource Tool Suite 2.5.1. It has always been possible to debug your Groovy applications using Eclipse&rsquo;s vanilla debug support for Java, but due to Groovy&rsquo;s language differences from Java and its <a href="http://groovy.codehaus.org/Dynamic+Groovy">metaprogramming</a>, many debug features have not been working as well as they could. </p><p>All of the screenshots in this post were taken from a simple <a href="http://grails.org">Grails</a> app and so the debug features here are implicitly making use of dynamically added Groovy methods and properties.</p>
<h3>Step Into</h3><p>With the enhanced Groovy debug support, the step into command works exactly as you would expect. In the past, due to Groovy&rsquo;s extensive use of reflection and cached call sites, uninteresting stack frames would sometimes be stepped into and interesting ones might be stepped over, making debugging a sometimes unpleasant experience.</p><p>Now, it is possible to step into Groovy methods and closures, ignoring all uninteresting Groovy runtime and framework calls:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/Slide11.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/Slide11.png" alt="" title="Stepping" width="690" height="414" class="alignncenter size-full wp-image-6587" /></a></p><p>This support can be disabled from the Groovy -&gt; Debugger -&gt; Extended Debug Support preference page:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/preferences_step.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/preferences_step.png" alt="" title="Step preferences" width="672" height="300" class="aligncenter size-full wp-image-6577" /></a></p>
<h3>Evaluation of Groovy code while debugging</h3><p>When the debugger is stopped on a Groovy stack frame, the display view and expressions view now recognize Groovy syntax with full access to Groovy&rsquo;s dynamically added methods and properties.</p><p>In the display view:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/evalInDisplayView.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/evalInDisplayView.png" alt="" title="Eval in Display View" width="360" height="222" class="aligncenter size-full wp-image-6592" /></a></p><p>In the expressions view:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/expressions1.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/expressions1.png" alt="" title="Expressions View" width="744" height="182" class="aligncenter size-full wp-image-6590" /></a></p><p>And, even in the editor (by selecting a code snipped and using the CTRL-Shift-I keyboard shortcut):</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/evalInEditor.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/evalInEditor.png" alt="" title="Eval In Editor" width="614" height="239" class="aligncenter size-full wp-image-6591" /></a></p><p>If you need to disable this support, you can also do so from the Groovy -&gt; Debugger -&gt; Extended Debug Support preference page:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/preferences_eval.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/preferences_eval.png" alt="" title="preferences_eval" width="672" height="300" class="aligncenter size-full wp-image-6578" /></a></p>
<h3>Nearly everything</h3><p>Anything that you can do in your debugged application should be possible from the display view, well nearly everything except for defining new classes, methods, properties, and closures. Groovy is a large language and constantly evolving. There may be other language features that are not yet supported, but the basics, including variable definitions, loops, conditionals, and gstring list and map literals are all available in an evaluation.</p><p>For example, it is possible to add new instances of a Grails domain class:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/eval1.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/eval1.png" alt="" title="eval1" width="497" height="212" class="aligncenter size-full wp-image-6589" /></a></p><p>And loop through a collection:</p><p><a href="http://blog.springsource.com/wp-content/uploads/2010/11/evalInDisplay2.png"><img src="http://blog.springsource.com/wp-content/uploads/2010/11/evalInDisplay2.png" alt="" title="Eval in Display 2" width="585" height="300" class="aligncenter size-full wp-image-6599" /></a></p>
<h3>Perhaps the strangest use of the Groovy MOP (a brief note on implementation)</h3><p>The Groovy <a href="https://en.wikipedia.org/wiki/Metaobject_protocol">Metaobject Protocol</a> or MOP provides a structured way to change the semantics of Groovy, by giving end-users control over method invocations and property accesses. The core of the new Groovy debug support relies on the Groovy MOP for code evaluation. Here&rsquo;s how it works:</p>
<ul>
<li>Before each evaluation, the selected Groovy code is compiled into a script in the running instance of STS (not the debugged application). </li>
<li>The metaclasses of this script and all classes referenced in the script are changed to a <a href="https://download.oracle.com/javase/1.5.0/docs/guide/jpda/jdi/">Java Debug Interface</a> (JDI) metaclass. JDI defines a protocol for using a debugger to communicate with a debugged application through a socket. </li>
<li>Through the JDI, these meta-classes usurp all method calls, property accesses, and constructor invocations so that the effects occur on the debugged JVM, rather than locally. You can think of the compiled script as a mock that delegates all actions to the debugged application.</li>
</ul><p>This gives us nearly complete control over the debugged application from the running instance of STS. We were surprised and impressed that the Groovy MOP is powerful enough to be used to execute a Groovy script on a remote application.</p><p>If you have a comment, feature request, or something is not working for you, then please <a href="https://issuetracker.springsource.com/browse/STS">raise a jira issue</a> for it or mention it on the <a href="http://forum.springsource.org/forumdisplay.php?f=32">SpringSource Tool Suite forum</a>.</p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 380;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>