<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>RabbitMQ Plugin for Grails - Early Access</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="RabbitMQ Plugin for Grails - Early Access" />
<meta name="twitter:description" content="&lt;p&gt;&lt;a href=&quot;http://www.rabbitmq.com/&quot;&gt;RabbitMQ&lt;/a&gt; is a lightweight, reliable, scalable and portable message broker based on the &lt;a href=&quot;http://blog.springsource.com/2010/06/14/understanding-amqp-the-protocol-used-by-rabbitmq/&quot;&gt;Advanced Message Queueing Protocol (AMQP)&lt;/a&gt;. It’s ideal for heterogeneous systems and cloud platforms, but it can be used for pretty much any messaging requirements, big or small. You don’t (typically) access it via the JMS API, and in fact the JMS plugin won’t help, but a new plugin is now available that’s dedicated to making it easy to use RabbitMQ from Grails applications.&lt;/p&gt;
&lt;p&gt;The current version of the plugin (0.2) is relatively limited, but you can already send and receive messages. I encourage you to try it out and provide feedback - you have the opportunity to influence its development!&lt;/p&gt;
" />

<meta property="og:title" content="RabbitMQ Plugin for Grails - Early Access" />
<meta property="og:description" content="&lt;p&gt;&lt;a href=&quot;http://www.rabbitmq.com/&quot;&gt;RabbitMQ&lt;/a&gt; is a lightweight, reliable, scalable and portable message broker based on the &lt;a href=&quot;http://blog.springsource.com/2010/06/14/understanding-amqp-the-protocol-used-by-rabbitmq/&quot;&gt;Advanced Message Queueing Protocol (AMQP)&lt;/a&gt;. It’s ideal for heterogeneous systems and cloud platforms, but it can be used for pretty much any messaging requirements, big or small. You don’t (typically) access it via the JMS API, and in fact the JMS plugin won’t help, but a new plugin is now available that’s dedicated to making it easy to use RabbitMQ from Grails applications.&lt;/p&gt;
&lt;p&gt;The current version of the plugin (0.2) is relatively limited, but you can already send and receive messages. I encourage you to try it out and provide feedback - you have the opportunity to influence its development!&lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2010-08-23 15:45:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">RabbitMQ Plugin for Grails - Early Access</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="null?s=20&amp;d=mm" />
<span class="author">Peter Ledbrook</span>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2010-08-23 15:45:00.0">August 23, 2010</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="352" href="/blog/2010/08/23/rabbitmq-plugin-for-grails-early-access#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p><a href="https://www.rabbitmq.com/">RabbitMQ</a> is a lightweight, reliable, scalable and portable message broker based on the <a href="http://blog.springsource.com/2010/06/14/understanding-amqp-the-protocol-used-by-rabbitmq/">Advanced Message Queueing Protocol (AMQP)</a>. It&rsquo;s ideal for heterogeneous systems and cloud platforms, but it can be used for pretty much any messaging requirements, big or small. You don&rsquo;t (typically) access it via the JMS API, and in fact the JMS plugin won&rsquo;t help, but a new plugin is now available that&rsquo;s dedicated to making it easy to use RabbitMQ from Grails applications.</p><p>The current version of the plugin (0.2) is relatively limited, but you can already send and receive messages. I encourage you to try it out and provide feedback - you have the opportunity to influence its development!</p><p><b>Update</b> The companion screencast is now available:</p><p><a href="	http://videos.springsource.org/grails/rabbitmq_grails_earlyaccess_web.mov"><img src="http://blog.springsource.com/wp-content/uploads/2010/08/grails-rabbitmq-thmb.png" alt="" title="grails-rabbitmq-thmb" width="200" height="150" class="aligncenter size-full wp-image-5548" /></a></p><p><b>Update</b> <a href="http://s3.springsource.com/MRKT/grails/grailsrabbitdemo.zip">Source code</a> for the example project created in the screencast.</p>
<h2>Installing the broker</h2><p>Before you try the plugin, you will have to set up a RabbitMQ server somewhere. Take a look at the RabbitMQ <a href="https://www.rabbitmq.com/server.html">server download page</a> and locate the appropriate package for your platform. Then follow the appropriate <a href="https://www.rabbitmq.com/install.html">installation instructions</a>.</p><p>I use an Ubuntu virtual machine to run the broker, because installation is a one-liner:<br /><pre><br /> sudo apt-get install rabbitmq-server<br /></pre><br />This command will not only install the server but also configure it to start on boot. To check that the broker is running, you can execute the command:<br /><pre><br /> sudo rabbitmqctl status<br /></pre><br />This should display output that looks something like<br /><pre><br /> Status of node <a href="/cdn-cgi/l/email-protection#cee8edfffffaf5e8edb6f8fff5e8edf7f6f5ace8edb6f8f7f5e8edb6f9faf5e8edf8faf5e8edb6f9fbf5e8edf7f6f5e8edb6f9fbf5a0bae8edb6f9fbf5">&#114;&#x61;&#98;b&#x69;&#x74;&#64;&#x75;&#98;&#x75;nt&#x75;</a> &hellip;<br /> [{running_applications,[{rabbit,&ldquo;RabbitMQ&rdquo;,&ldquo;1.7.2&rdquo;},<br /> {mnesia,&ldquo;MNESIA CXC 138 12&rdquo;,&ldquo;4.4.12&rdquo;},<br /> {os_mon,&ldquo;CPO CXC 138 46&rdquo;,&ldquo;2.2.4&rdquo;},<br /> {sasl,&ldquo;SASL CXC 138 11&rdquo;,&ldquo;2.1.8&rdquo;},<br /> {stdlib,&ldquo;ERTS CXC 138 10&rdquo;,&ldquo;1.16.4&rdquo;},<br /> {kernel,&ldquo;ERTS CXC 138 10&rdquo;,&ldquo;2.13.4&rdquo;}]},<br /> {nodes,[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6b190a0909021f2b1e091e051f1e">[email&#160;protected]</a>]},<br /> {running_nodes,[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c5b7a4a7a7acb185b0a7b0abb1b0">[email&#160;protected]</a>]}]<br /> &hellip;done.</p><p></pre><br />Assuming that it has installed OK and is running, you can start using it from your Grails applications.</p>
<h2>Receiving messages</h2><p>The first step towards interacting with the broker involves installing the plugin:<br /><pre><br /> grails install-plugin rabbitmq 0.2<br /></pre><br />Once that&rsquo;s finished, you&rsquo;ll see a message explaining that you have to add some settings to <tt>grails-app/conf/Config.groovy</tt> before you can use it. Specifically, you have to configure the connection factory for the broker, i.e. where the broker is running and what credentials to use when connecting to it. So, open up <tt>Config.groovy</tt> in your editor and add the following:</p>
<pre><code class="prettyprint groovy">rabbitmq {
    connectionfactory {
        username = &#39;guest&#39;
        password = &#39;guest&#39;
        hostname = &#39;localhost&#39;
        consumers = 5
    }

    queues = {
        msgs()
    }
}
</code></pre><p>This configures the plugin to use a default RabbitMQ server running on the local machine. If the broker isn&rsquo;t running locally or it&rsquo;s running in a virtual machine, you will have to change the host name. And at the risk of stating the obvious, please make sure you use more secure credentials for a production instance of the broker!</p><p>The code above also configures a queue called &lsquo;msgs&rsquo;. It&rsquo;s important to understand that this setting ensures that the queue exists by the time the application has started up, i.e. if it doesn&rsquo;t exist, the plugin will create it. If some other application were to create the queue, then you would <em>not</em> need to configure the queue in <tt>Config.groovy</tt>. For more information on plugin configuration, have a look at the plugin&rsquo;s <a href="https://grails-plugins.github.com/grails-rabbitmq/docs/manual/guide/2.%20Configuration.html#2.1 Configuring Queues">user guide</a>. </p><p>Now we have a queue set up, how do we process messages from it? Simple: create a service! Here&rsquo;s an example (file location: <tt>grails-app/services/org/example/ConsumerService.groovy</tt>):</p>
<pre><code class="prettyprint groovy">package org.example

class ConsumerService {
    static rabbitQueue = &quot;msgs&quot;

    void handleMessage(msg) {
        println &quot;Received message: $msg&quot;
    }
}
</code></pre><p>The static <tt>rabbitQueue</tt> property tells the plugin which queue this service should listen on. In this case, it&rsquo;s the one we configured in <tt>Config.groovy</tt>. The <tt>handleMessage()</tt> method will then be invoked whenever a message becomes available on the queue, and the message&rsquo;s content will be passed as the argument.</p><p>We&rsquo;re now good to go; all we have to do is publish some messages to that queue. I borrowed <a href="https://ndpar.blogspot.com/2010/03/get-started-with-rabbitmq.html">a Groovy script</a> for this job and have made it available. It&rsquo;s currently hard-coded to &lsquo;localhost&rsquo;, but you can easily change this if you need to. Assuming that the Grails application is running and you have Groovy installed and on the path, you can call the script like so:<br /><pre><br /> groovy publisher.groovy msgs &ldquo;Hello world&rdquo;<br /></pre><br />This sends the message content &ldquo;Hello world&rdquo; to the &lsquo;msgs&rsquo; queue. Hopefully, you will shortly see<br /><pre><br />Received message: Hello world<br /></pre><br />in the output of the Grails application. That&rsquo;s all there is to it - nice and easy.</p>
<h3>Of message types</h3><p>Before I show you how to send messages from a Grails application, a word of warning: the content of an AMQP message is basically a sequence of bytes. Normally it would be up to the consumer to convert that sequence of bytes - a byte array in Java - to its proper form, but the Grails plugin will automatically perform the conversion if the message has an appropriate content type header. In fact, this automatic conversion is handled by the <a href="http://www.springsource.org/spring-amqp">Spring AMQP</a> library, which the plugin uses under the hood.</p><p>What does this mean for you? Well, if you use the plugin or Spring AMQP for both consumers and publishers, you won&rsquo;t have to worry about conversions. If you publish a map as a message, the consumer will see it as a map. But if you use the raw RabbitMQ Java client or a different language/platform, you will either have to make sure the content type header is set by the publisher or perform the data conversion yourself in the consumer.</p><p>After that little diversion, let&rsquo;s take a look at sending messages.</p>
<h2>Sending messages</h2><p>Sending messages via RabbitMQ is even easier than receiving them. The plugin dynamically adds a method called <tt>rabbitSend()</tt> to all artifacts, including controllers and services. For example, we can use it from a service like so:</p>
<pre><code class="prettyprint groovy">package org.example

class PublishService {
    void sendMessage(String msg) {
        rabbitSend &#39;msgs&#39;, msg
    }
}
</code></pre><p>This service just sends some text messages to the &lsquo;msgs&rsquo; queue. If you want a bit more flexibility, then you can use an alternative form of the <tt>rabbitSend()</tt> method:<br /><pre><br /> rabbitSend(String exchange, String routingKey, msg)<br /></pre><br />This will send a message to the named exchange with the given routing key. Although the plugin cannot create exchanges itself yet, it can interact with existing ones, which makes this form of the method more useful than it seems at first. See my <a href="http://blog.springsource.com/2010/06/14/understanding-amqp-the-protocol-used-by-rabbitmq/">AMQP blog post</a> for more information on exchanges and routing keys.</p><p><b>Warning</b> You may stumble across <tt>rabbitSend(msg)</tt>, i.e. a version of the method that only takes a message, but it doesn&rsquo;t do anything useful - unless you override the <tt>rabbitTemplate</tt> bean, which is a task that&rsquo;s beyond the scope of this article.</p><p>As I indicated earlier, the current version of the plugin is really available as an early-access preview for those who don&rsquo;t need full featured support at this stage, but who would like to get started with RabbitMQ. That said, point-to-point messaging works fine and if you are able to create exchanges via an alternative method, you have the flexibility to send messages to them with any routing key you choose. So why not give it a try?</p></div>
</div>
<section id="disqus_thread"></section>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 352;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
 <a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>