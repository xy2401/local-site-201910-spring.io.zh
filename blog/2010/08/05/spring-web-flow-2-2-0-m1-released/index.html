<!DOCTYPE html>
<html data-code-prettify="" data-mobile-support="" data-search="">
<head>
<title>Spring Web Flow 2.2.0.M1 Released</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png" />
<link href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/main-bc256dba5f9d253d6425441ccfb82576.css" />
<script src="/jspm_packages/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/b92013b"});
  </script>
<script src="/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link href="/css/blog-92993c3ec6808bded45b277c18d7d621.css" rel="stylesheet" type="text/css" />

<meta content="summary" name="twitter:card" />
<meta content="@springcentral" name="twitter:site" />
<meta name="twitter:title" content="Spring Web Flow 2.2.0.M1 Released" />
<meta name="twitter:description" content="&lt;p&gt;I’m pleased to announce the first milestone of Spring Web Flow 2.2 is now available for &lt;a href=&quot;http://www.springsource.com/download/community?project=Spring%20Web%20Flow&quot;&gt;download&lt;/a&gt;. The release is also available through the Maven milestone repository at &lt;a href=&quot;http://maven.springframework.org/milestone&quot;&gt;http://maven.springframework.org/milestone&lt;/a&gt;. As with Spring Web Flow 2.1, this release requires JDK 1.5, Spring 3 and Spring Security 3. &lt;/p&gt;
&lt;p&gt;The main focus of the release is to address the needs of JSF users by extending the list of supported &lt;a href=&quot;http://andyschwartz.wordpress.com/2009/07/31/whats-new-in-jsf-2/&quot;&gt;JSF 2 features&lt;/a&gt;. Not long ago &lt;a href=&quot;http://static.springsource.org/spring-webflow/docs/2.1.x/reference/htmlsingle/spring-webflow-reference.html#whatsnew&quot;&gt;Web Flow 2.1&lt;/a&gt; made it possible to use JSF 2 dependencies without the need for the separate Sun Facelets jar that is commonly used with JSF 1.2 today. &lt;/p&gt;
" />
<meta name="twitter:creator" content="@rstoya05" />
<meta name="twitter:image:src" content="https://gravatar.com/avatar/4b12b9c0c665bc0345467c1a218ed0f7?s=200" />

<meta property="og:title" content="Spring Web Flow 2.2.0.M1 Released" />
<meta property="og:image" content="https://gravatar.com/avatar/4b12b9c0c665bc0345467c1a218ed0f7?s=200" />
<meta property="og:description" content="&lt;p&gt;I’m pleased to announce the first milestone of Spring Web Flow 2.2 is now available for &lt;a href=&quot;http://www.springsource.com/download/community?project=Spring%20Web%20Flow&quot;&gt;download&lt;/a&gt;. The release is also available through the Maven milestone repository at &lt;a href=&quot;http://maven.springframework.org/milestone&quot;&gt;http://maven.springframework.org/milestone&lt;/a&gt;. As with Spring Web Flow 2.1, this release requires JDK 1.5, Spring 3 and Spring Security 3. &lt;/p&gt;
&lt;p&gt;The main focus of the release is to address the needs of JSF users by extending the list of supported &lt;a href=&quot;http://andyschwartz.wordpress.com/2009/07/31/whats-new-in-jsf-2/&quot;&gt;JSF 2 features&lt;/a&gt;. Not long ago &lt;a href=&quot;http://static.springsource.org/spring-webflow/docs/2.1.x/reference/htmlsingle/spring-webflow-reference.html#whatsnew&quot;&gt;Web Flow 2.1&lt;/a&gt; made it possible to use JSF 2 dependencies without the need for the separate Sun Facelets jar that is commonly used with JSF 1.2 today. &lt;/p&gt;
" />
<meta content="article" property="og:type" />
<meta property="og:article:published_time" content="2010-08-05 11:02:00.0" />
</head>
<body>

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="/projects">Projects</a>
</li>
<li class="navbar-link">
<a href="/guides">Guides</a>
</li>
<li class="navbar-link active">
<a href="/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="/services">Training & Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="" />
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="" />
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="/services">
Training & Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<div class="main-body--wrapper">
<div class="row-fluid blog--wrapper">
<article class="span8 mobile-left-pane" id="content">
<header class="desktop-only">
<div class="blog-category active content--title">
<div>Engineering</div>
</div>
<div class="blog-category content--title">
<div>Releases</div>
</div>
<div class="blog-category content--title">
<div>News and Events</div>
</div>
</header>
<div class="blog--container">
<header>
<h1 class="blog--title">Spring Web Flow 2.2.0.M1 Released</h1>
<div class="meta-data--container">
<div class="meta-data--item desktop-only">
<div class="meta-data--icon icon blog-icon engineering"></div>
<a class="category">Engineering</a>
</div>
<div class="meta-data--item">
<img class="meta-data--icon" src="https://gravatar.com/avatar/4b12b9c0c665bc0345467c1a218ed0f7?s=20&amp;d=mm" />
<a class="author" rel="author" href="/team/rstoyanchev">Rossen Stoyanchev</a>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon calendar"></div>
<time class="date" pubdate="" datetime="2010-08-05 11:02:00.0">August 05, 2010</time>
</div>
<div class="meta-data--item">
<div class="meta-data--icon icon blog-icon comments"></div>
<a class="comments" data-disqus-identifier="346" href="/blog/2010/08/05/spring-web-flow-2-2-0-m1-released#disqus_thread">
</a></div>
</div>
</header>
<div class="blog--post"><p>I&rsquo;m pleased to announce the first milestone of Spring Web Flow 2.2 is now available for <a href="http://www.springsource.com/download/community?project=Spring%20Web%20Flow">download</a>. The release is also available through the Maven milestone repository at <a href="http://maven.springframework.org/milestone">http://maven.springframework.org/milestone</a>. As with Spring Web Flow 2.1, this release requires JDK 1.5, Spring 3 and Spring Security 3. </p><p>The main focus of the release is to address the needs of JSF users by extending the list of supported <a href="https://andyschwartz.wordpress.com/2009/07/31/whats-new-in-jsf-2/">JSF 2 features</a>. Not long ago <a href="http://static.springsource.org/spring-webflow/docs/2.1.x/reference/htmlsingle/spring-webflow-reference.html#whatsnew">Web Flow 2.1</a> made it possible to use JSF 2 dependencies without the need for the separate Sun Facelets jar that is commonly used with JSF 1.2 today. </p><p>In Spring Web Flow 2.2 you can look forward to taking advantage of core JSF 2 features and JSF 2 component libraries. More on component libraries later in this post. First here is an overview of the new features.</p>
<h2>JSF 2 Ajax Requests</h2><p>JSF 2 defines client and server side facilities for processing Ajax requests. You can add Ajax behavior to a component with the &lt;f:ajax&gt; tag as follows:</p>
<pre><code class="prettyprint xml"><br />&lt;h:commandButton value=&quot;More Results&quot; action=&quot;next&quot;&gt;
    &lt;f:ajax render=&quot;@form&quot; /&gt;
&lt;/h:commandButton&gt;
</code></pre><p>When the above button is pressed an Ajax request is sent to the server that will result in partial request processing, rendering, and an update to the form the button belongs to. </p><p>The &lt;f:ajax&gt; tag also supports other attributes such as &ldquo;event&rdquo; for specifying client-side events (blur, mouseover, etc) and &ldquo;execute&rdquo; for specifying components that should be included in the execute phase of the request processing lifecycle. The &lt;f:ajax&gt; tag can be nested inside or surround other tags. There is also a JavaScript API. See section 10.4.1.1 and chapter 14 of the JSF 2 spec for more details and examples.</p><p>If you are a Web Flow 2 user you will find it familiar to process the above request as you do today:</p>
<pre><code class="prettyprint xml"><br />&lt;view-state id=&quot;reviewHotels&quot;&gt;
    &lt;transition on=&quot;next&quot;&gt;
        &lt;evaluate expression=&quot;searchCriteria.nextPage()&quot; /&gt;
    &lt;/transition&gt;
&lt;/view-state&gt;
</code></pre><p>The transition on &ldquo;next&rdquo; does not have a target view state. That will keep us in the current view while advancing the SearchCriteria backing bean to the next page. To ensure rendering happens without a client-side redirect (the POST-redirect-GET pattern), you need to configure Web Flow to be able to recognize JSF 2 Ajax requests:</p>
<pre><code class="prettyprint xml"><br />&lt;bean class=&quot;org.springframework.webflow.mvc.servlet.FlowHandlerAdapter&quot;&gt;
    &lt;property name=&quot;flowExecutor&quot; ref=&quot;flowExecutor&quot; /&gt;
    &lt;property name=&quot;ajaxHandler&quot;&gt;
        &lt;bean class=&quot;org.springframework.faces.webflow.JsfAjaxHandler&quot;/&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>The booking-faces sample in the 2.2.0.M1 release uses the &lt;f:ajax /&gt; tag throughout including use cases such as search result pagination and Ajax-based form validation.</p>
<h2>JSF 2 Resource Requests</h2><p>JSF 2 introduces a ResourceHandler API for serving resources (images, .js, .css files) packaged relative to the web application root under /resources/** or on the classpath under META-INF/resources/**. JSF component libraries can add resources transparently via an API or @ResourceDependency annotation. Alternatively you can also add an &lt;outputScript&gt; tag to the view.</p><p>JSF renders resource URLs such that they point back to the same servlet like this:<br />/myApp/myServlet/javax.faces.resources/<resourceIdentifier></p><p>Note the &ldquo;/javax.faces.resources&rdquo; segment that comes after the servlet mapping. This is what distinguishes it as a JSF resource requests.</p><p>In Web Flow, JSF resource URLs point back to the Spring MVC DispatcherServlet. To handle such requests a new Spring MVC HttpRequestHandler is provided to delegate resource requests to the JSF 2 resource handling mechanism. Below is the configuration required to configure this handler. The final release will <a href="https://jira.springframework.org/browse/SWF-1375">simplify</a> this configuration.</p>
<pre><code class="prettyprint xml"><br />&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
    &lt;property name=&quot;mappings&quot; value=&quot;/javax.faces.resource/**=jsfResourceHandler&quot;/&gt;
&lt;/bean&gt;

&lt;bean class=&quot;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&quot; /&gt;

&lt;bean id=&quot;jsfResourceHandler&quot; class=&quot;org.springframework.faces.webflow.FacesJsfResourceRequestHandler&quot;/&gt;
</code></pre><p>The booking-faces sample in the 2.2.0.M1 release contains the necessary configuration.</p>
<h2>Partial State Saving</h2><p>Partial state saving is arguably one of the most important changes in JSF 2 (Facelets only). The way it works is, rather than storing the entire component tree state for every view the partial state saving algorithm always restores the tree to its initial state and then applies and keeps track of what&rsquo;s changed only. This rational is that component tree changes are likely to be smaller than the full component tree state thus resulting in less memory usage.</p><p>In Web Flow, the JSF component tree state has always been stored in a view-scoped Web Flow variable rather than directly in the HTTP session. Unfortunately to achieve that in JSF 1.2, Web Flow had to take over the entire state saving algorithm. This is why partial state didn&rsquo;t work out of the box in Web Flow 2.1 and had to be disabled through the &ldquo;javax.faces.PARTIAL_STATE_SAVING&rdquo; context parameter in web.xml.</p><p>General improvements in JSF 2 state saving made it possible to delegate to the standard JSF StateManager implementation and plug in a custom ResponseStateManager to override only the parts that do the actual reading and writing of component state. That is what Web Flow 2.2 does to provide support for partial state saving.</p><p>The change has been tested with Mojarra and in particular Mojarra version 2.0.3 (recommended version). If you use the Apache MyFaces JSF 2 implementation for the time being you will need to continue to use the &ldquo;javax.faces.PARTIAL_STATE_SAVING&rdquo; parameter to disable partial state saving. Unfortunately in MyFaces it wasn&rsquo;t as simple to customize how state is where state is read from and written to so it will take a little more time.</p>
<h2>Single FacesContext Per Request</h2><p>Part of the changes for partial state saving required making sure a single FacesContext instance is used for the duration of a single flow request. This is probably a welcome change for JSF users as evidenced by a few of your comments in JIRA. To avoid getting a NullPointerException on FacesContext you will need to add this FlowExecutionListener:</p>
<pre><code class="prettyprint xml"><br />&lt;webflow:flow-executor id=&quot;flowExecutor&quot;&gt;
    &lt;webflow:flow-execution-listeners&gt;
        &lt;webflow:listener ref=&quot;facesContextListener&quot; /&gt;
    &lt;/webflow:flow-execution-listeners&gt;
&lt;/webflow:flow-executor&gt;

&lt;bean id=&quot;facesContextListener&quot; class=&quot;org.springframework.faces.webflow.FlowFacesContextLifecycleListener&quot;/&gt;
</code></pre><p>This is needed regardless of the JSF version used.</p>
<h2>More JSF 2 Features</h2><p>The only features that aren&rsquo;t supported are the ones where Web Flow provides core value including navigation and scopes. JSF 2 uses conventions to simplify navigation rules, adds conditional navigation, and provides view, flash, and custom scopes. You will find that Web Flow continues to provide significant value in both of these areas.</p><p>View parameters is another feature that isn&rsquo;t supported. Web Flow does provide a way to access request parameters and to bind them to fields of scoped beans. If you however have any good use cases in mind please do provide us with feedback.</p><p>Any other features not already mentioned (composite components, JSR-303 validation, system events, etc) are expected to work. With regards to composite components the following Mojarra <a href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=1690">issue</a> may affect you. If so please vote for it.</p>
<h2>JSF 2 Component Libraries</h2><p>In addition to its JSF integration, Spring Web Flow currently ships with a small library of components. The Spring Faces component library builds on the Dojo JavaScript toolkit and provides Ajax behavior, resource handling, and client-side validation in a progressive enhancement style. Much of this overlaps with what JSF 2 provides. Hence we have a choice to either extend support for JSF 2 to include the Spring Faces component library or to integrate closely with other component libraries popular in the JSF community. We believe the latter option will provide significantly more value to you.</p><p>At this point I am happy to announce we are working closely with the team behind <a href="http://www.primefaces.org/">PrimeFaces</a> to bring you a close integration with its library of components. PrimeFaces is the first component library to support JSF 2 and is rapidly gaining in popularity. Much like Spring Faces it builds on a client-side JavaScript toolkit (jQuery) and has an impressive array of components that is growing by the day. If you haven&rsquo;t checked out the PrimeFaces component <a href="http://www.primefaces.org:8080/prime-showcase/ui/home.jsf">showcase</a> please do so.</p><p>As a result you can expect Spring Web Flow 2.2 to release with JSF 2 samples featuring PrimeFaces components demonstrating effective use of Web Flow, JSF 2 and a first-class JSF 2 component library. </p>
<h2>Conclusion</h2><p>Web Flow 2.2 will be the first release to provide support for core JSF 2 features and close integration with the PrimeFaces component library. If you&rsquo;re a JSF user I hope you will find this an exciting step forward. To try the release please <a href="http://www.springsource.com/download/community?project=Spring%20Web%20Flow">download</a> it, run the updated booking-faces sample, and give us your feedback. You can expect a release candidate at the end of this month in sync with the <a href="https://code.google.com/p/primefaces/wiki/Roadmap">PrimeFaces 2.2</a> release.</p><p>Meanwhile work on Web Flow 3 is continuing towards a first milestone. The defining feature of Web Flow 3 is Java flow definitions. The JSF work being done in the 2.2 branch will feed into the 3.0 branch. </p></div>
</div>
<section id="disqus_thread"></section>
<script type="text/javascript">
      var disqus_shortname = 'spring-io';
      var disqus_identifier = 346;

      (function(disqus_shortname, document) {
        injectScript('//' + disqus_shortname + '.disqus.com/embed.js');
        injectScript('//' + disqus_shortname + '.disqus.com/count.js');

        function injectScript(url) {
          var s = document.createElement('script');
          s.async = true;
          s.src = url;
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
        }

      }(disqus_shortname, document));
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="mobile-only">
<p><a href="/blog">
<i class="icon-chevron-left"></i>
Back
</a></p>
</div>
</article>
<aside class="span4 mobile-right-pane" id="sidebar">
<div>
<ul class="right-pane-widget--container secondary-nav with-icon">
<li class="blog-category">
<div class="icon blog-icon all-posts"></div>
<a href="/blog">All Posts</a>
<a class="pull-right" href="/blog.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category active">
<div class="icon blog-icon engineering"></div>
<a href="/blog/category/engineering">Engineering</a>
<a class="pull-right" href="/blog/category/engineering.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon releases"></div>
<a href="/blog/category/releases">Releases</a>
<a class="pull-right" href="/blog/category/releases.atom"><i class="icon-rss"></i></a>
</li>
<li class="blog-category">
<div class="icon blog-icon news-and-events"></div>
<a href="/blog/category/news">News and Events</a>
<a class="pull-right" href="/blog/category/news.atom"><i class="icon-rss"></i></a>
</li>
</ul>
<ul class="social-btn--container">
<a class="social-btn twitter" href="https://twitter.com/springcentral"></a>

<a class="social-btn linkedin" href="https://www.linkedin.com/groups/46964"></a>
<a class="social-btn youtube" href="/videos"></a>
</ul>
<div id="blog-sidebar-newsletter">
<p>Get updates from The Spring Team delivered to your inbox</p>
<script src="https://app-sj05.marketo.com/js/forms2/js/forms2.min.js"></script>
<form id="mktoForm_4723"></form>
<script>
        MktoForms2.loadForm("https://app-sj05.marketo.com", "625-IUJ-009", 4723, function(form){
          form.onSuccess(function(values, followUpUrl) {
            form.getFormElem().html("<p>Thank you!</p>");
            return false;
          });
        });
      </script>
</div>
</div>
</aside>
</div>
</div>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="/team">Team</a></li>
<li><a href="/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="/blog">Newsletter</a></li>
</ul>
</div>
</div>
&copy; <span>2019</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> &bullet;
<a href="https://pivotal.io/privacy-policy">Privacy</a> &bullet;
<a href="/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;"></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
</body></html>